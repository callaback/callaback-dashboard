{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n// Phone number formatting\nexport function formatPhoneNumber(phone?: string): string {\n  if (!phone || phone.trim() === '') return 'Unknown'\n  \n  // Remove all non-digit characters\n  const cleaned = phone.replace(/\\D/g, '')\n  \n  if (cleaned.length === 0) return phone // Return original if no digits\n  \n  // Handle US numbers (country code 1)\n  if (cleaned.length === 11 && cleaned.startsWith('1')) {\n    const match = cleaned.match(/^1(\\d{3})(\\d{3})(\\d{4})$/)\n    if (match) return `+1 (${match[1]}) ${match[2]}-${match[3]}`\n  }\n  \n  // Handle standard US numbers\n  if (cleaned.length === 10) {\n    const match = cleaned.match(/^(\\d{3})(\\d{3})(\\d{4})$/)\n    if (match) return `(${match[1]}) ${match[2]}-${match[3]}`\n  }\n  \n  // Handle shorter numbers\n  if (cleaned.length === 7) {\n    const match = cleaned.match(/^(\\d{3})(\\d{4})$/)\n    if (match) return `${match[1]}-${match[2]}`\n  }\n  \n  // For international numbers, try to format\n  if (cleaned.length > 10) {\n    // Extract country code (first 1-3 digits)\n    const countryCodeMatch = cleaned.match(/^(\\d{1,3})(\\d{4,})$/)\n    if (countryCodeMatch) {\n      const [, countryCode, localNumber] = countryCodeMatch\n      \n      // Try to format local number based on length\n      if (localNumber.length === 10) {\n        const localMatch = localNumber.match(/^(\\d{3})(\\d{3})(\\d{4})$/)\n        if (localMatch) return `+${countryCode} (${localMatch[1]}) ${localMatch[2]}-${localMatch[3]}`\n      } else if (localNumber.length >= 6) {\n        // Generic formatting for other lengths\n        return `+${countryCode} ${localNumber.replace(/(\\d{3})(?=\\d)/g, '$1 ')}`\n      }\n    }\n  }\n  \n  // Return with basic formatting if no special case matches\n  if (cleaned.length >= 4) {\n    // Add spaces every 3 digits\n    const formatted = cleaned.replace(/(\\d{3})(?=\\d)/g, '$1 ')\n    return cleaned.length > 10 ? `+${formatted}` : formatted\n  }\n  \n  // Return original if we can't format\n  return phone\n}\n\n// Time ago formatting\nexport function formatTimeAgo(dateStr?: string): string {\n  if (!dateStr) return '--'\n  \n  try {\n    const date = new Date(dateStr)\n    if (isNaN(date.getTime())) return 'Invalid date'\n    \n    const now = new Date()\n    const diffMs = now.getTime() - date.getTime()\n    const diffSecs = Math.floor(diffMs / 1000)\n    const diffMins = Math.floor(diffSecs / 60)\n    const diffHours = Math.floor(diffMins / 60)\n    const diffDays = Math.floor(diffHours / 24)\n    const diffWeeks = Math.floor(diffDays / 7)\n    const diffMonths = Math.floor(diffDays / 30)\n    const diffYears = Math.floor(diffDays / 365)\n    \n    if (diffSecs < 10) return 'Just now'\n    if (diffSecs < 60) return `${diffSecs}s ago`\n    if (diffMins < 60) return `${diffMins}m ago`\n    if (diffHours < 24) return `${diffHours}h ago`\n    if (diffDays < 7) return `${diffDays}d ago`\n    if (diffWeeks < 4) return `${diffWeeks}w ago`\n    if (diffMonths < 12) return `${diffMonths}mo ago`\n    return `${diffYears}y ago`\n  } catch {\n    return '--'\n  }\n}\n\n// Date/time formatting\nexport function formatDateTime(\n  dateStr?: string, \n  options?: Intl.DateTimeFormatOptions\n): string {\n  if (!dateStr) return '--'\n  \n  try {\n    const date = new Date(dateStr)\n    if (isNaN(date.getTime())) return 'Invalid date'\n    \n    const defaultOptions: Intl.DateTimeFormatOptions = {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: true,\n    }\n    \n    return date.toLocaleDateString('en-US', { ...defaultOptions, ...options })\n  } catch {\n    return '--'\n  }\n}\n\n// Short date format (Jan 27)\nexport function formatShortDate(dateStr?: string): string {\n  if (!dateStr) return '--'\n  \n  try {\n    const date = new Date(dateStr)\n    if (isNaN(date.getTime())) return 'Invalid date'\n    \n    return date.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n    })\n  } catch {\n    return '--'\n  }\n}\n\n// Duration formatting\nexport function formatDuration(seconds?: number): string {\n  if (!seconds || seconds === 0 || isNaN(seconds)) return '--'\n  \n  if (seconds < 60) {\n    return `${seconds}s`\n  }\n  \n  const mins = Math.floor(seconds / 60)\n  const secs = seconds % 60\n  \n  if (mins < 60) {\n    return secs > 0 ? `${mins}m ${secs}s` : `${mins}m`\n  }\n  \n  const hours = Math.floor(mins / 60)\n  const remainingMins = mins % 60\n  \n  if (remainingMins > 0) {\n    return `${hours}h ${remainingMins}m`\n  }\n  \n  return `${hours}h`\n}\n\n// Text truncation\nexport function truncateText(text: string, maxLength: number, addEllipsis: boolean = true): string {\n  if (!text || text.length <= maxLength) return text\n  \n  const truncated = text.substring(0, maxLength)\n  return addEllipsis ? `${truncated}...` : truncated\n}\n\n// Generate initials from name\nexport function generateInitials(name?: string): string {\n  if (!name || name.trim() === '') return '??'\n  \n  const trimmed = name.trim()\n  const parts = trimmed.split(/\\s+/)\n  \n  if (parts.length === 1) {\n    return parts[0].charAt(0).toUpperCase()\n  }\n  \n  return (parts[0].charAt(0) + parts[parts.length - 1].charAt(0)).toUpperCase()\n}\n\n// Capitalize first letter\nexport function capitalize(str: string): string {\n  if (!str || str.trim() === '') return str\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase()\n}\n\n// Parse tags from comma-separated string\nexport function parseTags(tagsString: string): string[] {\n  if (!tagsString || tagsString.trim() === '') return []\n  \n  return tagsString\n    .split(',')\n    .map(tag => tag.trim())\n    .filter(tag => tag.length > 0)\n    .map(capitalize)\n}\n\n// Format currency\nexport function formatCurrency(amount: number, currency: string = 'USD'): string {\n  try {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency,\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 2,\n    }).format(amount)\n  } catch {\n    return `$${amount.toFixed(2)}`\n  }\n}\n\n// Get color based on status\nexport function getStatusColor(status: string): {\n  bg: string\n  text: string\n  border: string\n} {\n  const statusLower = status.toLowerCase()\n  \n  if (statusLower.includes('completed') || statusLower.includes('delivered') || statusLower.includes('success')) {\n    return {\n      bg: 'bg-green-100 dark:bg-green-900/30',\n      text: 'text-green-800 dark:text-green-400',\n      border: 'border-green-300 dark:border-green-800',\n    }\n  }\n  \n  if (statusLower.includes('pending') || statusLower.includes('progress') || statusLower.includes('scheduled')) {\n    return {\n      bg: 'bg-yellow-100 dark:bg-yellow-900/30',\n      text: 'text-yellow-800 dark:text-yellow-400',\n      border: 'border-yellow-300 dark:border-yellow-800',\n    }\n  }\n  \n  if (statusLower.includes('failed') || statusLower.includes('error') || statusLower.includes('cancelled')) {\n    return {\n      bg: 'bg-red-100 dark:bg-red-900/30',\n      text: 'text-red-800 dark:text-red-400',\n      border: 'border-red-300 dark:border-red-800',\n    }\n  }\n  \n  if (statusLower.includes('new') || statusLower.includes('active')) {\n    return {\n      bg: 'bg-blue-100 dark:bg-blue-900/30',\n      text: 'text-blue-800 dark:text-blue-400',\n      border: 'border-blue-300 dark:border-blue-800',\n    }\n  }\n  \n  // Default/muted\n  return {\n    bg: 'bg-gray-100 dark:bg-gray-800',\n    text: 'text-gray-800 dark:text-gray-300',\n    border: 'border-gray-300 dark:border-gray-700',\n  }\n}\n\n// Safe parse JSON\nexport function safeParseJSON<T>(jsonString: string, fallback: T): T {\n  try {\n    return JSON.parse(jsonString)\n  } catch {\n    return fallback\n  }\n}\n\n// Debounce function\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: NodeJS.Timeout\n  \n  return function executedFunction(...args: Parameters<T>) {\n    const later = () => {\n      clearTimeout(timeout)\n      func(...args)\n    }\n    \n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n  }\n}\n\n// Throttle function\nexport function throttle<T extends (...args: any[]) => any>(\n  func: T,\n  limit: number\n): (...args: Parameters<T>) => void {\n  let inThrottle: boolean\n  \n  return function executedFunction(...args: Parameters<T>) {\n    if (!inThrottle) {\n      func(...args)\n      inThrottle = true\n      setTimeout(() => (inThrottle = false), limit)\n    }\n  }\n}\n\n// Generate random ID\nexport function generateId(length: number = 8): string {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n  let result = ''\n  for (let i = 0; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length))\n  }\n  return result\n}\n\n// Check if value is empty\nexport function isEmpty(value: any): boolean {\n  if (value === null || value === undefined) return true\n  if (typeof value === 'string') return value.trim() === ''\n  if (Array.isArray(value)) return value.length === 0\n  if (typeof value === 'object') return Object.keys(value).length === 0\n  return false\n}\n\n// Deep clone object\nexport function deepClone<T>(obj: T): T {\n  if (obj === null || typeof obj !== 'object') return obj\n  if (Array.isArray(obj)) return obj.map(item => deepClone(item)) as T\n  const cloned: any = {}\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      cloned[key] = deepClone(obj[key])\n    }\n  }\n  return cloned\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,kPAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,6SAAI,GAAG;IAE9B,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 461, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8WAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,kPAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,6SAAI,GAAG;IAE9B,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 532, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/ui/tabs.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\n\nimport { cn } from '@/lib/utils'\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn('flex flex-col gap-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn('flex-1 outline-none', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8WAAC,4XAAkB;QACjB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8WAAC,4XAAkB;QACjB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8WAAC,+XAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8WAAC,+XAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 598, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 622, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\n\nexport function createClient() {\n  return createBrowserClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,8SAAmB;AAI5B"}},
    {"offset": {"line": 636, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/ui/scroll-area.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ScrollAreaPrimitive from '@radix-ui/react-scroll-area'\n\nimport { cn } from '@/lib/utils'\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn('relative', className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = 'vertical',\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        'flex touch-none p-px transition-colors select-none',\n        orientation === 'vertical' &&\n          'h-full w-2.5 border-l border-l-transparent',\n        orientation === 'horizontal' &&\n          'h-2.5 flex-col border-t border-t-transparent',\n        className,\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8WAAC,sYAAwB;QACvB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;0BAET,8WAAC,0YAA4B;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,8WAAC;;;;;0BACD,8WAAC,wYAA0B;;;;;;;;;;;AAGjC;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,8WAAC,qZAAuC;QACtC,aAAU;QACV,aAAa;QACb,WAAW,IAAA,kHAAE,EACX,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,8WAAC,iZAAmC;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB"}},
    {"offset": {"line": 706, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/contacts-manager.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Plus, Search, User, Phone, Trash2, Edit2, X, Check } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\n\nexport interface Contact {\n  id: string\n  name: string\n  phone: string\n  email?: string\n  company?: string\n  createdAt: Date\n}\n\ninterface ContactsManagerProps {\n  contacts: Contact[]\n  onAddContact: (contact: Omit<Contact, \"id\" | \"createdAt\">) => void\n  onUpdateContact: (id: string, contact: Partial<Contact>) => void\n  onDeleteContact: (id: string) => void\n  onSelectContact: (contact: Contact) => void\n  selectedContactId?: string\n}\n\nexport function ContactsManager({\n  contacts,\n  onAddContact,\n  onUpdateContact,\n  onDeleteContact,\n  onSelectContact,\n  selectedContactId,\n}: ContactsManagerProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const [isAdding, setIsAdding] = useState(false)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [newContact, setNewContact] = useState({ name: \"\", phone: \"\", email: \"\", company: \"\" })\n  const [editContact, setEditContact] = useState({ name: \"\", phone: \"\", email: \"\", company: \"\" })\n\n  const filteredContacts = contacts.filter(\n    (contact) =>\n      contact.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      contact.phone.includes(searchQuery) ||\n      contact.email?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      contact.company?.toLowerCase().includes(searchQuery.toLowerCase())\n  )\n\n  const handleAddContact = () => {\n    if (newContact.name && newContact.phone) {\n      onAddContact(newContact)\n      setNewContact({ name: \"\", phone: \"\", email: \"\", company: \"\" })\n      setIsAdding(false)\n    }\n  }\n\n  const handleStartEdit = (contact: Contact) => {\n    setEditingId(contact.id)\n    setEditContact({\n      name: contact.name,\n      phone: contact.phone,\n      email: contact.email || \"\",\n      company: contact.company || \"\",\n    })\n  }\n\n  const handleSaveEdit = (id: string) => {\n    if (editContact.name && editContact.phone) {\n      onUpdateContact(id, editContact)\n      setEditingId(null)\n    }\n  }\n\n  const formatPhone = (phone: string) => {\n    const cleaned = phone.replace(/\\D/g, \"\")\n    if (cleaned.length === 10) {\n      return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3, 6)}-${cleaned.slice(6)}`\n    }\n    return phone\n  }\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg\">Contacts</CardTitle>\n          <Button\n            size=\"sm\"\n            variant={isAdding ? \"secondary\" : \"default\"}\n            onClick={() => setIsAdding(!isAdding)}\n          >\n            {isAdding ? <X className=\"h-4 w-4\" /> : <Plus className=\"h-4 w-4\" />}\n          </Button>\n        </div>\n        <div className=\"relative mt-2\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search contacts...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-9\"\n          />\n        </div>\n      </CardHeader>\n      <CardContent className=\"flex-1 overflow-hidden\">\n        {/* Add Contact Form */}\n        {isAdding && (\n          <div className=\"bg-secondary/50 rounded-lg p-3 mb-3 space-y-2\">\n            <Input\n              placeholder=\"Name *\"\n              value={newContact.name}\n              onChange={(e) => setNewContact({ ...newContact, name: e.target.value })}\n            />\n            <Input\n              placeholder=\"Phone *\"\n              value={newContact.phone}\n              onChange={(e) => setNewContact({ ...newContact, phone: e.target.value })}\n            />\n            <Input\n              placeholder=\"Email\"\n              value={newContact.email}\n              onChange={(e) => setNewContact({ ...newContact, email: e.target.value })}\n            />\n            <Input\n              placeholder=\"Company\"\n              value={newContact.company}\n              onChange={(e) => setNewContact({ ...newContact, company: e.target.value })}\n            />\n            <div className=\"flex gap-2\">\n              <Button size=\"sm\" onClick={handleAddContact} disabled={!newContact.name || !newContact.phone}>\n                Save Contact\n              </Button>\n              <Button size=\"sm\" variant=\"outline\" onClick={() => setIsAdding(false)}>\n                Cancel\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {/* Contacts List */}\n        <ScrollArea className=\"h-[calc(100%-1rem)]\">\n          <div className=\"space-y-2 pr-3\">\n            {filteredContacts.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                {searchQuery ? \"No contacts found\" : \"No contacts yet\"}\n              </div>\n            ) : (\n              filteredContacts.map((contact) => (\n                <div\n                  key={contact.id}\n                  className={`group p-3 rounded-lg border transition-colors cursor-pointer ${\n                    selectedContactId === contact.id\n                      ? \"bg-primary/10 border-primary/30\"\n                      : \"bg-card hover:bg-secondary/50 border-border\"\n                  }`}\n                  onClick={() => editingId !== contact.id && onSelectContact(contact)}\n                >\n                  {editingId === contact.id ? (\n                    <div className=\"space-y-2\" onClick={(e) => e.stopPropagation()}>\n                      <Input\n                        value={editContact.name}\n                        onChange={(e) => setEditContact({ ...editContact, name: e.target.value })}\n                        placeholder=\"Name\"\n                      />\n                      <Input\n                        value={editContact.phone}\n                        onChange={(e) => setEditContact({ ...editContact, phone: e.target.value })}\n                        placeholder=\"Phone\"\n                      />\n                      <Input\n                        value={editContact.email}\n                        onChange={(e) => setEditContact({ ...editContact, email: e.target.value })}\n                        placeholder=\"Email\"\n                      />\n                      <Input\n                        value={editContact.company}\n                        onChange={(e) => setEditContact({ ...editContact, company: e.target.value })}\n                        placeholder=\"Company\"\n                      />\n                      <div className=\"flex gap-2\">\n                        <Button size=\"sm\" onClick={() => handleSaveEdit(contact.id)}>\n                          <Check className=\"h-4 w-4\" />\n                        </Button>\n                        <Button size=\"sm\" variant=\"outline\" onClick={() => setEditingId(null)}>\n                          <X className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex items-start gap-3\">\n                        <div className=\"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center shrink-0\">\n                          <User className=\"h-5 w-5 text-primary\" />\n                        </div>\n                        <div className=\"min-w-0\">\n                          <p className=\"font-medium truncate\">{contact.name}</p>\n                          <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                            <Phone className=\"h-3 w-3\" />\n                            <span>{formatPhone(contact.phone)}</span>\n                          </div>\n                          {contact.company && (\n                            <p className=\"text-xs text-muted-foreground truncate\">{contact.company}</p>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                        <Button\n                          size=\"icon\"\n                          variant=\"ghost\"\n                          className=\"h-8 w-8\"\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            handleStartEdit(contact)\n                          }}\n                        >\n                          <Edit2 className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          size=\"icon\"\n                          variant=\"ghost\"\n                          className=\"h-8 w-8 text-destructive hover:text-destructive\"\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            onDeleteContact(contact.id)\n                          }}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))\n            )}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  )\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1221, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/sync-chat.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport { Send, Users, Copy, Check, MessageSquare, RefreshCw, Phone, Smartphone } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { createClient } from \"@/lib/supabase/client\"\n\n// Import Twilio Sync\ndeclare global {\n  interface Window {\n    Twilio: any;\n  }\n}\n\ninterface Message {\n  id: string\n  sender_identity: string\n  message: string\n  created_at: string\n  session_id: string\n  metadata?: {\n    type?: string\n    direction?: string\n    twilio_sid?: string\n    to_number?: string\n  }\n  source?: 'chat' | 'sms'\n}\n\ninterface SyncChatProps {\n  sessionId: string\n  identity: string\n  phoneNumber?: string\n  onSessionChange?: (sessionId: string) => void\n}\n\nexport function SyncChat({ sessionId, identity, phoneNumber, onSessionChange }: SyncChatProps) {\n  const [messages, setMessages] = useState<Message[]>([])\n  const [newMessage, setNewMessage] = useState(\"\")\n  const [participants, setParticipants] = useState<string[]>([identity])\n  const [copied, setCopied] = useState(false)\n  const [editingSession, setEditingSession] = useState(false)\n  const [tempSessionId, setTempSessionId] = useState(sessionId)\n  const [isLoading, setIsLoading] = useState(true)\n  const [activeTab, setActiveTab] = useState<'chat' | 'sms'>('chat')\n  const [syncClient, setSyncClient] = useState<any>(null)\n  const [syncDocument, setSyncDocument] = useState<any>(null)\n  const [connectionStatus, setConnectionStatus] = useState<'connecting' | 'connected' | 'disconnected'>('connecting')\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  \n  const supabase = createClient()\n\n  // Auto-scroll to bottom\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  // Initialize Twilio Sync\n  useEffect(() => {\n    const initializeSync = async () => {\n      try {\n        // Get Twilio token from your API\n        const response = await fetch('/api/twilio/token', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ identity })\n        })\n        \n        if (!response.ok) throw new Error('Failed to get token')\n        \n        const { token } = await response.json()\n        \n        // Load Twilio SDK if not already loaded\n        if (!window.Twilio) {\n          const script = document.createElement('script')\n          script.src = 'https://sdk.twilio.com/js/sync/releases/3.0.0/twilio-sync.min.js'\n          script.onload = () => initializeSyncClient(token)\n          document.head.appendChild(script)\n        } else {\n          initializeSyncClient(token)\n        }\n      } catch (error) {\n        console.error('Failed to initialize Sync:', error)\n        setConnectionStatus('disconnected')\n      }\n    }\n\n    const initializeSyncClient = async (token: string) => {\n      try {\n        const client = new window.Twilio.Sync.Client(token)\n        setSyncClient(client)\n        \n        client.on('connectionStateChanged', (state: string) => {\n          setConnectionStatus(state === 'connected' ? 'connected' : 'disconnected')\n        })\n\n        // Open or create sync document for this session\n        const docName = `chat-${sessionId}`\n        const document = await client.document(docName)\n        setSyncDocument(document)\n        \n        // Load existing messages\n        const data = document.value || { messages: [], participants: [identity] }\n        setMessages(data.messages || [])\n        setParticipants(data.participants || [identity])\n        \n        // Listen for updates\n        document.on('updated', (event: any) => {\n          const { messages: newMessages, participants: newParticipants } = event.value\n          setMessages(newMessages || [])\n          setParticipants(newParticipants || [identity])\n        })\n        \n        setConnectionStatus('connected')\n        setIsLoading(false)\n        \n      } catch (error) {\n        console.error('Sync client error:', error)\n        setConnectionStatus('disconnected')\n        setIsLoading(false)\n      }\n    }\n\n    if (activeTab === 'chat') {\n      initializeSync()\n    } else {\n      fetchSMSMessages()\n    }\n\n    return () => {\n      if (syncClient) {\n        syncClient.shutdown()\n      }\n    }\n  }, [sessionId, identity, activeTab])\n\n  // Fetch SMS messages (fallback for SMS tab)\n  async function fetchSMSMessages() {\n    setIsLoading(true)\n    \n    if (phoneNumber) {\n      const formattedPhone = phoneNumber.startsWith('+') ? phoneNumber : `+${phoneNumber}`\n      \n      const { data: smsData, error: smsError } = await supabase\n        .from(\"interactions\")\n        .select(\"*\")\n        .or(`and(from_number.eq.${formattedPhone},type.eq.sms),and(to_number.eq.${formattedPhone},type.eq.sms)`)\n        .order(\"created_at\", { ascending: true })\n        .limit(100)\n      \n      if (!smsError && smsData) {\n        const smsMessages: Message[] = smsData.map(sms => ({\n          id: sms.id,\n          sender_identity: sms.from_number,\n          message: sms.body || \"\",\n          created_at: sms.created_at,\n          session_id: `sms-${sms.from_number.replace('+', '')}`,\n          metadata: {\n            type: 'sms',\n            direction: sms.direction,\n            twilio_sid: sms.twilio_sid,\n            to_number: sms.to_number\n          },\n          source: 'sms'\n        }))\n        \n        setMessages(smsMessages)\n        \n        const senders = [...new Set(smsData.map(m => m.from_number))]\n        const receivers = [...new Set(smsData.map(m => m.to_number))]\n        const allParticipants = [...new Set([...senders, ...receivers, identity])]\n        setParticipants(allParticipants)\n      }\n    }\n    \n    setIsLoading(false)\n  }\n\n  // Send message via Twilio Sync\n  const sendSyncMessage = async (message: string) => {\n    if (!syncDocument) return\n\n    const newMsg: Message = {\n      id: `${Date.now()}-${Math.random()}`,\n      sender_identity: identity,\n      message: message.trim(),\n      created_at: new Date().toISOString(),\n      session_id: sessionId,\n      source: 'chat'\n    }\n\n    try {\n      const currentData = syncDocument.value || { messages: [], participants: [identity] }\n      const updatedMessages = [...(currentData.messages || []), newMsg]\n      const updatedParticipants = [...new Set([...(currentData.participants || []), identity])]\n      \n      await syncDocument.set({\n        messages: updatedMessages,\n        participants: updatedParticipants\n      })\n      \n      setNewMessage(\"\")\n    } catch (error) {\n      console.error('Failed to send message:', error)\n    }\n  }\n\n  // Send SMS message\n  async function sendSMS(to: string, message: string) {\n    try {\n      const response = await fetch('/api/sms/send', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          to: to,\n          message: message,\n          from: phoneNumber\n        })\n      })\n      \n      if (response.ok) {\n        setNewMessage(\"\")\n        await fetchSMSMessages()\n      }\n    } catch (error) {\n      console.error(\"Error sending SMS:\", error)\n    }\n  }\n\n  const handleSend = async () => {\n    if (!newMessage.trim()) return\n\n    if (activeTab === 'sms' && phoneNumber) {\n      const recipient = participants.find(p => p !== identity && p.includes('+'))\n      if (recipient) {\n        await sendSMS(recipient, newMessage.trim())\n      } else {\n        alert(\"Please select a recipient for SMS\")\n      }\n    } else {\n      await sendSyncMessage(newMessage)\n    }\n  }\n\n  const copySessionLink = () => {\n    navigator.clipboard.writeText(`${window.location.origin}?session=${sessionId}&identity=guest`)\n    setCopied(true)\n    setTimeout(() => setCopied(false), 2000)\n  }\n\n  const handleSessionChange = () => {\n    if (tempSessionId && tempSessionId !== sessionId) {\n      onSessionChange?.(tempSessionId)\n    }\n    setEditingSession(false)\n  }\n\n  const formatTime = (dateStr: string) => {\n    return new Date(dateStr).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" })\n  }\n\n  const getConnectionBadge = () => {\n    const colors = {\n      connecting: 'bg-yellow-500',\n      connected: 'bg-green-500',\n      disconnected: 'bg-red-500'\n    }\n    \n    return (\n      <div className=\"flex items-center gap-1\">\n        <div className={`w-2 h-2 rounded-full ${colors[connectionStatus]}`} />\n        <span className=\"text-xs capitalize\">{connectionStatus}</span>\n      </div>\n    )\n  }\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3 shrink-0\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg flex items-center gap-2\">\n            <MessageSquare className=\"h-5 w-5\" />\n            Sync Chat\n          </CardTitle>\n          <div className=\"flex items-center gap-2\">\n            {activeTab === 'chat' && getConnectionBadge()}\n            <Badge variant=\"outline\" className=\"gap-1\">\n              <Users className=\"h-3 w-3\" />\n              {participants.length}\n            </Badge>\n            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\" onClick={activeTab === 'sms' ? fetchSMSMessages : undefined}>\n              <RefreshCw className={`h-4 w-4 ${isLoading ? \"animate-spin\" : \"\"}`} />\n            </Button>\n          </div>\n        </div>\n        \n        <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as 'chat' | 'sms')} className=\"mt-2\">\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"chat\">Sync Chat</TabsTrigger>\n            <TabsTrigger value=\"sms\" disabled={!phoneNumber}>\n              <Smartphone className=\"h-3 w-3 mr-2\" />\n              SMS\n            </TabsTrigger>\n          </TabsList>\n        </Tabs>\n        \n        <div className=\"flex items-center gap-2 mt-2\">\n          {editingSession ? (\n            <div className=\"flex items-center gap-2 flex-1\">\n              <Input\n                value={tempSessionId}\n                onChange={(e) => setTempSessionId(e.target.value)}\n                placeholder=\"Session ID\"\n                className=\"h-8 text-sm\"\n              />\n              <Button size=\"sm\" variant=\"default\" onClick={handleSessionChange}>\n                <Check className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          ) : (\n            <>\n              <div className=\"flex-1 text-sm\">\n                <span className=\"text-muted-foreground\">\n                  {activeTab === 'sms' ? 'Phone:' : 'Session:'}\n                </span>{\" \"}\n                <button\n                  onClick={() => setEditingSession(true)}\n                  className=\"font-mono text-primary hover:underline\"\n                >\n                  {activeTab === 'sms' ? phoneNumber || 'No phone' : sessionId}\n                </button>\n              </div>\n              <Button size=\"sm\" variant=\"outline\" onClick={copySessionLink} className=\"h-8 bg-transparent\">\n                {copied ? <Check className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\n              </Button>\n            </>\n          )}\n        </div>\n\n        <div className=\"flex flex-wrap gap-1 mt-2\">\n          {participants.map((p) => (\n            <Badge\n              key={p}\n              variant={p === identity ? \"default\" : \"secondary\"}\n              className=\"text-xs\"\n            >\n              {p.includes('+') ? <Phone className=\"h-3 w-3 mr-1\" /> : null}\n              {p}\n              {p === identity && \" (you)\"}\n            </Badge>\n          ))}\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"flex-1 flex flex-col min-h-0 p-4\">\n        <div className=\"flex-1 overflow-y-auto mb-3\" ref={scrollRef}>\n          <div className=\"space-y-3\">\n            {isLoading ? (\n              <div className=\"flex items-center justify-center py-8 text-muted-foreground text-sm\">\n                <RefreshCw className=\"h-4 w-4 animate-spin mr-2\" />\n                Loading messages...\n              </div>\n            ) : messages.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground text-sm\">\n                <MessageSquare className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                <p>No messages yet</p>\n                <p className=\"text-xs mt-1\">\n                  {activeTab === 'sms' ? 'Send an SMS to get started!' : 'Start the conversation!'}\n                </p>\n              </div>\n            ) : (\n              messages.map((message) => {\n                const isOwn = message.sender_identity === identity\n                const isSMS = message.metadata?.type === 'sms'\n                \n                return (\n                  <div\n                    key={`${message.id}-${message.created_at}`}\n                    className={`flex flex-col ${isOwn ? \"items-end\" : \"items-start\"}`}\n                  >\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      {isSMS && <Smartphone className=\"h-3 w-3\" />}\n                      <span className=\"text-xs text-muted-foreground\">\n                        {message.sender_identity}\n                      </span>\n                      <span className=\"text-xs text-muted-foreground\">\n                        {formatTime(message.created_at)}\n                      </span>\n                      {isSMS && (\n                        <Badge variant=\"outline\" className=\"text-xs h-4 px-1\">\n                          SMS\n                        </Badge>\n                      )}\n                    </div>\n                    <div\n                      className={`max-w-[80%] rounded-lg px-3 py-2 text-sm ${\n                        isOwn\n                          ? \"bg-primary text-primary-foreground\"\n                          : \"bg-secondary text-secondary-foreground\"\n                      }`}\n                    >\n                      {message.message}\n                    </div>\n                  </div>\n                )\n              })\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2 pt-3 border-t border-border shrink-0\">\n          <Input\n            placeholder={\n              activeTab === 'sms'\n                ? `Type SMS to ${participants.find(p => p !== identity && p.includes('+')) || 'recipient'}...`\n                : \"Type a message...\"\n            }\n            value={newMessage}\n            onChange={(e) => setNewMessage(e.target.value)}\n            onKeyDown={(e) => e.key === \"Enter\" && handleSend()}\n            className=\"flex-1\"\n            disabled={activeTab === 'chat' && connectionStatus !== 'connected'}\n          />\n          <Button \n            size=\"icon\" \n            onClick={handleSend} \n            disabled={!newMessage.trim() || (activeTab === 'chat' && connectionStatus !== 'connected')}\n          >\n            <Send className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1961, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8WAAC,2XAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8WAAC,4XAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8WAAC,4XAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,8WAAC,8XAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,kHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,8WAAC,2XAAoB;gBAAC,OAAO;0BAC3B,cAAA,8WAAC,+TAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,8WAAC,6XAAsB;kBACrB,cAAA,8WAAC,8XAAuB;YACtB,aAAU;YACV,WAAW,IAAA,kHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,8WAAC;;;;;8BACD,8WAAC,+XAAwB;oBACvB,WAAW,IAAA,kHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8WAAC;;;;;;;;;;;;;;;;AAIT;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8WAAC,4XAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,8WAAC,2XAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,8WAAC;gBAAK,WAAU;0BACd,cAAA,8WAAC,oYAA6B;8BAC5B,cAAA,8WAAC,ySAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,8WAAC,+XAAwB;0BAAE;;;;;;;;;;;;AAGjC;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,8WAAC,gYAAyB;QACxB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,8WAAC,qYAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8WAAC,yTAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8WAAC,uYAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8WAAC,+TAAe;YAAC,WAAU;;;;;;;;;;;AAGjC"}},
    {"offset": {"line": 2194, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/notes-leads-panel.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Plus, Calendar, User, Tag, Trash2, Clock, CheckCircle2, Circle, FileText, Phone, MessageSquare, PhoneMissed, Star, AlertCircle } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { \n  cn,\n  formatPhoneNumber, \n  formatTimeAgo, \n  formatDuration,\n  getStatusColor,\n  truncateText,\n  generateInitials\n} from \"@/lib/utils\"\n\ninterface Lead {\n  id: string\n  client_id: string\n  contact_id?: string\n  source: \"missed_call\" | \"website\" | \"referral\" | \"direct_call\" | \"sms\" | \"other\"\n  status: \"new\" | \"contacted\" | \"qualified\" | \"converted\" | \"lost\"\n  first_interaction_id?: string\n  last_interaction_at?: string\n  phone?: string\n  email?: string\n  notes: string\n  follow_up_required: boolean\n  priority: \"low\" | \"medium\" | \"high\"\n  converted_at?: string\n  created_at: string\n  updated_at: string\n  contacts?: {\n    name: string\n    phone: string\n  }\n  interactions?: {\n    type: string\n    direction: string\n    created_at: string\n  }[]\n  clients?: {\n    name: string\n  }\n}\n\ninterface Interaction {\n  id: string\n  type: \"call\" | \"sms\" | \"voicemail\"\n  direction: \"inbound\" | \"outbound\"\n  from_number: string\n  to_number: string\n  status: string\n  content?: string\n  is_auto_response?: boolean\n  is_missed_call?: boolean\n  created_at: string\n  contacts?: {\n    name: string\n    phone: string\n  }\n}\n\ninterface Note {\n  id: string\n  client_id?: string\n  contact_id?: string\n  lead_id?: string\n  content: string\n  type: \"lead_comment\" | \"follow_up\" | \"internal\" | \"customer_info\"\n  created_by?: string\n  created_at: string\n  contacts?: {\n    name: string\n    phone: string\n  }\n}\n\nexport function NotesLeadsPanel() {\n  const [leads, setLeads] = useState<Lead[]>([])\n  const [notes, setNotes] = useState<Note[]>([])\n  const [interactions, setInteractions] = useState<Interaction[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [activeTab, setActiveTab] = useState<\"all\" | \"new\" | \"contacted\" | \"qualified\" | \"converted\">(\"all\")\n  const [isAddingNote, setIsAddingNote] = useState(false)\n  const [selectedLeadId, setSelectedLeadId] = useState<string | null>(null)\n  const [newNote, setNewNote] = useState({\n    content: \"\",\n    type: \"lead_comment\" as Note[\"type\"],\n    lead_id: \"\",\n  })\n  const [leadFilter, setLeadFilter] = useState(\"all\")\n\n  const supabase = createClient()\n\n  async function fetchData() {\n    setIsLoading(true)\n    \n    try {\n      // Fetch leads with related data\n      const { data: leadsData, error: leadsError } = await supabase\n        .from(\"leads\")\n        .select(`\n          *,\n          contacts (name, phone),\n          clients (name),\n          interactions!first_interaction_id (type, direction, created_at)\n        `)\n        .order(\"created_at\", { ascending: false })\n        .limit(50)\n      \n      if (!leadsError && leadsData) {\n        setLeads(leadsData)\n      }\n\n      // Fetch notes\n      const { data: notesData, error: notesError } = await supabase\n        .from(\"notes\")\n        .select(`\n          *,\n          contacts (name, phone)\n        `)\n        .order(\"created_at\", { ascending: false })\n        .limit(50)\n      \n      if (!notesError && notesData) {\n        setNotes(notesData)\n      }\n\n      // Fetch recent interactions for context\n      const { data: interactionsData } = await supabase\n        .from(\"interactions\")\n        .select(`\n          *,\n          contacts (name, phone)\n        `)\n        .order(\"created_at\", { ascending: false })\n        .limit(20)\n      \n      if (interactionsData) {\n        setInteractions(interactionsData)\n      }\n\n    } catch (error) {\n      console.error(\"Error fetching data:\", error)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchData()\n\n    // Subscribe to real-time updates\n    const leadsChannel = supabase\n      .channel(\"leads-changes\")\n      .on(\n        \"postgres_changes\",\n        { event: \"*\", schema: \"public\", table: \"leads\" },\n        () => {\n          fetchData()\n        }\n      )\n      .subscribe()\n\n    const notesChannel = supabase\n      .channel(\"notes-changes\")\n      .on(\n        \"postgres_changes\",\n        { event: \"*\", schema: \"public\", table: \"notes\" },\n        () => {\n          fetchData()\n        }\n      )\n      .subscribe()\n\n    return () => {\n      supabase.removeChannel(leadsChannel)\n      supabase.removeChannel(notesChannel)\n    }\n  }, [])\n\n  const filteredLeads = leads.filter((lead) => {\n    if (activeTab === \"all\") return true\n    return lead.status === activeTab\n  }).filter((lead) => {\n    if (leadFilter === \"all\") return true\n    if (leadFilter === \"followup\") return lead.follow_up_required === true\n    if (leadFilter === \"high\") return lead.priority === \"high\"\n    return true\n  })\n\n  async function handleAddNote() {\n    if (!newNote.content.trim()) return\n\n    try {\n      const { error } = await supabase\n        .from(\"notes\")\n        .insert({\n          content: newNote.content,\n          type: newNote.type,\n          lead_id: selectedLeadId || undefined,\n          created_at: new Date().toISOString(),\n        })\n\n      if (error) throw error\n\n      // If note is added to a lead, update lead's last interaction\n      if (selectedLeadId) {\n        await supabase\n          .from(\"leads\")\n          .update({\n            last_interaction_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          })\n          .eq(\"id\", selectedLeadId)\n      }\n\n      setNewNote({ content: \"\", type: \"lead_comment\", lead_id: \"\" })\n      setSelectedLeadId(null)\n      setIsAddingNote(false)\n      fetchData()\n\n    } catch (error) {\n      console.error(\"Error adding note:\", error)\n    }\n  }\n\n  async function updateLeadStatus(leadId: string, status: Lead[\"status\"]) {\n    try {\n      const updates: Partial<Lead> = {\n        status,\n        updated_at: new Date().toISOString(),\n      }\n\n      if (status === \"converted\") {\n        updates.converted_at = new Date().toISOString()\n        updates.follow_up_required = false\n      }\n\n      const { error } = await supabase\n        .from(\"leads\")\n        .update(updates)\n        .eq(\"id\", leadId)\n\n      if (error) throw error\n\n      fetchData()\n\n    } catch (error) {\n      console.error(\"Error updating lead status:\", error)\n    }\n  }\n\n  async function updateLeadPriority(leadId: string, priority: Lead[\"priority\"]) {\n    try {\n      const { error } = await supabase\n        .from(\"leads\")\n        .update({\n          priority,\n          updated_at: new Date().toISOString(),\n        })\n        .eq(\"id\", leadId)\n\n      if (error) throw error\n\n      fetchData()\n\n    } catch (error) {\n      console.error(\"Error updating lead priority:\", error)\n    }\n  }\n\n  async function toggleFollowUpRequired(leadId: string, currentValue: boolean) {\n    try {\n      const { error } = await supabase\n        .from(\"leads\")\n        .update({\n          follow_up_required: !currentValue,\n          updated_at: new Date().toISOString(),\n        })\n        .eq(\"id\", leadId)\n\n      if (error) throw error\n\n      fetchData()\n\n    } catch (error) {\n      console.error(\"Error toggling follow-up:\", error)\n    }\n  }\n\n  function getStatusColor(status: Lead[\"status\"]) {\n    switch (status) {\n      case \"new\":\n        return \"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\"\n      case \"contacted\":\n        return \"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400\"\n      case \"qualified\":\n        return \"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400\"\n      case \"converted\":\n        return \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\"\n      case \"lost\":\n        return \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400\"\n      default:\n        return \"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300\"\n    }\n  }\n\n  function getPriorityColor(priority: Lead[\"priority\"]) {\n    switch (priority) {\n      case \"high\":\n        return \"bg-red-100 text-red-800 border-red-300 dark:bg-red-900/30 dark:text-red-400 dark:border-red-800\"\n      case \"medium\":\n        return \"bg-yellow-100 text-yellow-800 border-yellow-300 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-800\"\n      case \"low\":\n        return \"bg-green-100 text-green-800 border-green-300 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800\"\n      default:\n        return \"bg-gray-100 text-gray-800 border-gray-300 dark:bg-gray-800 dark:text-gray-300\"\n    }\n  }\n\n  function getSourceIcon(source: Lead[\"source\"]) {\n    switch (source) {\n      case \"missed_call\":\n        return <PhoneMissed className=\"h-3 w-3\" />\n      case \"direct_call\":\n        return <Phone className=\"h-3 w-3\" />\n      case \"sms\":\n        return <MessageSquare className=\"h-3 w-3\" />\n      case \"website\":\n        return <FileText className=\"h-3 w-3\" />\n      case \"referral\":\n        return <User className=\"h-3 w-3\" />\n      default:\n        return <Circle className=\"h-3 w-3\" />\n    }\n  }\n\n  function formatTime(dateStr?: string) {\n    if (!dateStr) return \"--\"\n    const date = new Date(dateStr)\n    const now = new Date()\n    const diffMs = now.getTime() - date.getTime()\n    const diffMins = Math.floor(diffMs / 60000)\n    \n    if (diffMins < 1) return \"Just now\"\n    if (diffMins < 60) return `${diffMins}m ago`\n    if (diffMins < 1440) return `${Math.floor(diffMins / 60)}h ago`\n    return date.toLocaleDateString(\"en-US\", { \n      month: \"short\", \n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\"\n    })\n  }\n\n  function getLeadNotes(leadId: string) {\n    return notes.filter(note => note.lead_id === leadId)\n  }\n\n  function getLeadInteractions(leadId: string) {\n    const lead = leads.find(l => l.id === leadId)\n    if (!lead?.contact_id) return []\n    \n    return interactions.filter(i => i.contact_id === lead.contact_id)\n  }\n\n  const stats = {\n    total: leads.length,\n    new: leads.filter(l => l.status === \"new\").length,\n    contacted: leads.filter(l => l.status === \"contacted\").length,\n    qualified: leads.filter(l => l.status === \"qualified\").length,\n    converted: leads.filter(l => l.status === \"converted\").length,\n    followup: leads.filter(l => l.follow_up_required).length,\n    high: leads.filter(l => l.priority === \"high\").length,\n  }\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg flex items-center gap-2\">\n            <FileText className=\"h-5 w-5 text-primary\" />\n            Leads & Notes\n          </CardTitle>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"text-xs flex items-center gap-3\">\n              <Badge variant=\"outline\" className=\"text-[10px]\">\n                Total: {stats.total}\n              </Badge>\n              <Badge variant=\"outline\" className=\"text-[10px] bg-blue-50 text-blue-700\">\n                New: {stats.new}\n              </Badge>\n              <Badge variant=\"outline\" className=\"text-[10px] bg-red-50 text-red-700\">\n                High: {stats.high}\n              </Badge>\n            </div>\n            <Button\n              size=\"sm\"\n              variant=\"default\"\n              onClick={() => setIsAddingNote(true)}\n            >\n              <Plus className=\"h-4 w-4\" />\n              Add Note\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"flex gap-2 mt-3\">\n          <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as typeof activeTab)} className=\"flex-1\">\n            <TabsList className=\"grid w-full grid-cols-5\">\n              <TabsTrigger value=\"all\" className=\"text-xs\">All</TabsTrigger>\n              <TabsTrigger value=\"new\" className=\"text-xs\">New</TabsTrigger>\n              <TabsTrigger value=\"contacted\" className=\"text-xs\">Contacted</TabsTrigger>\n              <TabsTrigger value=\"qualified\" className=\"text-xs\">Qualified</TabsTrigger>\n              <TabsTrigger value=\"converted\" className=\"text-xs\">Converted</TabsTrigger>\n            </TabsList>\n          </Tabs>\n          \n          <Select value={leadFilter} onValueChange={setLeadFilter}>\n            <SelectTrigger className=\"w-32 text-xs\">\n              <SelectValue placeholder=\"Filter\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Leads</SelectItem>\n              <SelectItem value=\"followup\">Needs Follow-up</SelectItem>\n              <SelectItem value=\"high\">High Priority</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"flex-1 overflow-hidden\">\n        {/* Add Note Form */}\n        {isAddingNote && (\n          <div className=\"bg-secondary/50 rounded-lg p-3 mb-3 space-y-2\">\n            <div className=\"flex gap-2\">\n              <Select\n                value={newNote.type}\n                onValueChange={(v) => setNewNote({ ...newNote, type: v as Note[\"type\"] })}\n              >\n                <SelectTrigger className=\"text-xs\">\n                  <SelectValue placeholder=\"Type\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"lead_comment\">Lead Comment</SelectItem>\n                  <SelectItem value=\"follow_up\">Follow-up Note</SelectItem>\n                  <SelectItem value=\"customer_info\">Customer Info</SelectItem>\n                  <SelectItem value=\"internal\">Internal Note</SelectItem>\n                </SelectContent>\n              </Select>\n              \n              <Select\n                value={selectedLeadId || \"\"}\n                onValueChange={(v) => {\n                  setSelectedLeadId(v)\n                  setNewNote({ ...newNote, lead_id: v })\n                }}\n              >\n                <SelectTrigger className=\"text-xs flex-1\">\n                  <SelectValue placeholder=\"Link to lead (optional)\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {leads.map(lead => (\n                    <SelectItem key={lead.id} value={lead.id}>\n                      {lead.contacts?.name || formatPhoneNumber(lead.phone || \"\")}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <Textarea\n              placeholder=\"Note content *\"\n              value={newNote.content}\n              onChange={(e) => setNewNote({ ...newNote, content: e.target.value })}\n              rows={3}\n              className=\"text-sm\"\n            />\n            \n            <div className=\"flex gap-2\">\n              <Button\n                size=\"sm\"\n                onClick={handleAddNote}\n                disabled={!newNote.content.trim()}\n                className=\"flex-1\"\n              >\n                Save Note\n              </Button>\n              <Button \n                size=\"sm\" \n                variant=\"outline\" \n                onClick={() => {\n                  setIsAddingNote(false)\n                  setNewNote({ content: \"\", type: \"lead_comment\", lead_id: \"\" })\n                  setSelectedLeadId(null)\n                }}\n              >\n                Cancel\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {/* Leads List */}\n        <ScrollArea className=\"h-[calc(100%-1rem)]\">\n          {isLoading ? (\n            <div className=\"flex items-center justify-center h-32 text-muted-foreground\">\n              <Circle className=\"h-5 w-5 animate-spin mr-2\" />\n              Loading leads...\n            </div>\n          ) : filteredLeads.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <FileText className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n              <p>No {activeTab === \"all\" ? \"leads\" : activeTab} found</p>\n              <p className=\"text-xs mt-1\">Leads from missed calls will appear here</p>\n            </div>\n          ) : (\n            <div className=\"space-y-3 pr-3\">\n              {filteredLeads.map((lead) => (\n                <div\n                  key={lead.id}\n                  className={`p-3 rounded-lg border bg-card transition-colors hover:bg-secondary/50 ${\n                    lead.follow_up_required ? \"border-l-4 border-l-orange-500\" : \"\"\n                  }`}\n                >\n                  <div className=\"flex items-start justify-between gap-3\">\n                    {/* Lead Info */}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2 flex-wrap mb-2\">\n                        <span className=\"font-medium text-sm truncate\">\n                          {lead.contacts?.name || formatPhoneNumber(lead.phone || \"Unknown\")}\n                        </span>\n                        \n                        <div className=\"flex items-center gap-1 flex-wrap\">\n                          <Badge \n                            variant=\"outline\" \n                            className={`text-[10px] px-2 py-0.5 ${getStatusColor(lead.status)}`}\n                          >\n                            {lead.status}\n                          </Badge>\n                          \n                          <Badge \n                            variant=\"outline\" \n                            className={`text-[10px] px-2 py-0.5 ${getPriorityColor(lead.priority)}`}\n                          >\n                            {lead.priority}\n                          </Badge>\n                          \n                          <Badge variant=\"outline\" className=\"text-[10px] px-2 py-0.5 flex items-center gap-1\">\n                            {getSourceIcon(lead.source)}\n                            {lead.source.replace(\"_\", \" \")}\n                          </Badge>\n                          \n                          {lead.follow_up_required && (\n                            <Badge variant=\"outline\" className=\"text-[10px] px-2 py-0.5 bg-orange-50 text-orange-700 border-orange-300\">\n                              <AlertCircle className=\"h-3 w-3 mr-1\" />\n                              Follow-up\n                            </Badge>\n                          )}\n                        </div>\n                      </div>\n                      \n                      {/* Notes Preview */}\n                      {lead.notes && (\n                        <p className=\"text-sm text-muted-foreground line-clamp-2 mb-2\">\n                          {lead.notes}\n                        </p>\n                      )}\n                      \n                      {/* Client & Contact Info */}\n                      <div className=\"flex items-center gap-4 text-xs text-muted-foreground flex-wrap\">\n                        {lead.clients?.name && (\n                          <span className=\"flex items-center gap-1\">\n                            <User className=\"h-3 w-3\" />\n                            {lead.clients.name}\n                          </span>\n                        )}\n                        \n                        {lead.phone && (\n                          <span className=\"flex items-center gap-1\">\n                            <Phone className=\"h-3 w-3\" />\n                            {formatPhoneNumber(lead.phone)}\n                          </span>\n                        )}\n                        \n                        {lead.last_interaction_at && (\n                          <span className=\"flex items-center gap-1\">\n                            <Clock className=\"h-3 w-3\" />\n                            Last: {formatTime(lead.last_interaction_at)}\n                          </span>\n                        )}\n                        \n                        <span className=\"flex items-center gap-1\">\n                          <Calendar className=\"h-3 w-3\" />\n                          Created: {formatTime(lead.created_at)}\n                        </span>\n                      </div>\n                      \n                      {/* Action Buttons */}\n                      <div className=\"flex items-center gap-2 mt-3\">\n                        <Select\n                          value={lead.status}\n                          onValueChange={(v) => updateLeadStatus(lead.id, v as Lead[\"status\"])}\n                        >\n                          <SelectTrigger className=\"h-7 text-xs w-32\">\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"new\">New</SelectItem>\n                            <SelectItem value=\"contacted\">Contacted</SelectItem>\n                            <SelectItem value=\"qualified\">Qualified</SelectItem>\n                            <SelectItem value=\"converted\">Converted</SelectItem>\n                            <SelectItem value=\"lost\">Lost</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        \n                        <Select\n                          value={lead.priority}\n                          onValueChange={(v) => updateLeadPriority(lead.id, v as Lead[\"priority\"])}\n                        >\n                          <SelectTrigger className=\"h-7 text-xs w-28\">\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"high\">High</SelectItem>\n                            <SelectItem value=\"medium\">Medium</SelectItem>\n                            <SelectItem value=\"low\">Low</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        \n                        <Button\n                          size=\"sm\"\n                          variant={lead.follow_up_required ? \"default\" : \"outline\"}\n                          className=\"h-7 text-xs\"\n                          onClick={() => toggleFollowUpRequired(lead.id, lead.follow_up_required)}\n                        >\n                          {lead.follow_up_required ? \" Follow-up\" : \"Add Follow-up\"}\n                        </Button>\n                        \n                        <Button\n                          size=\"icon\"\n                          variant=\"ghost\"\n                          className=\"h-7 w-7\"\n                          onClick={() => {\n                            setSelectedLeadId(lead.id)\n                            setIsAddingNote(true)\n                          }}\n                        >\n                          <Plus className=\"h-3 w-3\" />\n                        </Button>\n                      </div>\n                    </div>\n                    \n                    {/* Quick Stats */}\n                    <div className=\"text-right text-xs text-muted-foreground\">\n                      <div className=\"flex flex-col gap-1\">\n                        <div className=\"flex items-center gap-1 justify-end\">\n                          <span className=\"font-medium\">{getLeadNotes(lead.id).length}</span>\n                          <FileText className=\"h-3 w-3\" />\n                        </div>\n                        <div className=\"flex items-center gap-1 justify-end\">\n                          <span className=\"font-medium\">{getLeadInteractions(lead.id).length}</span>\n                          <Phone className=\"h-3 w-3\" />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Recent Notes for this Lead */}\n                  {getLeadNotes(lead.id).length > 0 && (\n                    <div className=\"mt-3 pt-3 border-t border-border\">\n                      <div className=\"space-y-2\">\n                        {getLeadNotes(lead.id).slice(0, 2).map((note) => (\n                          <div key={note.id} className=\"text-xs bg-secondary/30 rounded p-2\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <Badge variant=\"outline\" className=\"text-[9px]\">\n                                {note.type.replace(\"_\", \" \")}\n                              </Badge>\n                              <span className=\"text-muted-foreground\">\n                                {formatTime(note.created_at)}\n                              </span>\n                            </div>\n                            <p className=\"text-sm\">{note.content}</p>\n                          </div>\n                        ))}\n                        {getLeadNotes(lead.id).length > 2 && (\n                          <p className=\"text-xs text-muted-foreground text-center\">\n                            +{getLeadNotes(lead.id).length - 2} more notes\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3493, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/interactions-panel.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport {\n  Phone,\n  MessageSquare,\n  PhoneIncoming,\n  PhoneOutgoing,\n  PhoneMissed,\n  Clock,\n  User,\n  RefreshCw,\n  ArrowDownLeft,\n  ArrowUpRight,\n  Voicemail,\n  Mail,\n} from \"lucide-react\"\nimport { createClient } from \"@/lib/supabase/client\"\n\ninterface Interaction {\n  id: string\n  type: \"call\" | \"sms\" | \"voicemail\"\n  direction: \"inbound\" | \"outbound\"\n  from_number: string\n  to_number: string\n  status: string\n  duration_seconds?: number\n  content?: string\n  is_auto_response?: boolean\n  is_missed_call?: boolean\n  dial_call_status?: string\n  answered?: boolean\n  twilio_sid: string\n  contact_id?: string\n  client_id?: string\n  created_at: string\n  contacts?: {\n    name: string\n    phone: string\n  }\n  clients?: {\n    name: string\n  }\n}\n\ninterface ScheduledFollowup {\n  id: string\n  client_id: string\n  contact_id?: string\n  interaction_id?: string\n  scheduled_for: string\n  executed_at?: string\n  status: \"scheduled\" | \"sent\" | \"cancelled\" | \"failed\"\n  type: \"sms\" | \"email\" | \"call\"\n  template_name?: string\n  delay_minutes?: number\n  created_at: string\n  updated_at: string\n  contacts?: {\n    name: string\n    phone: string\n  }\n}\n\ninterface Lead {\n  id: string\n  client_id: string\n  contact_id?: string\n  source: string\n  status: \"new\" | \"contacted\" | \"qualified\" | \"converted\" | \"lost\"\n  phone?: string\n  follow_up_required: boolean\n  priority: \"low\" | \"medium\" | \"high\"\n  created_at: string\n  contacts?: {\n    name: string\n    phone: string\n  }\n}\n\nexport function InteractionsPanel() {\n  const [interactions, setInteractions] = useState<Interaction[]>([])\n  const [scheduledFollowups, setScheduledFollowups] = useState<ScheduledFollowup[]>([])\n  const [leads, setLeads] = useState<Lead[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [activeTab, setActiveTab] = useState(\"all\")\n\n  const supabase = createClient()\n\n  async function fetchData() {\n    setIsLoading(true)\n    \n    try {\n      // Fetch interactions with related data\n      const { data: interactionsData, error: interactionsError } = await supabase\n        .from(\"interactions\")\n        .select(`\n          *,\n          contacts (name, phone),\n          clients (name)\n        `)\n        .order(\"created_at\", { ascending: false })\n        .limit(100) // Increased limit for better overview\n    \n      if (!interactionsError && interactionsData) {\n        setInteractions(interactionsData)\n      } else {\n        console.error(\"Error fetching interactions:\", interactionsError)\n      }\n    \n      // Fetch scheduled follow-ups\n      const { data: followUpsData, error: followUpsError } = await supabase\n        .from(\"scheduled_followups\")\n        .select(`\n          *,\n          contacts (name, phone)\n        `)\n        .order(\"scheduled_for\", { ascending: true })\n        .limit(50)\n    \n      if (!followUpsError && followUpsData) {\n        setScheduledFollowups(followUpsData)\n      } else {\n        console.error(\"Error fetching follow-ups:\", followUpsError)\n      }\n    \n      // Fetch leads (new leads need follow-up)\n      const { data: leadsData, error: leadsError } = await supabase\n        .from(\"leads\")\n        .select(`\n          *,\n          contacts (name, phone)\n        `)\n        .eq(\"follow_up_required\", true)\n        .eq(\"status\", \"new\")\n        .order(\"created_at\", { ascending: false })\n        .limit(50)\n    \n      if (!leadsError && leadsData) {\n        setLeads(leadsData)\n      } else {\n        console.error(\"Error fetching leads:\", leadsError)\n      }\n      \n    } catch (error) {\n      console.error(\"Error in fetchData:\", error)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchData()\n\n    // Subscribe to real-time updates for all relevant tables\n    const interactionsChannel = supabase\n      .channel(\"interactions-changes\")\n      .on(\n        \"postgres_changes\",\n        { event: \"INSERT\", schema: \"public\", table: \"interactions\" },\n        () => {\n          fetchData()\n        }\n      )\n      .on(\n        \"postgres_changes\",\n        { event: \"UPDATE\", schema: \"public\", table: \"interactions\" },\n        () => {\n          fetchData()\n        }\n      )\n      .subscribe()\n\n    const followUpsChannel = supabase\n      .channel(\"followups-changes\")\n      .on(\n        \"postgres_changes\",\n        { event: \"*\", schema: \"public\", table: \"scheduled_followups\" },\n        () => {\n          fetchData()\n        }\n      )\n      .subscribe()\n\n    const leadsChannel = supabase\n      .channel(\"leads-changes\")\n      .on(\n        \"postgres_changes\",\n        { event: \"*\", schema: \"public\", table: \"leads\" },\n        () => {\n          fetchData()\n        }\n      )\n      .subscribe()\n\n    return () => {\n      supabase.removeChannel(interactionsChannel)\n      supabase.removeChannel(followUpsChannel)\n      supabase.removeChannel(leadsChannel)\n    }\n  }, [])\n\n  const filteredInteractions = interactions.filter((i) => {\n    if (activeTab === \"all\") return true\n    if (activeTab === \"calls\") return i.type === \"call\"\n    if (activeTab === \"sms\") return i.type === \"sms\"\n    if (activeTab === \"voicemail\") return i.type === \"voicemail\"\n    if (activeTab === \"missed\") return i.is_missed_call === true\n    if (activeTab === \"auto\") return i.is_auto_response === true\n    return true\n  })\n\n  function getStatusColor(status: string) {\n    switch (status) {\n      case \"completed\":\n      case \"delivered\":\n      case \"received\":\n      case \"answered\":\n      case \"sent\":\n        return \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\"\n      case \"ringing\":\n      case \"in-progress\":\n      case \"queued\":\n      case \"scheduled\":\n        return \"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\"\n      case \"no-answer\":\n      case \"busy\":\n      case \"failed\":\n      case \"undelivered\":\n        return \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400\"\n      default:\n        return \"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300\"\n    }\n  }\n\n  function getInteractionIcon(interaction: Interaction) {\n    if (interaction.type === \"sms\") {\n      if (interaction.is_auto_response) {\n        return <Mail className=\"h-4 w-4 text-orange-500\" />\n      }\n      return <MessageSquare className=\"h-4 w-4\" />\n    }\n    \n    if (interaction.type === \"voicemail\") {\n      return <Voicemail className=\"h-4 w-4 text-purple-500\" />\n    }\n    \n    // For calls\n    if (interaction.is_missed_call) {\n      return <PhoneMissed className=\"h-4 w-4 text-red-500\" />\n    }\n    \n    if (interaction.direction === \"inbound\") {\n      return <PhoneIncoming className=\"h-4 w-4 text-green-500\" />\n    }\n    \n    return <PhoneOutgoing className=\"h-4 w-4 text-blue-500\" />\n  }\n\n  function formatPhoneNumber(phone: string) {\n    // Format as (XXX) XXX-XXXX for US numbers\n    const cleaned = phone.replace(/\\D/g, '')\n    if (cleaned.length === 11 && cleaned.startsWith('1')) {\n      const match = cleaned.match(/^1(\\d{3})(\\d{3})(\\d{4})$/)\n      if (match) return `+1 (${match[1]}) ${match[2]}-${match[3]}`\n    }\n    if (cleaned.length === 10) {\n      const match = cleaned.match(/^(\\d{3})(\\d{3})(\\d{4})$/)\n      if (match) return `(${match[1]}) ${match[2]}-${match[3]}`\n    }\n    return phone\n  }\n\n  function formatDuration(seconds?: number) {\n    if (!seconds || seconds === 0) return \"--\"\n    if (seconds < 60) return `${seconds}s`\n    const mins = Math.floor(seconds / 60)\n    const secs = seconds % 60\n    if (mins < 60) return `${mins}m ${secs}s`\n    const hours = Math.floor(mins / 60)\n    const remainingMins = mins % 60\n    return `${hours}h ${remainingMins}m`\n  }\n\n  function formatTime(dateStr: string) {\n    const date = new Date(dateStr)\n    const now = new Date()\n    const diffMs = now.getTime() - date.getTime()\n    const diffMins = Math.floor(diffMs / 60000)\n    \n    if (diffMins < 1) return \"Just now\"\n    if (diffMins < 60) return `${diffMins}m ago`\n    if (diffMins < 1440) return `${Math.floor(diffMins / 60)}h ago`\n    return date.toLocaleDateString(\"en-US\", { \n      month: \"short\", \n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\"\n    })\n  }\n\n  function getInteractionSummary(interaction: Interaction) {\n    if (interaction.type === \"sms\" && interaction.content) {\n      return interaction.content.length > 50 \n        ? interaction.content.substring(0, 50) + \"...\" \n        : interaction.content\n    }\n    \n    if (interaction.type === \"call\") {\n      if (interaction.is_missed_call) return \"Missed call\"\n      if (interaction.answered) return `Answered (${formatDuration(interaction.duration_seconds)})`\n      return \"Call\"\n    }\n    \n    if (interaction.type === \"voicemail\") {\n      return `Voicemail (${formatDuration(interaction.duration_seconds)})`\n    }\n    \n    return `${interaction.type} ${interaction.direction}`\n  }\n\n  // Calculate stats\n  const stats = {\n    total: interactions.length,\n    missed: interactions.filter(i => i.is_missed_call).length,\n    auto: interactions.filter(i => i.is_auto_response).length,\n    pendingFollowups: scheduledFollowups.filter(f => f.status === \"scheduled\").length,\n    newLeads: leads.filter(l => l.status === \"new\").length,\n  }\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg flex items-center gap-2\">\n            <Phone className=\"h-5 w-5 text-primary\" />\n            Activity Dashboard\n          </CardTitle>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"text-xs flex items-center gap-3\">\n              <span className=\"flex items-center gap-1\">\n                <span className=\"w-2 h-2 bg-green-500 rounded-full\"></span>\n                {stats.total} total\n              </span>\n              <span className=\"flex items-center gap-1\">\n                <span className=\"w-2 h-2 bg-red-500 rounded-full\"></span>\n                {stats.missed} missed\n              </span>\n              <span className=\"flex items-center gap-1\">\n                <span className=\"w-2 h-2 bg-orange-500 rounded-full\"></span>\n                {stats.auto} auto\n              </span>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={fetchData}\n              disabled={isLoading}\n            >\n              <RefreshCw className={`h-4 w-4 ${isLoading ? \"animate-spin\" : \"\"}`} />\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent className=\"flex-1 flex flex-col pt-0\">\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"flex-1 flex flex-col\">\n          <TabsList className=\"grid w-full grid-cols-6 mb-3\">\n            <TabsTrigger value=\"all\" className=\"text-xs\">All</TabsTrigger>\n            <TabsTrigger value=\"calls\" className=\"text-xs\">Calls</TabsTrigger>\n            <TabsTrigger value=\"sms\" className=\"text-xs\">SMS</TabsTrigger>\n            <TabsTrigger value=\"voicemail\" className=\"text-xs\">Voicemail</TabsTrigger>\n            <TabsTrigger value=\"missed\" className=\"text-xs\">Missed</TabsTrigger>\n            <TabsTrigger value=\"auto\" className=\"text-xs\">Auto</TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value={activeTab} className=\"flex-1 mt-0\">\n            <ScrollArea className=\"h-[280px]\">\n              {isLoading ? (\n                <div className=\"flex items-center justify-center h-full text-muted-foreground\">\n                  <RefreshCw className=\"h-5 w-5 animate-spin mr-2\" />\n                  Loading activity...\n                </div>\n              ) : filteredInteractions.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center h-full text-muted-foreground text-sm\">\n                  <Phone className=\"h-8 w-8 mb-2 opacity-50\" />\n                  <p>No {activeTab === \"all\" ? \"activity\" : activeTab} yet</p>\n                  <p className=\"text-xs mt-1\">\n                    {activeTab === \"missed\" \n                      ? \"Missed calls will trigger automatic SMS follow-ups\" \n                      : \"All calls and messages will appear here\"}\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {filteredInteractions.map((interaction) => (\n                    <div\n                      key={interaction.id}\n                      className=\"p-3 rounded-lg bg-secondary/30 hover:bg-secondary/50 transition-colors cursor-pointer group\"\n                      onClick={() => {\n                        // You can add a detail view modal here\n                        console.log(\"Interaction details:\", interaction)\n                      }}\n                    >\n                      <div className=\"flex items-start justify-between gap-2\">\n                        <div className=\"flex items-start gap-3 flex-1 min-w-0\">\n                          <div className=\"p-2 rounded-full bg-secondary/50 group-hover:bg-secondary\">\n                            {getInteractionIcon(interaction)}\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <span className=\"font-medium text-sm truncate\">\n                                {interaction.contacts?.name || formatPhoneNumber(interaction.from_number)}\n                              </span>\n                              <div className=\"flex items-center gap-1\">\n                                {interaction.direction === \"inbound\" ? (\n                                  <ArrowDownLeft className=\"h-3 w-3 text-muted-foreground\" />\n                                ) : (\n                                  <ArrowUpRight className=\"h-3 w-3 text-muted-foreground\" />\n                                )}\n                                {interaction.is_auto_response && (\n                                  <Badge variant=\"outline\" className=\"text-[8px] px-1 py-0 h-4 bg-orange-500/10 text-orange-600 border-orange-300\">\n                                    Auto\n                                  </Badge>\n                                )}\n                              </div>\n                            </div>\n                            <p className=\"text-xs text-muted-foreground truncate\">\n                              {getInteractionSummary(interaction)}\n                            </p>\n                            <p className=\"text-xs text-muted-foreground mt-1\">\n                              {interaction.clients?.name && (\n                                <span className=\"inline-block mr-2 px-1.5 py-0.5 bg-primary/10 rounded text-primary\">\n                                  {interaction.clients.name}\n                                </span>\n                              )}\n                              {formatTime(interaction.created_at)}\n                            </p>\n                          </div>\n                        </div>\n                        <div className=\"text-right flex-shrink-0\">\n                          <Badge \n                            variant=\"outline\" \n                            className={`text-[10px] px-2 py-0.5 ${getStatusColor(interaction.status)}`}\n                          >\n                            {interaction.status.replace(\"-\", \" \")}\n                          </Badge>\n                          <div className=\"flex items-center gap-1 mt-1.5 text-xs text-muted-foreground justify-end\">\n                            <Clock className=\"h-3 w-3\" />\n                            {interaction.type === \"call\" || interaction.type === \"voicemail\" \n                              ? formatDuration(interaction.duration_seconds)\n                              : formatTime(interaction.created_at)}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </ScrollArea>\n          </TabsContent>\n        </Tabs>\n\n        {/* Follow-ups & Leads Section */}\n        {(scheduledFollowups.length > 0 || leads.length > 0) && (\n          <div className=\"mt-4 pt-4 border-t border-border\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              {/* Scheduled Follow-ups */}\n              <div>\n                <h4 className=\"text-sm font-medium mb-2 flex items-center gap-2\">\n                  <Clock className=\"h-4 w-4 text-blue-500\" />\n                  Scheduled Follow-ups\n                  {stats.pendingFollowups > 0 && (\n                    <Badge variant=\"outline\" className=\"ml-1 text-[10px] px-1.5 py-0 h-4\">\n                      {stats.pendingFollowups}\n                    </Badge>\n                  )}\n                </h4>\n                <ScrollArea className=\"h-[80px]\">\n                  {scheduledFollowups.filter(f => f.status === \"scheduled\").length === 0 ? (\n                    <p className=\"text-xs text-muted-foreground italic\">No scheduled follow-ups</p>\n                  ) : (\n                    <div className=\"space-y-1.5\">\n                      {scheduledFollowups\n                        .filter(f => f.status === \"scheduled\")\n                        .slice(0, 3)\n                        .map((followUp) => (\n                          <div\n                            key={followUp.id}\n                            className=\"p-2 rounded-md bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 text-xs\"\n                          >\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"truncate flex-1 mr-2\">\n                                {followUp.contacts?.name || formatPhoneNumber(followUp.contacts?.phone || \"Unknown\")}\n                              </span>\n                              <Badge variant=\"outline\" className=\"text-[9px] px-1.5 py-0 h-4 bg-blue-500/10 text-blue-600\">\n                                {followUp.type}\n                              </Badge>\n                            </div>\n                            <p className=\"text-muted-foreground text-[10px] mt-0.5\">\n                              {new Date(followUp.scheduled_for).toLocaleTimeString([], { \n                                hour: '2-digit', \n                                minute: '2-digit' \n                              })}\n                            </p>\n                          </div>\n                        ))}\n                    </div>\n                  )}\n                </ScrollArea>\n              </div>\n\n              {/* New Leads */}\n              <div>\n                <h4 className=\"text-sm font-medium mb-2 flex items-center gap-2\">\n                  <User className=\"h-4 w-4 text-green-500\" />\n                  New Leads\n                  {stats.newLeads > 0 && (\n                    <Badge variant=\"outline\" className=\"ml-1 text-[10px] px-1.5 py-0 h-4\">\n                      {stats.newLeads}\n                    </Badge>\n                  )}\n                </h4>\n                <ScrollArea className=\"h-[80px]\">\n                  {leads.length === 0 ? (\n                    <p className=\"text-xs text-muted-foreground italic\">No new leads</p>\n                  ) : (\n                    <div className=\"space-y-1.5\">\n                      {leads.slice(0, 3).map((lead) => (\n                        <div\n                          key={lead.id}\n                          className={`p-2 rounded-md border text-xs ${\n                            lead.priority === \"high\"\n                              ? \"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800\"\n                              : lead.priority === \"medium\"\n                              ? \"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800\"\n                              : \"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800\"\n                          }`}\n                        >\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"truncate flex-1 mr-2\">\n                              {lead.contacts?.name || formatPhoneNumber(lead.phone || \"Unknown\")}\n                            </span>\n                            <Badge \n                              variant=\"outline\" \n                              className={`text-[9px] px-1.5 py-0 h-4 ${\n                                lead.priority === \"high\"\n                                  ? \"bg-red-500/10 text-red-600\"\n                                  : lead.priority === \"medium\"\n                                  ? \"bg-yellow-500/10 text-yellow-600\"\n                                  : \"bg-green-500/10 text-green-600\"\n                              }`}\n                            >\n                              {lead.priority}\n                            </Badge>\n                          </div>\n                          <p className=\"text-muted-foreground text-[10px] mt-0.5 capitalize\">\n                            {lead.source.replace(\"_\", \" \")}\n                          </p>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </ScrollArea>\n              </div>\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4424, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/components/file-manager.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useCallback } from \"react\"\nimport { Upload, File, Trash2, Download, Eye, X, FileText, Image as ImageIcon, Video, Music, Archive } from \"lucide-react\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { toast } from \"sonner\"\n\ninterface LocalFile {\n  id: string\n  name: string\n  size: number\n  type: string\n  url: string\n  createdAt: Date\n}\n\nexport function FileManager() {\n  const [files, setFiles] = useState<LocalFile[]>([])\n  const [uploading, setUploading] = useState(false)\n  const [isDragging, setIsDragging] = useState(false)\n  const [selectedFile, setSelectedFile] = useState<LocalFile | null>(null)\n\n  // Upload file\n  const uploadFile = useCallback(async (file: File) => {\n    setUploading(true)\n    try {\n      const url = URL.createObjectURL(file)\n      \n      const newFile: LocalFile = {\n        id: Date.now().toString(),\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        url: url,\n        createdAt: new Date()\n      }\n\n      setFiles(prev => [newFile, ...prev])\n      toast.success(`File added: ${file.name}`)\n    } catch (error: any) {\n      toast.error(\"Upload failed\")\n    } finally {\n      setUploading(false)\n    }\n  }, [])\n\n  // Delete file\n  const deleteFile = useCallback((fileId: string) => {\n    setFiles(prev => {\n      const file = prev.find(f => f.id === fileId)\n      if (file) {\n        URL.revokeObjectURL(file.url)\n        toast.success(\"File removed\")\n      }\n      return prev.filter(f => f.id !== fileId)\n    })\n    if (selectedFile?.id === fileId) {\n      setSelectedFile(null)\n    }\n  }, [selectedFile])\n\n  // Download file\n  const downloadFile = useCallback((file: LocalFile) => {\n    const a = document.createElement('a')\n    a.href = file.url\n    a.download = file.name\n    a.click()\n    toast.success(\"Download started\")\n  }, [])\n\n  // Handle file drop\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragging(false)\n\n    const droppedFiles = Array.from(e.dataTransfer.files)\n    droppedFiles.forEach(file => uploadFile(file))\n  }, [uploadFile])\n\n  // Handle file input\n  const handleFileInput = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFiles = Array.from(e.target.files || [])\n    selectedFiles.forEach(file => uploadFile(file))\n    e.target.value = ''\n  }, [uploadFile])\n\n  // Get file icon\n  const getFileIcon = (type: string) => {\n    if (type.startsWith('image/')) return <ImageIcon className=\"h-4 w-4\" />\n    if (type.startsWith('video/')) return <Video className=\"h-4 w-4\" />\n    if (type.startsWith('audio/')) return <Music className=\"h-4 w-4\" />\n    if (type.includes('zip') || type.includes('rar')) return <Archive className=\"h-4 w-4\" />\n    return <FileText className=\"h-4 w-4\" />\n  }\n\n  // Format file size\n  const formatSize = (bytes: number) => {\n    if (bytes < 1024) return `${bytes} B`\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`\n  }\n\n  return (\n    <Card className=\"h-full flex flex-col overflow-hidden\">\n      <CardHeader className=\"flex-shrink-0 pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg font-semibold flex items-center gap-2\">\n            <Upload className=\"h-5 w-5\" />\n            File Manager\n          </CardTitle>\n          <div className=\"text-xs text-muted-foreground\">\n            {files.length} file{files.length !== 1 ? 's' : ''}\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"flex-1 flex flex-col gap-4 min-h-0 overflow-hidden p-4\">\n        {/* Dropzone */}\n        <div\n          onDragOver={(e) => {\n            e.preventDefault()\n            setIsDragging(true)\n          }}\n          onDragLeave={() => setIsDragging(false)}\n          onDrop={handleDrop}\n          className={`\n            relative border-2 border-dashed rounded-xl p-6 transition-all flex-shrink-0\n            ${isDragging \n              ? 'border-primary bg-primary/5 scale-[0.98]' \n              : 'border-border hover:border-primary/50 hover:bg-accent/5'\n            }\n            ${uploading ? 'opacity-50 pointer-events-none' : 'cursor-pointer'}\n          `}\n        >\n          <input\n            type=\"file\"\n            multiple\n            onChange={handleFileInput}\n            className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n            disabled={uploading}\n          />\n          \n          <div className=\"flex flex-col items-center justify-center gap-2 text-center\">\n            <div className={`\n              h-12 w-12 rounded-xl flex items-center justify-center transition-all\n              ${isDragging \n                ? 'bg-primary text-white scale-110' \n                : 'bg-primary/10 text-primary'\n              }\n            `}>\n              <Upload className=\"h-6 w-6\" />\n            </div>\n            <div>\n              <p className=\"font-semibold text-sm\">\n                {uploading ? \"Adding...\" : isDragging ? \"Drop files here\" : \"Drop or click to add files\"}\n              </p>\n              <p className=\"text-xs text-muted-foreground mt-0.5\">\n                Images, documents, videos & more\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Files List - Scrollable */}\n        <div className=\"flex-1 min-h-0 -mr-4\">\n          <ScrollArea className=\"h-full pr-4\">\n            <div className=\"space-y-2\">\n              {files.length === 0 ? (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  <File className=\"h-10 w-10 mx-auto mb-2 opacity-20\" />\n                  <p className=\"text-sm\">No files yet</p>\n                  <p className=\"text-xs mt-1\">Add files to get started</p>\n                </div>\n              ) : (\n                files.map((file) => (\n                  <div\n                    key={file.id}\n                    className={`\n                      group flex items-center gap-2 p-2.5 rounded-lg border transition-all\n                      ${selectedFile?.id === file.id\n                        ? 'border-primary bg-primary/5'\n                        : 'border-border hover:border-primary/50 hover:bg-accent/5'\n                      }\n                    `}\n                  >\n                    {/* File Icon */}\n                    <div className=\"flex-shrink-0 h-9 w-9 rounded-lg bg-primary/10 text-primary flex items-center justify-center\">\n                      {getFileIcon(file.type)}\n                    </div>\n\n                    {/* File Info */}\n                    <div className=\"flex-1 min-w-0 pr-2\">\n                      <p className=\"text-sm font-medium truncate\" title={file.name}>\n                        {file.name}\n                      </p>\n                      <div className=\"flex items-center gap-1.5 mt-0.5\">\n                        <p className=\"text-xs text-muted-foreground whitespace-nowrap\">\n                          {formatSize(file.size)}\n                        </p>\n                        <span className=\"text-xs text-muted-foreground\"></span>\n                        <p className=\"text-xs text-muted-foreground whitespace-nowrap\">\n                          {file.createdAt.toLocaleDateString()}\n                        </p>\n                      </div>\n                    </div>\n\n                    {/* Actions */}\n                    <div className=\"flex items-center gap-0.5 flex-shrink-0 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        className=\"h-7 w-7 p-0\"\n                        onClick={() => setSelectedFile(file)}\n                        title=\"Preview\"\n                      >\n                        <Eye className=\"h-3.5 w-3.5\" />\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        className=\"h-7 w-7 p-0\"\n                        onClick={() => downloadFile(file)}\n                        title=\"Download\"\n                      >\n                        <Download className=\"h-3.5 w-3.5\" />\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        className=\"h-7 w-7 p-0 text-destructive hover:text-destructive hover:bg-destructive/10\"\n                        onClick={() => deleteFile(file.id)}\n                        title=\"Delete\"\n                      >\n                        <Trash2 className=\"h-3.5 w-3.5\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          </ScrollArea>\n        </div>\n\n        {/* File count summary */}\n        {files.length > 0 && (\n          <div className=\"flex-shrink-0 text-xs text-muted-foreground text-center pt-2 border-t\">\n            Total: {formatSize(files.reduce((acc, f) => acc + f.size, 0))}\n          </div>\n        )}\n      </CardContent>\n\n      {/* File Preview Modal */}\n      {selectedFile && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setSelectedFile(null)}>\n          <div className=\"bg-background rounded-xl max-w-2xl w-full max-h-[80vh] overflow-hidden\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"flex items-center justify-between p-4 border-b\">\n              <div className=\"flex-1 min-w-0\">\n                <h3 className=\"font-semibold truncate\">{selectedFile.name}</h3>\n                <p className=\"text-xs text-muted-foreground\">\n                  {formatSize(selectedFile.size)}  {selectedFile.type}\n                </p>\n              </div>\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                onClick={() => setSelectedFile(null)}\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            </div>\n            <div className=\"p-4\">\n              {selectedFile.type.startsWith('image/') ? (\n                <img\n                  src={selectedFile.url}\n                  alt={selectedFile.name}\n                  className=\"w-full h-auto rounded-lg\"\n                />\n              ) : (\n                <div className=\"text-center py-12\">\n                  <File className=\"h-16 w-16 mx-auto mb-4 text-muted-foreground\" />\n                  <p className=\"text-sm text-muted-foreground mb-4\">Preview not available</p>\n                  <Button onClick={() => downloadFile(selectedFile)}>\n                    <Download className=\"h-4 w-4 mr-2\" />\n                    Download File\n                  </Button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </Card>\n  )\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5040, "column": 0}, "map": {"version":3,"sources":["file:///Users/midnight/Downloads/callaback-dashboard-main/app/page.tsx"],"sourcesContent":["\n\"use client\"\n\nimport { useState, useEffect, useCallback } from \"react\"\nimport {\n  Phone, Users, MessageSquare, FileText, Activity, Settings, Bell, Search,\n  ChevronRight, BarChart3, Calendar, Mail, Filter, Download, PhoneCall,\n  PhoneIncoming, PhoneOutgoing, PhoneMissed, Voicemail, Copy, Check,\n  LogOut, User, Clock, Mic, MicOff, Volume2, VolumeX, Delete, Keyboard,\n  Moon, Sun\n} from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { Separator } from \"@/components/ui/separator\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport {\n  formatPhoneNumber,\n  formatTimeAgo,\n  formatDuration,\n  getStatusColor,\n  truncateText,\n  generateInitials,\n  formatDateTime,\n  debounce,\n  cn\n} from \"@/lib/utils\"\nimport { toast, Toaster } from \"sonner\"\nimport { createClient } from '@/lib/supabase/client'\nimport { useRouter } from 'next/navigation'\nimport { ContactsManager } from \"@/components/contacts-manager\"\nimport { SyncChat } from \"@/components/sync-chat\"\nimport { NotesLeadsPanel } from \"@/components/notes-leads-panel\"\nimport { InteractionsPanel } from \"@/components/interactions-panel\"\nimport { FileManager } from \"@/components/file-manager\"\n\n// Initialize Supabase client\nconst supabase = createClient()\n\n// YOUR PHONE NUMBER\nconst YOUR_PHONE_NUMBER = \"18444073511\" // (844) 407-3511\n\n// Types\ninterface Interaction {\n  id: string\n  type: \"call\" | \"sms\" | \"voicemail\"\n  direction: \"inbound\" | \"outbound\"\n  from_number: string\n  to_number: string\n  status: string\n  duration_seconds?: number\n  content?: string\n  is_auto_response?: boolean\n  is_missed_call?: boolean\n  created_at: string\n  contacts?: {\n    name: string\n    phone: string\n  }\n  clients?: {\n    name: string\n  }\n}\n\ninterface Lead {\n  id: string\n  name: string\n  phone: string\n  email?: string\n  status: \"new\" | \"contacted\" | \"qualified\" | \"converted\" | \"lost\"\n  source: string\n  priority: \"low\" | \"medium\" | \"high\"\n  follow_up_required: boolean\n  notes?: string\n  created_at: string\n  last_contact?: string\n}\n\ninterface Contact {\n  id: string\n  name: string\n  phone: string\n  email?: string\n  company?: string\n  created_at: string\n  last_interaction?: string\n}\n\ninterface SystemMetric {\n  label: string\n  value: string | number\n  change?: number\n  icon: React.ReactNode\n  color: string\n}\n\nexport default function DashboardPage() {\n  const router = useRouter()\n  const [activeTab, setActiveTab] = useState(\"overview\")\n  const [isLoading, setIsLoading] = useState(true)\n  const [isAuthChecking, setIsAuthChecking] = useState(true)\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const [interactions, setInteractions] = useState<Interaction[]>([])\n  const [leads, setLeads] = useState<Lead[]>([])\n  const [contacts, setContacts] = useState<Contact[]>([])\n  const [metrics, setMetrics] = useState<SystemMetric[]>([])\n  const [timeRange, setTimeRange] = useState(\"today\")\n  const [user, setUser] = useState<any>(null)\n  const [notifications, setNotifications] = useState<any[]>([])\n  const [currentTime, setCurrentTime] = useState(new Date())\n  \n  // Phone Dialer State\n  const [phoneNumber, setPhoneNumber] = useState(\"\")\n  const [isCallActive, setIsCallActive] = useState(false)\n  const [callDuration, setCallDuration] = useState(0)\n  const [callInterval, setCallInterval] = useState<NodeJS.Timeout | null>(null)\n  const [isMuted, setIsMuted] = useState(false)\n  const [isSpeakerOn, setIsSpeakerOn] = useState(false)\n  const [dialPadValue, setDialPadValue] = useState(\"\")\n  const [selectedContactForCall, setSelectedContactForCall] = useState<Contact | null>(null)\n  const [smsMessage, setSmsMessage] = useState(\"\")\n  const [copiedNumber, setCopiedNumber] = useState<string | null>(null)\n  const [showFullDialer, setShowFullDialer] = useState(false)\n  const [hasShownWelcome, setHasShownWelcome] = useState(false)\n  const [isDarkMode, setIsDarkMode] = useState(false)\n\n  // Update clock every second\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date())\n    }, 1000)\n    return () => clearInterval(timer)\n  }, [])\n\n  // Apply dark mode\n  useEffect(() => {\n    if (isDarkMode) {\n      document.documentElement.classList.add('dark')\n    } else {\n      document.documentElement.classList.remove('dark')\n    }\n  }, [isDarkMode])\n\n  // Show welcome toast when user is set\n  useEffect(() => {\n    if (user && !hasShownWelcome) {\n      toast.success(`Welcome back, ${user?.user_metadata?.name || user?.email?.split('@')[0] || 'User'}!`)\n      setHasShownWelcome(true)\n    }\n  }, [user, hasShownWelcome])\n\n  // Check for existing session on mount - FIXED VERSION\n  useEffect(() => {\n    const checkUser = async () => {\n      setIsAuthChecking(true)\n      try {\n        const { data: { session }, error } = await supabase.auth.getSession()\n        \n        if (error) {\n          console.error(\"Session error:\", error)\n          throw error\n        }\n        \n        if (!session) {\n          console.log(\"No session found, redirecting to login\")\n          router.push('/login')\n          return\n        }\n        \n        console.log(\"Session found for user:\", session.user.email)\n        setUser(session.user)\n        await fetchDashboardData()\n        \n      } catch (error) {\n        console.error(\"Auth error:\", error)\n        router.push('/login')\n      } finally {\n        setIsAuthChecking(false)\n      }\n    }\n    \n    checkUser()\n\n    // Listen for auth changes\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      (event, session) => {\n        console.log(\"Auth state changed:\", event)\n        \n        if (event === 'SIGNED_OUT') {\n          console.log(\"User signed out, redirecting to login\")\n          setUser(null)\n          setInteractions([])\n          setLeads([])\n          setContacts([])\n          router.push('/login')\n        } else if (event === 'SIGNED_IN' && session) {\n          console.log(\"User signed in:\", session.user.email)\n          setUser(session.user)\n          fetchDashboardData()\n        }\n      }\n    )\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [router]) // Only depend on router\n\n  const dialPadButtons = [\n    { digit: \"1\", letters: \"\" },\n    { digit: \"2\", letters: \"ABC\" },\n    { digit: \"3\", letters: \"DEF\" },\n    { digit: \"4\", letters: \"GHI\" },\n    { digit: \"5\", letters: \"JKL\" },\n    { digit: \"6\", letters: \"MNO\" },\n    { digit: \"7\", letters: \"PQRS\" },\n    { digit: \"8\", letters: \"TUV\" },\n    { digit: \"9\", letters: \"WXYZ\" },\n    { digit: \"*\", letters: \"\" },\n    { digit: \"0\", letters: \"+\" },\n    { digit: \"#\", letters: \"\" },\n  ]\n\n  const fetchDashboardData = useCallback(async () => {\n    setIsLoading(true)\n    try {\n      // Fetch recent interactions\n      const { data: interactionsData } = await supabase\n        .from(\"interactions\")\n        .select(`\n          *,\n          contacts (name, phone),\n          clients (name)\n        `)\n        .order(\"created_at\", { ascending: false })\n        .limit(20)\n\n      if (interactionsData) setInteractions(interactionsData)\n\n      const { data: leadsData } = await supabase\n        .from(\"leads\")\n        .select(\"*\")\n        .order(\"created_at\", { ascending: false })\n        .limit(8)\n\n      if (leadsData) setLeads(leadsData)\n\n      const { data: contactsData } = await supabase\n        .from(\"contacts\")\n        .select(\"*\")\n        .order(\"created_at\", { ascending: false })\n        .limit(12)\n\n      if (contactsData) setContacts(contactsData)\n\n      calculateMetrics(interactionsData || [], leadsData || [])\n\n      setNotifications([\n        { id: 1, type: \"warning\", message: \"3 missed calls need follow-up\", time: \"5 min ago\" },\n        { id: 2, type: \"info\", message: \"New lead from website form\", time: \"15 min ago\" },\n        { id: 3, type: \"success\", message: \"Monthly report generated\", time: \"1 hour ago\" },\n        { id: 4, type: \"info\", message: `Your number ${formatPhoneNumber(YOUR_PHONE_NUMBER)} is active`, time: \"2 hours ago\" },\n      ])\n\n    } catch (error) {\n      console.error(\"Error fetching dashboard data:\", error)\n      toast.error(\"Failed to load dashboard data\")\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  const calculateMetrics = (interactions: Interaction[], leads: Lead[]) => {\n    const totalCalls = interactions.filter(i => i.type === \"call\").length\n    const missedCalls = interactions.filter(i => i.is_missed_call).length\n    const totalSMS = interactions.filter(i => i.type === \"sms\").length\n    const newLeads = leads.filter(l => l.status === \"new\").length\n    const answeredCalls = totalCalls - missedCalls\n    const answerRate = totalCalls > 0 ? Math.round((answeredCalls / totalCalls) * 100) : 0\n\n    setMetrics([\n      {\n        label: \"Total Calls\",\n        value: totalCalls,\n        change: 12,\n        icon: <Phone className=\"h-4 w-4\" />,\n        color: \"bg-blue-500\"\n      },\n      {\n        label: \"Answer Rate\",\n        value: `${answerRate}%`,\n        change: answerRate > 80 ? 5 : -3,\n        icon: <PhoneCall className=\"h-4 w-4\" />,\n        color: \"bg-green-500\"\n      },\n      {\n        label: \"SMS Sent\",\n        value: totalSMS,\n        change: 23,\n        icon: <MessageSquare className=\"h-4 w-4\" />,\n        color: \"bg-amber-500\"\n      },\n      {\n        label: \"Missed Calls\",\n        value: missedCalls,\n        change: -5,\n        icon: <PhoneMissed className=\"h-4 w-4\" />,\n        color: \"bg-red-500\"\n      },\n      {\n        label: \"New Leads\",\n        value: newLeads,\n        change: 8,\n        icon: <Users className=\"h-4 w-4\" />,\n        color: \"bg-purple-500\"\n      },\n      {\n        label: \"Voicemails\",\n        value: interactions.filter(i => i.type === \"voicemail\").length,\n        change: 2,\n        icon: <Voicemail className=\"h-4 w-4\" />,\n        color: \"bg-indigo-500\"\n      }\n    ])\n  }\n\n  const handleDigitPress = (digit: string) => {\n    if (dialPadValue.length < 20) {\n      setDialPadValue(prev => prev + digit)\n      setPhoneNumber(prev => prev + digit)\n    }\n  }\n\n  const handleDeleteDigit = () => {\n    setDialPadValue(prev => prev.slice(0, -1))\n    setPhoneNumber(prev => prev.slice(0, -1))\n  }\n\n  const handleCall = async () => {\n    if (!phoneNumber && !isCallActive) {\n      return\n    }\n    \n    if (isCallActive) {\n      // End call\n      setIsCallActive(false)\n      setIsMuted(false)\n      setIsSpeakerOn(false)\n      if (callInterval) {\n        clearInterval(callInterval)\n        setCallInterval(null)\n      }\n      setCallDuration(0)\n      setPhoneNumber(\"\")\n      setDialPadValue(\"\")\n      toast.success(\"Call ended\")\n    } else {\n      // Start call\n      setIsCallActive(true)\n      toast.success(`Calling ${formatPhoneNumber(phoneNumber)}...`)\n      \n      const interval = setInterval(() => {\n        setCallDuration(prev => prev + 1)\n      }, 1000)\n      setCallInterval(interval)\n      \n      // Log the call\n      try {\n        await supabase\n          .from(\"interactions\")\n          .insert({\n            type: \"call\",\n            direction: \"outbound\",\n            from_number: YOUR_PHONE_NUMBER,\n            to_number: phoneNumber,\n            status: \"ringing\",\n            is_missed_call: false,\n            created_at: new Date().toISOString(),\n            client_id: user?.id || null,\n            contact_id: selectedContactForCall?.id || null\n          })\n        \n        if (selectedContactForCall) {\n          await supabase\n            .from(\"contacts\")\n            .update({ last_interaction: new Date().toISOString() })\n            .eq(\"id\", selectedContactForCall.id)\n        }\n      } catch (error) {\n        console.error(\"Error logging call:\", error)\n      }\n    }\n  }\n\n  const handleSendSMS = async () => {\n    if (!phoneNumber || !smsMessage.trim()) {\n      toast.error(\"Please enter a phone number and message\")\n      return\n    }\n    \n    try {\n      // Log the SMS\n      await supabase\n        .from(\"interactions\")\n        .insert({\n          type: \"sms\",\n          direction: \"outbound\",\n          from_number: YOUR_PHONE_NUMBER,\n          to_number: phoneNumber,\n          status: \"sent\",\n          content: smsMessage,\n          is_auto_response: false,\n          created_at: new Date().toISOString(),\n          client_id: user?.id || null,\n          contact_id: selectedContactForCall?.id || null\n        })\n      \n      if (selectedContactForCall) {\n        await supabase\n          .from(\"contacts\")\n          .update({ last_interaction: new Date().toISOString() })\n          .eq(\"id\", selectedContactForCall.id)\n      }\n      \n      // Clear inputs\n      setSmsMessage(\"\")\n      toast.success(\"SMS sent successfully\")\n      \n      // Refresh data\n      fetchDashboardData()\n      \n    } catch (error) {\n      console.error(\"Error sending SMS:\", error)\n      toast.error(\"Failed to send SMS\")\n    }\n  }\n\n  const handleContactSelectForCall = (contact: Contact) => {\n    setPhoneNumber(contact.phone)\n    setDialPadValue(contact.phone.replace(/\\D/g, \"\"))\n    setSelectedContactForCall(contact)\n  }\n\n  const copyPhoneNumber = () => {\n    navigator.clipboard.writeText(formatPhoneNumber(YOUR_PHONE_NUMBER))\n    setCopiedNumber(YOUR_PHONE_NUMBER)\n    toast.success(\"Phone number copied\")\n    setTimeout(() => setCopiedNumber(null), 2000)\n  }\n\n  const handleSearch = debounce((query: string) => {\n    setSearchQuery(query)\n  }, 300)\n\n  // FIXED LOGOUT HANDLER\n  const handleLogout = async () => {\n    try {\n      console.log(\"Logging out...\")\n      const { error } = await supabase.auth.signOut()\n      \n      if (error) {\n        console.error(\"Logout error:\", error)\n        toast.error(\"Failed to logout. Please try again.\")\n        return\n      }\n      \n      console.log(\"Logout successful\")\n      toast.success(\"Logged out successfully\")\n      \n      // Clear local state\n      setUser(null)\n      setInteractions([])\n      setLeads([])\n      setContacts([])\n      setMetrics([])\n      \n      // The onAuthStateChange listener will handle the redirect\n      // But we can also explicitly redirect as a fallback\n      setTimeout(() => {\n        router.push('/login')\n      }, 100)\n      \n    } catch (error) {\n      console.error(\"Logout exception:\", error)\n      toast.error(\"An error occurred during logout\")\n    }\n  }\n\n  const filteredInteractions = interactions.filter(interaction =>\n    !searchQuery ||\n    interaction.from_number?.includes(searchQuery) ||\n    interaction.contacts?.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    interaction.type?.includes(searchQuery.toLowerCase())\n  )\n\n  const getStatusBadge = (status: string) => {\n    const colors = getStatusColor(status)\n    return (\n      <Badge\n        variant=\"outline\"\n        className={cn(\n          \"text-xs font-medium\",\n          colors.bg,\n          colors.text,\n          colors.border\n        )}\n      >\n        {status}\n      </Badge>\n    )\n  }\n\n  const getPriorityBadge = (priority: string) => {\n    const colorMap = {\n      high: \"bg-red-100 text-red-800 border-red-300\",\n      medium: \"bg-yellow-100 text-yellow-800 border-yellow-300\",\n      low: \"bg-green-100 text-green-800 border-green-300\"\n    }\n    \n    return (\n      <Badge\n        variant=\"outline\"\n        className={cn(\n          \"text-xs font-medium capitalize\",\n          colorMap[priority as keyof typeof colorMap] || \"bg-gray-100 text-gray-800\"\n        )}\n      >\n        {priority}\n      </Badge>\n    )\n  }\n\n  // IMPROVED LOADING STATE\n  if (isLoading || isAuthChecking) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50\">\n        <div className=\"text-center space-y-4\">\n          <div className=\"h-12 w-12 animate-spin rounded-full border-4 border-cyan-600 border-t-transparent mx-auto\" />\n          <p className=\"text-muted-foreground font-medium\">\n            {isAuthChecking ? \"Checking authentication...\" : \"Loading callaback API...\"}\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900\">\n      <Toaster position=\"top-center\" richColors />\n      \n      {/* Header with Phone Number */}\n      <header className=\"border-b border-slate-200 bg-white/80 backdrop-blur-xl sticky top-0 z-50 shadow-sm\">\n        <div className=\"max-w-[2000px] mx-auto px-4 sm:px-6 py-3\">\n          <div className=\"flex items-center justify-between gap-4\">\n            {/* Logo & Brand */}\n            <div className=\"flex items-center gap-3 min-w-0\">\n              <div className=\"h-11 w-11 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-md flex-shrink-0\">\n                <Phone className=\"h-6 w-6 text-white\" />\n              </div>\n              <div className=\"min-w-0\">\n                <h1 className=\"font-bold text-xl bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent\">\n                  callaback\n                </h1>\n                <div className=\"flex items-center gap-2\">\n                  <p className=\"text-sm font-semibold text-cyan-700\">{formatPhoneNumber(YOUR_PHONE_NUMBER)}</p>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-6 w-6\"\n                    onClick={copyPhoneNumber}\n                    title=\"Copy phone number\"\n                  >\n                    {copiedNumber === YOUR_PHONE_NUMBER ? (\n                      <Check className=\"h-3 w-3 text-green-500\" />\n                    ) : (\n                      <Copy className=\"h-3 w-3\" />\n                    )}\n                  </Button>\n                </div>\n              </div>\n            </div>\n            \n            {/* Enhanced Right Side - Clock & User */}\n            <div className=\"flex items-center gap-3\">\n              {/* Enhanced Live Clock */}\n              <div className=\"hidden md:flex items-center gap-3 px-4 py-2.5 bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl border-2 border-cyan-200 shadow-md\">\n                <div className=\"text-right\">\n                  <p className=\"text-xl font-mono font-bold tracking-tight text-slate-800 tabular-nums\">\n                    {currentTime.toLocaleTimeString(\"en-GB\", { hour: \"2-digit\", minute: \"2-digit\", second: \"2-digit\", hour12: false })}\n                  </p>\n                  <p className=\"text-xs text-slate-600 font-medium\">\n                    {currentTime.toLocaleDateString(\"en-GB\", { weekday: \"short\", day: \"2-digit\", month: \"short\", year: \"numeric\" })}\n                  </p>\n                </div>\n                <div className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\" />\n              </div>\n              \n              {/* User Profile */}\n              <div className=\"hidden lg:flex items-center gap-3 px-4 py-2 bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl border border-slate-200 shadow-sm\">\n                <div className=\"h-9 w-9 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold shadow-md\">\n                  {(user?.user_metadata?.name || user?.email)?.[0]?.toUpperCase() || 'U'}\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-sm font-semibold text-slate-800 truncate max-w-[150px]\">\n                    {user?.user_metadata?.name || user?.email?.split('@')[0]}\n                  </p>\n                  <p className=\"text-xs text-slate-600 truncate max-w-[150px]\">{user?.email}</p>\n                </div>\n              </div>\n              \n              {/* Theme Toggle */}\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setIsDarkMode(!isDarkMode)}\n                className=\"h-10 px-3 border-slate-200 hover:bg-slate-100\"\n                title={isDarkMode ? \"Switch to light mode\" : \"Switch to dark mode\"}\n              >\n                {isDarkMode ? (\n                  <Sun className=\"h-4 w-4 text-amber-500\" />\n                ) : (\n                  <Moon className=\"h-4 w-4 text-slate-600\" />\n                )}\n              </Button>\n              \n              {/* FIXED LOGOUT BUTTON */}\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleLogout}\n                className=\"h-10 px-4 border-red-200 hover:border-red-500 hover:bg-red-50 text-slate-700 hover:text-red-700\"\n              >\n                <LogOut className=\"h-4 w-4 mr-2\" />\n                Logout\n              </Button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-[2000px] mx-auto p-4 pb-8 w-full\">\n        {/* Search Bar */}\n        <div className=\"mb-4\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"Search calls, leads, contacts, messages...\"\n              className=\"pl-9 w-full\"\n              onChange={(e) => handleSearch(e.target.value)}\n            />\n          </div>\n        </div>\n\n        {/* Time Range Selector */}\n        <div className=\"mb-4\">\n          <Tabs value={timeRange} onValueChange={setTimeRange} className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-5\">\n              <TabsTrigger value=\"today\" className=\"text-xs\">Today</TabsTrigger>\n              <TabsTrigger value=\"yesterday\" className=\"text-xs\">Yesterday</TabsTrigger>\n              <TabsTrigger value=\"week\" className=\"text-xs\">Week</TabsTrigger>\n              <TabsTrigger value=\"month\" className=\"text-xs\">Month</TabsTrigger>\n              <TabsTrigger value=\"all\" className=\"text-xs\">All</TabsTrigger>\n            </TabsList>\n          </Tabs>\n        </div>\n\n        {/* Metrics Grid - Top Overview */}\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-4\">\n          {metrics.map((metric, index) => (\n            <Card key={index} className=\"hover:shadow transition-shadow\">\n              <CardContent className=\"p-3\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-xs font-medium text-muted-foreground\">{metric.label}</p>\n                    <div className=\"flex items-center gap-1.5 mt-0.5\">\n                      <p className=\"text-lg font-bold\">{metric.value}</p>\n                      {metric.change && (\n                        <span className={cn(\n                          \"text-[10px] font-medium\",\n                          metric.change > 0 ? \"text-green-600\" : \"text-red-600\"\n                        )}>\n                          {metric.change > 0 ? '+' : ''}{metric.change}%\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                  <div className={cn(\n                    \"h-8 w-8 rounded-full flex items-center justify-center\",\n                    metric.color,\n                    \"text-white\"\n                  )}>\n                    {metric.icon}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n\n        {/* Dashboard Grid - Optimized for better fit */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-3 min-h-[600px]\">\n          \n          {/* LEFT COLUMN - Phone Dialer + File Manager */}\n          <div className=\"lg:col-span-3 flex flex-col gap-3\">\n            {/* Phone Dialer - Compact or Full */}\n            <Card className=\"flex-shrink-0\">\n              <CardHeader className=\"pb-2 px-4 pt-4\">\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-sm flex items-center gap-2\">\n                    <Phone className=\"h-4 w-4 text-primary\" />\n                    Quick Dial\n                  </CardTitle>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-6 w-6\"\n                    onClick={() => setShowFullDialer(!showFullDialer)}\n                    title={showFullDialer ? \"Compact view\" : \"Expand dialer\"}\n                  >\n                    <Keyboard className=\"h-3 w-3\" />\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent className=\"p-4 pt-0\">\n                {/* Phone Number Display */}\n                <div className=\"mb-3\">\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <label className=\"text-xs font-medium\">Number</label>\n                    {phoneNumber && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={handleDeleteDigit}\n                        className=\"h-5 w-5\"\n                      >\n                        <Delete className=\"h-3 w-3\" />\n                      </Button>\n                    )}\n                  </div>\n                  <div className=\"text-lg font-mono text-center p-2 bg-secondary/30 rounded border\">\n                    {formatPhoneNumber(phoneNumber) || \"Enter number\"}\n                  </div>\n                </div>\n\n                {/* Dial Pad - Compact or Full */}\n                <div className={cn(\n                  \"grid grid-cols-3 gap-1.5 mb-3\",\n                  showFullDialer ? \"\" : \"\"\n                )}>\n                  {(showFullDialer ? dialPadButtons : dialPadButtons.slice(0, 6)).map(({ digit, letters }) => (\n                    <Button\n                      key={digit}\n                      variant=\"secondary\"\n                      className=\"h-8 flex flex-col items-center justify-center p-0 text-xs hover:bg-primary/10\"\n                      onClick={() => handleDigitPress(digit)}\n                      disabled={isCallActive}\n                    >\n                      <span className=\"font-bold\">{digit}</span>\n                      {letters && (\n                        <span className=\"text-[6px] text-muted-foreground\">\n                          {letters}\n                        </span>\n                      )}\n                    </Button>\n                  ))}\n                </div>\n\n                {/* Call Button */}\n                <div className=\"flex items-center justify-center gap-1.5\">\n                  <Button\n                    size=\"icon\"\n                    className={cn(\n                      \"h-10 w-10 rounded-full\",\n                      isCallActive\n                        ? \"bg-destructive hover:bg-destructive/90 animate-pulse\"\n                        : phoneNumber\n                        ? \"bg-primary hover:bg-primary/90\"\n                        : \"bg-primary/30 cursor-not-allowed\"\n                    )}\n                    onClick={handleCall}\n                    disabled={!phoneNumber && !isCallActive}\n                  >\n                    <Phone className=\"h-4 w-4\" />\n                  </Button>\n                  {isCallActive && (\n                    <>\n                      <Button\n                        variant=\"outline\"\n                        size=\"icon\"\n                        className={cn(\n                          \"h-8 w-8 rounded-full\",\n                          isMuted\n                            ? \"bg-destructive/20 border-destructive text-destructive\"\n                            : \"hover:bg-primary/10\"\n                        )}\n                        onClick={() => setIsMuted(!isMuted)}\n                      >\n                        {isMuted ? <MicOff className=\"h-3 w-3\" /> : <Mic className=\"h-3 w-3\" />}\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"icon\"\n                        className={cn(\n                          \"h-8 w-8 rounded-full\",\n                          isSpeakerOn\n                            ? \"bg-primary/20 border-primary text-primary\"\n                            : \"hover:bg-primary/10\"\n                        )}\n                        onClick={() => setIsSpeakerOn(!isSpeakerOn)}\n                      >\n                        {isSpeakerOn ? <Volume2 className=\"h-3 w-3\" /> : <VolumeX className=\"h-3 w-3\" />}\n                      </Button>\n                    </>\n                  )}\n                </div>\n                {isCallActive && (\n                  <div className=\"text-center mt-1.5\">\n                    <p className=\"text-xs font-mono\">{formatDuration(callDuration)}</p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n            \n            {/* SMS Quick Send */}\n            <Card className=\"flex-shrink-0\">\n              <CardHeader className=\"pb-2 px-4 pt-4\">\n                <CardTitle className=\"text-sm flex items-center gap-2\">\n                  <MessageSquare className=\"h-4 w-4 text-primary\" />\n                  Quick SMS\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-4 pt-0\">\n                <Textarea\n                  placeholder=\"Type SMS message...\"\n                  value={smsMessage}\n                  onChange={(e) => setSmsMessage(e.target.value)}\n                  rows={2}\n                  className=\"text-sm mb-2 resize-none\"\n                />\n                <Button\n                  size=\"sm\"\n                  className=\"w-full\"\n                  onClick={handleSendSMS}\n                  disabled={!phoneNumber || !smsMessage.trim()}\n                >\n                  <MessageSquare className=\"h-3 w-3 mr-2\" />\n                  Send SMS\n                </Button>\n              </CardContent>\n            </Card>\n            \n            {/* File Manager - Takes remaining space */}\n            <div className=\"h-[450px]\">\n              <FileManager />\n            </div>\n          </div>\n\n          {/* CENTER COLUMN - Contacts + Chat */}\n          <div className=\"lg:col-span-5 flex flex-col gap-3\">\n            {/* Contacts Manager - Fixed height */}\n            <div className=\"h-[380px]\">\n              <ContactsManager\n                contacts={contacts.map(c => ({\n                  id: c.id,\n                  name: c.name,\n                  phone: c.phone,\n                  email: c.email,\n                  company: c.company,\n                  createdAt: new Date(c.created_at)\n                }))}\n                onAddContact={async (contact) => {\n                  try {\n                    const { data, error } = await supabase\n                      .from(\"contacts\")\n                      .insert({\n                        name: contact.name,\n                        phone: contact.phone,\n                        email: contact.email,\n                        company: contact.company,\n                        created_at: new Date().toISOString()\n                      })\n                      .select()\n                      .single()\n                    \n                    if (error) throw error\n                    \n                    toast.success(\"Contact added successfully\")\n                    fetchDashboardData()\n                  } catch (error) {\n                    console.error(\"Error adding contact:\", error)\n                    toast.error(\"Failed to add contact\")\n                  }\n                }}\n                onUpdateContact={async (id, updates) => {\n                  try {\n                    const { error } = await supabase\n                      .from(\"contacts\")\n                      .update(updates)\n                      .eq(\"id\", id)\n                    \n                    if (error) throw error\n                    \n                    toast.success(\"Contact updated successfully\")\n                    fetchDashboardData()\n                  } catch (error) {\n                    console.error(\"Error updating contact:\", error)\n                    toast.error(\"Failed to update contact\")\n                  }\n                }}\n                onDeleteContact={async (id) => {\n                  try {\n                    const { error } = await supabase\n                      .from(\"contacts\")\n                      .delete()\n                      .eq(\"id\", id)\n                    \n                    if (error) throw error\n                    \n                    toast.success(\"Contact deleted successfully\")\n                    fetchDashboardData()\n                  } catch (error) {\n                    console.error(\"Error deleting contact:\", error)\n                    toast.error(\"Failed to delete contact\")\n                  }\n                }}\n                onSelectContact={handleContactSelectForCall}\n                selectedContactId={selectedContactForCall?.id}\n              />\n            </div>\n            \n            {/* Sync Chat - Takes remaining space */}\n            <div className=\"h-[650px]\">\n              <SyncChat\n                sessionId={user?.id || \"user-session\"}\n                identity={user?.email || \"User\"}\n                phoneNumber={YOUR_PHONE_NUMBER}\n                onSessionChange={() => {}}\n              />\n            </div>\n          </div>\n\n          {/* RIGHT COLUMN - Interactions + Notes */}\n          <div className=\"lg:col-span-4 flex flex-col gap-3\">\n            {/* Interactions Panel - Fixed height */}\n            <div className=\"h-[380px]\">\n              <InteractionsPanel />\n            </div>\n            \n            {/* Notes/Leads Panel - Takes remaining space */}\n            <div className=\"h-[650px]\">\n              <NotesLeadsPanel />\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}