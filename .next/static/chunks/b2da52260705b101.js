(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(29511),a=e.i(58138),s=e.i(79971),r=e.i(10965);let l=(0,r.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),n=(0,r.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),i=(0,r.default)("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),o=(0,r.default)("PhoneMissed",[["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["line",{x1:"16",x2:"22",y1:"2",y2:"8",key:"13zxdn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),c=(0,r.default)("Voicemail",[["circle",{cx:"6",cy:"12",r:"4",key:"1ehtga"}],["circle",{cx:"18",cy:"12",r:"4",key:"4vafl8"}],["line",{x1:"6",x2:"18",y1:"16",y2:"16",key:"pmt8us"}]]),d=(0,r.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),m=(0,r.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),u=(0,r.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),h=(0,r.default)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),x=(0,r.default)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),p=(0,r.default)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),f=(0,r.default)("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),g=(0,r.default)("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]),v=(0,r.default)("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),y=(0,r.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),b=(0,r.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),w=(0,r.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var j=e.i(67881),N=e.i(70065),k=e.i(23750),S=e.i(3025),C=e.i(94237),_=e.i(47163);let M=(0,C.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function E({className:e,variant:a,asChild:s=!1,...r}){let l=s?S.Slot:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,_.cn)(M({variant:a}),e),...r})}function T({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,_.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}var D=e.i(22036),z=e.i(20755),P=e.i(16755);let L=(0,r.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),R=(0,r.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var A=e.i(84244);let I=(0,r.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),B=(0,r.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var $=e.i(40034),H=e.i(80083),F=e.i(56055),U=e.i(22373),O=e.i(6462),q=e.i(61008),V=e.i(57722),W=e.i(78896),Y="ScrollArea",[X,G]=(0,F.createContextScope)(Y),[K,Z]=X(Y),J=a.forwardRef((e,s)=>{let{__scopeScrollArea:r,type:l="hover",dir:n,scrollHideDelay:i=600,...o}=e,[c,d]=a.useState(null),[m,u]=a.useState(null),[h,x]=a.useState(null),[p,f]=a.useState(null),[g,v]=a.useState(null),[y,b]=a.useState(0),[w,j]=a.useState(0),[N,k]=a.useState(!1),[S,C]=a.useState(!1),_=(0,U.useComposedRefs)(s,e=>d(e)),M=(0,q.useDirection)(n);return(0,t.jsx)(K,{scope:r,type:l,dir:M,scrollHideDelay:i,scrollArea:c,viewport:m,onViewportChange:u,content:h,onContentChange:x,scrollbarX:p,onScrollbarXChange:f,scrollbarXEnabled:N,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:b,onCornerHeightChange:j,children:(0,t.jsx)($.Primitive.div,{dir:M,...o,ref:_,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});J.displayName=Y;var Q="ScrollAreaViewport",ee=a.forwardRef((e,s)=>{let{__scopeScrollArea:r,children:l,nonce:n,...i}=e,o=Z(Q,r),c=a.useRef(null),d=(0,U.useComposedRefs)(s,c,o.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,t.jsx)($.Primitive.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});ee.displayName=Q;var et="ScrollAreaScrollbar",ea=a.forwardRef((e,s)=>{let{forceMount:r,...l}=e,n=Z(et,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,c="horizontal"===e.orientation;return a.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===n.type?(0,t.jsx)(es,{...l,ref:s,forceMount:r}):"scroll"===n.type?(0,t.jsx)(er,{...l,ref:s,forceMount:r}):"auto"===n.type?(0,t.jsx)(el,{...l,ref:s,forceMount:r}):"always"===n.type?(0,t.jsx)(en,{...l,ref:s}):null});ea.displayName=et;var es=a.forwardRef((e,s)=>{let{forceMount:r,...l}=e,n=Z(et,e.__scopeScrollArea),[i,o]=a.useState(!1);return a.useEffect(()=>{let e=n.scrollArea,t=0;if(e){let a=()=>{window.clearTimeout(t),o(!0)},s=()=>{t=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",a),e.addEventListener("pointerleave",s),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",a),e.removeEventListener("pointerleave",s)}}},[n.scrollArea,n.scrollHideDelay]),(0,t.jsx)(H.Presence,{present:r||i,children:(0,t.jsx)(el,{"data-state":i?"visible":"hidden",...l,ref:s})})}),er=a.forwardRef((e,s)=>{var r;let{forceMount:l,...n}=e,i=Z(et,e.__scopeScrollArea),o="horizontal"===e.orientation,c=ek(()=>m("SCROLL_END"),100),[d,m]=(r={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},a.useReducer((e,t)=>r[e][t]??e,"hidden"));return a.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>m("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,i.scrollHideDelay,m]),a.useEffect(()=>{let e=i.viewport,t=o?"scrollLeft":"scrollTop";if(e){let a=e[t],s=()=>{let s=e[t];a!==s&&(m("SCROLL"),c()),a=s};return e.addEventListener("scroll",s),()=>e.removeEventListener("scroll",s)}},[i.viewport,o,m,c]),(0,t.jsx)(H.Presence,{present:l||"hidden"!==d,children:(0,t.jsx)(en,{"data-state":"hidden"===d?"hidden":"visible",...n,ref:s,onPointerEnter:(0,W.composeEventHandlers)(e.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:(0,W.composeEventHandlers)(e.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),el=a.forwardRef((e,s)=>{let r=Z(et,e.__scopeScrollArea),{forceMount:l,...n}=e,[i,o]=a.useState(!1),c="horizontal"===e.orientation,d=ek(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;o(c?e:t)}},10);return eS(r.viewport,d),eS(r.content,d),(0,t.jsx)(H.Presence,{present:l||i,children:(0,t.jsx)(en,{"data-state":i?"visible":"hidden",...n,ref:s})})}),en=a.forwardRef((e,s)=>{let{orientation:r="vertical",...l}=e,n=Z(et,e.__scopeScrollArea),i=a.useRef(null),o=a.useRef(0),[c,d]=a.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=ey(c.viewport,c.content),u={...l,sizes:c,onSizesChange:d,hasThumb:!!(m>0&&m<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,a,s="ltr"){let r=eb(a),l=t||r/2,n=a.scrollbar.paddingStart+l,i=a.scrollbar.size-a.scrollbar.paddingEnd-(r-l),o=a.content-a.viewport;return ej([n,i],"ltr"===s?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===r?(0,t.jsx)(ei,{...u,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=ew(n.viewport.scrollLeft,c,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=h(e,n.dir))}}):"vertical"===r?(0,t.jsx)(eo,{...u,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=ew(n.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=h(e))}}):null}),ei=a.forwardRef((e,s)=>{let{sizes:r,onSizesChange:l,...n}=e,i=Z(et,e.__scopeScrollArea),[o,c]=a.useState(),d=a.useRef(null),m=(0,U.useComposedRefs)(s,d,i.onScrollbarXChange);return a.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(em,{"data-orientation":"horizontal",...n,ref:m,sizes:r,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":eb(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,a)=>{if(i.viewport){var s,r;let l=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(l),s=l,r=a,s>0&&s<r&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&l({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ev(o.paddingLeft),paddingEnd:ev(o.paddingRight)}})}})}),eo=a.forwardRef((e,s)=>{let{sizes:r,onSizesChange:l,...n}=e,i=Z(et,e.__scopeScrollArea),[o,c]=a.useState(),d=a.useRef(null),m=(0,U.useComposedRefs)(s,d,i.onScrollbarYChange);return a.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(em,{"data-orientation":"vertical",...n,ref:m,sizes:r,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":eb(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,a)=>{if(i.viewport){var s,r;let l=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(l),s=l,r=a,s>0&&s<r&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&l({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ev(o.paddingTop),paddingEnd:ev(o.paddingBottom)}})}})}),[ec,ed]=X(et),em=a.forwardRef((e,s)=>{let{__scopeScrollArea:r,sizes:l,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:m,onWheelScroll:u,onResize:h,...x}=e,p=Z(et,r),[f,g]=a.useState(null),v=(0,U.useComposedRefs)(s,e=>g(e)),y=a.useRef(null),b=a.useRef(""),w=p.viewport,j=l.content-l.viewport,N=(0,O.useCallbackRef)(u),k=(0,O.useCallbackRef)(d),S=ek(h,10);function C(e){y.current&&m({x:e.clientX-y.current.left,y:e.clientY-y.current.top})}return a.useEffect(()=>{let e=e=>{let t=e.target;f?.contains(t)&&N(e,j)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[w,f,j,N]),a.useEffect(k,[l,k]),eS(f,S),eS(p.content,S),(0,t.jsx)(ec,{scope:r,scrollbar:f,hasThumb:n,onThumbChange:(0,O.useCallbackRef)(i),onThumbPointerUp:(0,O.useCallbackRef)(o),onThumbPositionChange:k,onThumbPointerDown:(0,O.useCallbackRef)(c),children:(0,t.jsx)($.Primitive.div,{...x,ref:v,style:{position:"absolute",...x.style},onPointerDown:(0,W.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),y.current=f.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),C(e))}),onPointerMove:(0,W.composeEventHandlers)(e.onPointerMove,C),onPointerUp:(0,W.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),eu="ScrollAreaThumb",eh=a.forwardRef((e,a)=>{let{forceMount:s,...r}=e,l=ed(eu,e.__scopeScrollArea);return(0,t.jsx)(H.Presence,{present:s||l.hasThumb,children:(0,t.jsx)(ex,{ref:a,...r})})}),ex=a.forwardRef((e,s)=>{let{__scopeScrollArea:r,style:l,...n}=e,i=Z(eu,r),o=ed(eu,r),{onThumbPositionChange:c}=o,d=(0,U.useComposedRefs)(s,e=>o.onThumbChange(e)),m=a.useRef(void 0),u=ek(()=>{m.current&&(m.current(),m.current=void 0)},100);return a.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{u(),m.current||(m.current=eN(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,u,c]),(0,t.jsx)($.Primitive.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:(0,W.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),a=e.clientX-t.left,s=e.clientY-t.top;o.onThumbPointerDown({x:a,y:s})}),onPointerUp:(0,W.composeEventHandlers)(e.onPointerUp,o.onThumbPointerUp)})});eh.displayName=eu;var ep="ScrollAreaCorner",ef=a.forwardRef((e,a)=>{let s=Z(ep,e.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&r?(0,t.jsx)(eg,{...e,ref:a}):null});ef.displayName=ep;var eg=a.forwardRef((e,s)=>{let{__scopeScrollArea:r,...l}=e,n=Z(ep,r),[i,o]=a.useState(0),[c,d]=a.useState(0),m=!!(i&&c);return eS(n.scrollbarX,()=>{let e=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(e),d(e)}),eS(n.scrollbarY,()=>{let e=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(e),o(e)}),m?(0,t.jsx)($.Primitive.div,{...l,ref:s,style:{width:i,height:c,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null});function ev(e){return e?parseInt(e,10):0}function ey(e,t){let a=e/t;return isNaN(a)?0:a}function eb(e){let t=ey(e.viewport,e.content),a=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-a)*t,18)}function ew(e,t,a="ltr"){let s=eb(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-r,n=t.content-t.viewport,i=function(e,[t,a]){return Math.min(a,Math.max(t,e))}(e,"ltr"===a?[0,n]:[-1*n,0]);return ej([0,n],[0,l-s])(i)}function ej(e,t){return a=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(a-e[0])}}var eN=(e,t=()=>{})=>{let a={left:e.scrollLeft,top:e.scrollTop},s=0;return!function r(){let l={left:e.scrollLeft,top:e.scrollTop},n=a.left!==l.left,i=a.top!==l.top;(n||i)&&t(),a=l,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function ek(e,t){let s=(0,O.useCallbackRef)(e),r=a.useRef(0);return a.useEffect(()=>()=>window.clearTimeout(r.current),[]),a.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function eS(e,t){let a=(0,O.useCallbackRef)(t);(0,V.useLayoutEffect)(()=>{let t=0;if(e){let s=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(a)});return s.observe(e),()=>{window.cancelAnimationFrame(t),s.unobserve(e)}}},[e,a])}function eC({className:e,children:a,...s}){return(0,t.jsxs)(J,{"data-slot":"scroll-area",className:(0,_.cn)("relative",e),...s,children:[(0,t.jsx)(ee,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,t.jsx)(e_,{}),(0,t.jsx)(ef,{})]})}function e_({className:e,orientation:a="vertical",...s}){return(0,t.jsx)(ea,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,_.cn)("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",e),...s,children:(0,t.jsx)(eh,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function eM({contacts:e,onAddContact:r,onUpdateContact:l,onDeleteContact:n,onSelectContact:i,selectedContactId:o}){let[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[f,g]=(0,a.useState)({name:"",phone:"",email:"",company:""}),[v,y]=(0,a.useState)({name:"",phone:"",email:"",company:""}),b=e.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.phone.includes(c)||e.email?.toLowerCase().includes(c.toLowerCase())||e.company?.toLowerCase().includes(c.toLowerCase()));return(0,t.jsxs)(N.Card,{className:"h-full flex flex-col",children:[(0,t.jsxs)(N.CardHeader,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(N.CardTitle,{className:"text-lg",children:"Contacts"}),(0,t.jsx)(j.Button,{size:"sm",variant:u?"secondary":"default",onClick:()=>h(!u),children:u?(0,t.jsx)(w,{className:"h-4 w-4"}):(0,t.jsx)(L,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"relative mt-2",children:[(0,t.jsx)(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(k.Input,{placeholder:"Search contacts...",value:c,onChange:e=>d(e.target.value),className:"pl-9"})]})]}),(0,t.jsxs)(N.CardContent,{className:"flex-1 overflow-hidden",children:[u&&(0,t.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-3 mb-3 space-y-2",children:[(0,t.jsx)(k.Input,{placeholder:"Name *",value:f.name,onChange:e=>g({...f,name:e.target.value})}),(0,t.jsx)(k.Input,{placeholder:"Phone *",value:f.phone,onChange:e=>g({...f,phone:e.target.value})}),(0,t.jsx)(k.Input,{placeholder:"Email",value:f.email,onChange:e=>g({...f,email:e.target.value})}),(0,t.jsx)(k.Input,{placeholder:"Company",value:f.company,onChange:e=>g({...f,company:e.target.value})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(j.Button,{size:"sm",onClick:()=>{f.name&&f.phone&&(r(f),g({name:"",phone:"",email:"",company:""}),h(!1))},disabled:!f.name||!f.phone,children:"Save Contact"}),(0,t.jsx)(j.Button,{size:"sm",variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]}),(0,t.jsx)(eC,{className:"h-[calc(100%-1rem)]",children:(0,t.jsx)("div",{className:"space-y-2 pr-3",children:0===b.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:c?"No contacts found":"No contacts yet"}):b.map(e=>{var a;let r;return(0,t.jsx)("div",{className:`group p-3 rounded-lg border transition-colors cursor-pointer ${o===e.id?"bg-primary/10 border-primary/30":"bg-card hover:bg-secondary/50 border-border"}`,onClick:()=>x!==e.id&&i(e),children:x===e.id?(0,t.jsxs)("div",{className:"space-y-2",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)(k.Input,{value:v.name,onChange:e=>y({...v,name:e.target.value}),placeholder:"Name"}),(0,t.jsx)(k.Input,{value:v.phone,onChange:e=>y({...v,phone:e.target.value}),placeholder:"Phone"}),(0,t.jsx)(k.Input,{value:v.email,onChange:e=>y({...v,email:e.target.value}),placeholder:"Email"}),(0,t.jsx)(k.Input,{value:v.company,onChange:e=>y({...v,company:e.target.value}),placeholder:"Company"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(j.Button,{size:"sm",onClick:()=>{var t;return t=e.id,void(v.name&&v.phone&&(l(t,v),p(null)))},children:(0,t.jsx)(m,{className:"h-4 w-4"})}),(0,t.jsx)(j.Button,{size:"sm",variant:"outline",onClick:()=>p(null),children:(0,t.jsx)(w,{className:"h-4 w-4"})})]})]}):(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center shrink-0",children:(0,t.jsx)(A.User,{className:"h-5 w-5 text-primary"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,t.jsx)(s.Phone,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:10===(r=(a=e.phone).replace(/\D/g,"")).length?`(${r.slice(0,3)}) ${r.slice(3,6)}-${r.slice(6)}`:a})]}),e.company&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.company})]})]}),(0,t.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(j.Button,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:t=>{t.stopPropagation(),p(e.id),y({name:e.name,phone:e.phone,email:e.email||"",company:e.company||""})},children:(0,t.jsx)(B,{className:"h-4 w-4"})}),(0,t.jsx)(j.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:t=>{t.stopPropagation(),n(e.id)},children:(0,t.jsx)(I,{className:"h-4 w-4"})})]})]})},e.id)})})})]})]})}let eE=(0,r.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),eT=(0,r.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),eD=(0,r.default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var ez=e.i(27341);function eP({sessionId:e,identity:r,phoneNumber:i,onSessionChange:o}){let[c,u]=(0,a.useState)([]),[h,x]=(0,a.useState)(""),[p,f]=(0,a.useState)([r]),[g,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[w,S]=(0,a.useState)(e),[C,_]=(0,a.useState)(!0),[M,T]=(0,a.useState)("chat"),D=(0,a.useRef)(null),P=(0,a.useRef)(null),L=(0,z.createClient)();async function R(){if(_(!0),i){let e=i.startsWith("+")?i:`+${i}`,{data:t,error:a}=await L.from("interactions").select("*").or(`and(from_number.eq.${e},type.eq.sms),and(to_number.eq.${e},type.eq.sms)`).order("created_at",{ascending:!0}).limit(100);!a&&t&&(u(t.map(e=>({id:e.id,sender_identity:e.from_number,message:e.body||"",created_at:e.created_at,session_id:`sms-${e.from_number.replace("+","")}`,metadata:{type:"sms",direction:e.direction,twilio_sid:e.twilio_sid,to_number:e.to_number},source:"sms"}))),f([...new Set([...new Set(t.map(e=>e.from_number)),...new Set(t.map(e=>e.to_number)),r])]))}_(!1)}(0,a.useEffect)(()=>{P.current?.scrollIntoView({behavior:"smooth"})},[c]),(0,a.useEffect)(()=>{if("sms"===M)return void R();(async()=>{try{let{data:e,error:t}=await L.from("chat_messages").select("*").order("created_at",{ascending:!0});if(t)throw t;let a=e?.map(e=>({id:e.id,sender_identity:e.sender_identity,message:e.message,created_at:e.created_at,session_id:e.session_id,source:"chat"}))||[];u(a);let s=[...new Set(a.map(e=>e.sender_identity))];f([...s,r]),_(!1)}catch(e){console.error("Failed to load messages:",e),_(!1)}})();let e=L.channel("chat:broadcast").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},e=>{let t={id:e.new.id,sender_identity:e.new.sender_identity,message:e.new.message,created_at:e.new.created_at,session_id:e.new.session_id,source:"chat"};u(e=>[...e,t]),f(t=>{let a=new Set(t);return a.add(e.new.sender_identity),Array.from(a)})}).subscribe();return()=>{e.unsubscribe()}},[M]);let A=async t=>{if(t.trim())try{let{error:a}=await L.from("chat_messages").insert({sender_identity:r,message:t.trim(),session_id:e,created_at:new Date().toISOString()});if(a)throw a;x("")}catch(e){console.error("Failed to send message:",e)}};async function I(e,t){try{(await fetch("/api/sms/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e,message:t,from:i})})).ok&&(x(""),await R())}catch(e){console.error("Error sending SMS:",e)}}let B=async()=>{if(h.trim())if("sms"===M&&i){let e=p.find(e=>e!==r&&e.includes("+"));e?await I(e,h.trim()):alert("Please select a recipient for SMS")}else await A(h.trim())};return(0,t.jsxs)(N.Card,{className:"h-full flex flex-col",children:[(0,t.jsxs)(N.CardHeader,{className:"pb-3 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(N.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(n,{className:"h-5 w-5"}),"Sync Chat"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(E,{variant:"outline",className:"gap-1",children:[(0,t.jsx)(l,{className:"h-3 w-3"}),p.length]}),(0,t.jsx)(j.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>"sms"===M&&R(),disabled:C,children:(0,t.jsx)(eT,{className:`h-4 w-4 ${C?"animate-spin":""}`})})]})]}),(0,t.jsx)(ez.Tabs,{value:M,onValueChange:e=>T(e),className:"mt-2",children:(0,t.jsxs)(ez.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(ez.TabsTrigger,{value:"chat",children:"Sync Chat"}),(0,t.jsxs)(ez.TabsTrigger,{value:"sms",disabled:!i,children:[(0,t.jsx)(eD,{className:"h-3 w-3 mr-2"}),"SMS"]})]})}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-2",children:y?(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)(k.Input,{value:w,onChange:e=>S(e.target.value),placeholder:"Session ID",className:"h-8 text-sm"}),(0,t.jsx)(j.Button,{size:"sm",variant:"default",onClick:()=>{w&&w!==e&&o?.(w),b(!1)},children:(0,t.jsx)(m,{className:"h-4 w-4"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex-1 text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"sms"===M?"Phone:":"Session:"})," ",(0,t.jsx)("button",{onClick:()=>b(!0),className:"font-mono text-primary hover:underline",children:"sms"===M?i||"No phone":e})]}),(0,t.jsx)(j.Button,{size:"sm",variant:"outline",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}?session=${e}&identity=guest`),v(!0),setTimeout(()=>v(!1),2e3)},className:"h-8 bg-transparent",children:g?(0,t.jsx)(m,{className:"h-4 w-4"}):(0,t.jsx)(d,{className:"h-4 w-4"})})]})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:p.map(e=>(0,t.jsxs)(E,{variant:e===r?"default":"secondary",className:"text-xs",children:[e.includes("+")?(0,t.jsx)(s.Phone,{className:"h-3 w-3 mr-1"}):null,e,e===r&&" (you)"]},e))})]}),(0,t.jsxs)(N.CardContent,{className:"flex-1 flex flex-col min-h-0 p-4",children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-auto mb-3",ref:D,children:(0,t.jsxs)("div",{className:"space-y-3",children:[C?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8 text-muted-foreground text-sm",children:[(0,t.jsx)(eT,{className:"h-4 w-4 animate-spin mr-2"}),"Loading messages..."]}):0===c.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[(0,t.jsx)(n,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No messages yet"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"sms"===M?"Send an SMS to get started!":"Start the conversation!"})]}):c.map(e=>{let a=e.sender_identity===r,s=e.metadata?.type==="sms";return(0,t.jsxs)("div",{className:`flex flex-col ${a?"items-end":"items-start"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[s&&(0,t.jsx)(eD,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.sender_identity}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),s&&(0,t.jsx)(E,{variant:"outline",className:"text-xs h-4 px-1",children:"SMS"})]}),(0,t.jsx)("div",{className:`max-w-[80%] rounded-lg px-3 py-2 text-sm ${a?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:e.message})]},`${e.id}-${e.created_at}`)}),(0,t.jsx)("div",{ref:P})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-3 border-t border-border shrink-0",children:[(0,t.jsx)(k.Input,{placeholder:"sms"===M?`Type SMS to ${p.find(e=>e!==r&&e.includes("+"))||"recipient"}...`:"Type a message...",value:h,onChange:e=>x(e.target.value),onKeyDown:e=>"Enter"===e.key&&B(),className:"flex-1"}),(0,t.jsx)(j.Button,{size:"icon",onClick:B,disabled:!h.trim(),children:(0,t.jsx)(eE,{className:"h-4 w-4"})})]})]})]})}let eL=(0,r.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),eR=(0,r.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),eA=(0,r.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),eI=(0,r.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function eB(){let[e,s]=(0,a.useState)(""),[r,l]=(0,a.useState)(!1),[n,i]=(0,a.useState)(""),o=(0,a.useRef)(null);(0,z.createClient)(),(0,a.useEffect)(()=>{let e=localStorage.getItem("persistent_notes");if(e){s(e);let t=localStorage.getItem("notes_last_saved");t&&i(t)}},[]);let c=async()=>{l(!0);try{localStorage.setItem("persistent_notes",e);let t=new Date().toLocaleTimeString();localStorage.setItem("notes_last_saved",t),i(t),setTimeout(()=>l(!1),500)}catch(e){console.error("Failed to save notes:",e),l(!1)}};return(0,t.jsxs)(N.Card,{className:"h-full flex flex-col",children:[(0,t.jsx)(N.CardHeader,{className:"pb-3 shrink-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(N.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(eI,{className:"h-5 w-5"}),"Notes"]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:n&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Saved: ",n]})})]})}),(0,t.jsxs)(N.CardContent,{className:"flex-1 flex flex-col min-h-0 gap-3",children:[(0,t.jsx)(T,{value:e,onChange:e=>s(e.target.value),placeholder:"Write your notes here... They auto-save to your browser.",className:"flex-1 resize-none"}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsxs)(j.Button,{size:"sm",onClick:c,disabled:r,className:"gap-2",variant:r?"default":"outline",children:[(0,t.jsx)(eL,{className:"h-4 w-4"}),r?"Saving...":"Save"]}),(0,t.jsxs)(j.Button,{size:"sm",variant:"outline",onClick:()=>o.current?.click(),className:"gap-2",children:[(0,t.jsx)(eR,{className:"h-4 w-4"}),"Load .txt/.md"]}),(0,t.jsxs)(j.Button,{size:"sm",variant:"outline",onClick:()=>{let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",`notes-${new Date().toISOString().split("T")[0]}.txt`),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},disabled:!e.trim(),className:"gap-2",children:[(0,t.jsx)(eA,{className:"h-4 w-4"}),"Download"]}),(0,t.jsxs)(j.Button,{size:"sm",variant:"outline",onClick:()=>{confirm("Are you sure you want to clear all notes?")&&(s(""),localStorage.removeItem("persistent_notes"),localStorage.removeItem("notes_last_saved"),i(""))},disabled:!e.trim(),className:"gap-2 text-destructive hover:text-destructive",children:[(0,t.jsx)(I,{className:"h-4 w-4"}),"Clear"]})]}),(0,t.jsx)("input",{ref:o,type:"file",accept:".txt,.md",onChange:e=>{let t=e.target.files?.[0];if(!t)return;let a=new FileReader;a.onload=e=>{s(e.target?.result),c()},a.readAsText(t)},className:"hidden"})]})]})}let e$=(0,r.default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),eH=(0,r.default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),eF=(0,r.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function eU(){let[e,r]=(0,a.useState)(new Date),[l,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),p=(0,z.createClient)(),f=Array.from({length:32},(e,t)=>{let a=Math.floor(t/4)+9;return`${String(a).padStart(2,"0")}:${String(t%4*15).padStart(2,"0")}`});(0,a.useEffect)(()=>{g()},[]);let g=async()=>{try{let{data:e,error:t}=await p.from("callback_bookings").select("*").order("date",{ascending:!0});if(t)throw t;n(e||[])}catch(e){console.error("Error loading bookings:",e)}},v=(e,t)=>l.some(a=>a.date===e&&a.time===t),y=async()=>{if(!i||!c||!m.trim())return void D.toast.error("Please select date, time, and enter phone number");if(v(i,c))return void D.toast.error("This slot is already booked");x(!0);try{let{error:e}=await p.from("callback_bookings").insert({date:i,time:c,phone:m,created_at:new Date().toISOString()});if(e)throw e;D.toast.success(`Callback booked for ${i} at ${c}`),u(""),o(null),d(null),g()}catch(e){console.error("Error booking callback:",e),D.toast.error("Failed to book callback")}finally{x(!1)}},b=async e=>{try{let{error:t}=await p.from("callback_bookings").delete().eq("id",e);if(t)throw t;D.toast.success("Booking cancelled"),g()}catch(e){console.error("Error cancelling booking:",e),D.toast.error("Failed to cancel booking")}},S=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),C=new Date(e.getFullYear(),e.getMonth(),1).getDay(),_=Array.from({length:S},(e,t)=>t+1),M=Array.from({length:C},(e,t)=>t),E=e.toLocaleString("default",{month:"long",year:"numeric"});return(0,t.jsxs)(N.Card,{className:"h-full flex flex-col",children:[(0,t.jsx)(N.CardHeader,{className:"pb-3",children:(0,t.jsxs)(N.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(s.Phone,{className:"h-4 w-4 text-primary"}),"Callback Bookings"]})}),(0,t.jsxs)(N.CardContent,{className:"flex-1 flex flex-col gap-3 overflow-hidden",children:[(0,t.jsxs)("div",{className:"border rounded-lg p-3 bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)(j.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>r(new Date(e.getFullYear(),e.getMonth()-1)),children:(0,t.jsx)(e$,{className:"h-4 w-4"})}),(0,t.jsx)("p",{className:"text-sm font-semibold dark:text-slate-100",children:E}),(0,t.jsx)(j.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>r(new Date(e.getFullYear(),e.getMonth()+1)),children:(0,t.jsx)(eH,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{className:"text-center text-xs font-semibold text-slate-600 dark:text-slate-400 py-1",children:e},e))}),(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[M.map(e=>(0,t.jsx)("div",{className:"aspect-square"},`empty-${e}`)),_.map(a=>{let s,r,n=(s=e.getFullYear(),r=e.getMonth(),`${s}-${String(r+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`),c=l.filter(e=>e.date===n),d=i===n,m=new Date().toDateString()===new Date(e.getFullYear(),e.getMonth(),a).toDateString();return(0,t.jsxs)("button",{onClick:()=>o(n),className:`aspect-square text-xs font-medium rounded flex items-center justify-center relative transition-colors ${d?"bg-primary text-white":m?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 border border-blue-300 dark:border-blue-700":c.length>0?"bg-amber-100 dark:bg-amber-900 text-amber-900 dark:text-amber-100":"hover:bg-slate-200 dark:hover:bg-slate-700 dark:text-slate-300"}`,children:[a,c.length>0&&(0,t.jsx)("span",{className:"absolute bottom-0.5 right-0.5 h-1 w-1 bg-red-500 rounded-full"})]},a)})]})]}),i&&(0,t.jsxs)("div",{className:"border rounded-lg p-3 bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:[(0,t.jsx)("p",{className:"text-xs font-semibold mb-2 dark:text-slate-100",children:"Select Time"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1 max-h-[120px] overflow-y-auto",children:f.map(e=>{let a=v(i,e),s=c===e;return(0,t.jsx)("button",{onClick:()=>!a&&d(e),disabled:a,className:`text-xs py-1.5 rounded font-medium transition-colors ${s?"bg-primary text-white":a?"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-200 cursor-not-allowed opacity-50":"bg-white dark:bg-slate-700 border dark:border-slate-600 hover:bg-slate-100 dark:hover:bg-slate-600 dark:text-slate-300"}`,children:e},e)})})]}),i&&c&&(0,t.jsxs)("div",{className:"border rounded-lg p-3 bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:[(0,t.jsx)("label",{className:"text-xs font-semibold block mb-2 dark:text-slate-100",children:"Phone Number"}),(0,t.jsx)(k.Input,{type:"tel",placeholder:"(555) 123-4567",value:m,onChange:e=>u(e.target.value),className:"text-sm mb-2 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-100"}),(0,t.jsxs)(j.Button,{size:"sm",className:"w-full",onClick:y,disabled:h,children:[(0,t.jsx)(s.Phone,{className:"h-3 w-3 mr-2"}),h?"Booking...":"Book Callback"]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-3 bg-slate-50 dark:bg-slate-800 dark:border-slate-700 flex-1 overflow-y-auto",children:[(0,t.jsx)("p",{className:"text-xs font-semibold mb-2 dark:text-slate-100",children:"Upcoming"}),(0,t.jsxs)("div",{className:"space-y-2",children:[l.filter(e=>new Date(`${e.date}T${e.time}`)>new Date).slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs p-2 bg-white dark:bg-slate-700 rounded border dark:border-slate-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eF,{className:"h-3 w-3 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium dark:text-slate-100",children:[e.date," ",e.time]}),(0,t.jsx)("p",{className:"text-muted-foreground dark:text-slate-400",children:e.phone})]})]}),(0,t.jsx)(j.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>b(e.id),children:(0,t.jsx)(w,{className:"h-3 w-3"})})]},e.id)),0===l.filter(e=>new Date(`${e.date}T${e.time}`)>new Date).length&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground dark:text-slate-400 text-center py-4",children:"No upcoming bookings"})]})]})]})]})}let eO=(0,r.default)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var eq=e.i(68793);let eV=(0,r.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),eW=(0,r.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),eY=(0,r.default)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),eX=(0,r.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);function eG(){let[e,s]=(0,a.useState)([]),[r,l]=(0,a.useState)(!1),[n,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),d=(0,a.useCallback)(async e=>{l(!0);try{let t=URL.createObjectURL(e),a={id:Date.now().toString(),name:e.name,size:e.size,type:e.type,url:t,createdAt:new Date};s(e=>[a,...e]),D.toast.success(`File added: ${e.name}`)}catch(e){D.toast.error("Upload failed")}finally{l(!1)}},[]),m=(0,a.useCallback)(e=>{s(t=>{let a=t.find(t=>t.id===e);return a&&(URL.revokeObjectURL(a.url),D.toast.success("File removed")),t.filter(t=>t.id!==e)}),o?.id===e&&c(null)},[o]),u=(0,a.useCallback)(e=>{let t=document.createElement("a");t.href=e.url,t.download=e.name,t.click(),D.toast.success("Download started")},[]),h=(0,a.useCallback)(e=>{e.preventDefault(),i(!1),Array.from(e.dataTransfer.files).forEach(e=>d(e))},[d]),x=(0,a.useCallback)(e=>{Array.from(e.target.files||[]).forEach(e=>d(e)),e.target.value=""},[d]),p=e=>e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`;return(0,t.jsxs)(N.Card,{className:"h-full flex flex-col overflow-hidden",children:[(0,t.jsx)(N.CardHeader,{className:"flex-shrink-0 pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(N.CardTitle,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(eR,{className:"h-5 w-5"}),"File Manager"]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.length," file",1!==e.length?"s":""]})]})}),(0,t.jsxs)(N.CardContent,{className:"flex-1 flex flex-col gap-4 min-h-0 overflow-hidden p-4",children:[(0,t.jsxs)("div",{onDragOver:e=>{e.preventDefault(),i(!0)},onDragLeave:()=>i(!1),onDrop:h,className:`
            relative border-2 border-dashed rounded-xl p-6 transition-all flex-shrink-0
            ${n?"border-primary bg-primary/5 scale-[0.98]":"border-border hover:border-primary/50 hover:bg-accent/5"}
            ${r?"opacity-50 pointer-events-none":"cursor-pointer"}
          `,children:[(0,t.jsx)("input",{type:"file",multiple:!0,onChange:x,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:r}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 text-center",children:[(0,t.jsx)("div",{className:`
              h-12 w-12 rounded-xl flex items-center justify-center transition-all
              ${n?"bg-primary text-white scale-110":"bg-primary/10 text-primary"}
            `,children:(0,t.jsx)(eR,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:r?"Adding...":n?"Drop files here":"Drop or click to add files"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Images, documents, videos & more"})]})]})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 -mr-4",children:(0,t.jsx)(eC,{className:"h-full pr-4",children:(0,t.jsx)("div",{className:"space-y-2",children:0===e.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(eO,{className:"h-10 w-10 mx-auto mb-2 opacity-20"}),(0,t.jsx)("p",{className:"text-sm",children:"No files yet"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"Add files to get started"})]}):e.map(e=>{var a;return(0,t.jsxs)("div",{className:`
                      group flex items-center gap-2 p-2.5 rounded-lg border transition-all
                      ${o?.id===e.id?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/5"}
                    `,children:[(0,t.jsx)("div",{className:"flex-shrink-0 h-9 w-9 rounded-lg bg-primary/10 text-primary flex items-center justify-center",children:(a=e.type).startsWith("image/")?(0,t.jsx)(eV,{className:"h-4 w-4"}):a.startsWith("video/")?(0,t.jsx)(eW,{className:"h-4 w-4"}):a.startsWith("audio/")?(0,t.jsx)(eY,{className:"h-4 w-4"}):a.includes("zip")||a.includes("rar")?(0,t.jsx)(eX,{className:"h-4 w-4"}):(0,t.jsx)(eI,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground whitespace-nowrap",children:p(e.size)}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"•"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground whitespace-nowrap",children:e.createdAt.toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 flex-shrink-0 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(j.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:()=>c(e),title:"Preview",children:(0,t.jsx)(eq.Eye,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(j.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:()=>u(e),title:"Download",children:(0,t.jsx)(eA,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(j.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>m(e.id),title:"Delete",children:(0,t.jsx)(I,{className:"h-3.5 w-3.5"})})]})]},e.id)})})})}),e.length>0&&(0,t.jsxs)("div",{className:"flex-shrink-0 text-xs text-muted-foreground text-center pt-2 border-t",children:["Total: ",p(e.reduce((e,t)=>e+t.size,0))]})]}),o&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>c(null),children:(0,t.jsxs)("div",{className:"bg-background rounded-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold truncate",children:o.name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[p(o.size)," • ",o.type]})]}),(0,t.jsx)(j.Button,{size:"sm",variant:"ghost",onClick:()=>c(null),children:(0,t.jsx)(w,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"p-4",children:o.type.startsWith("image/")?(0,t.jsx)("img",{src:o.url,alt:o.name,className:"w-full h-auto rounded-lg"}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(eO,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Preview not available"}),(0,t.jsxs)(j.Button,{onClick:()=>u(o),children:[(0,t.jsx)(eA,{className:"h-4 w-4 mr-2"}),"Download File"]})]})})]})})]})}let eK=(0,z.createClient)(),eZ="18444073511";function eJ(){let e=(0,P.useRouter)(),[r,S]=(0,a.useState)("overview"),[C,M]=(0,a.useState)(!0),[E,z]=(0,a.useState)(!0),[L,R]=(0,a.useState)(""),[A,I]=(0,a.useState)([]),[B,$]=(0,a.useState)([]),[H,F]=(0,a.useState)([]),[U,O]=(0,a.useState)([]),[q,V]=(0,a.useState)("today"),[W,Y]=(0,a.useState)(null),[X,G]=(0,a.useState)([]),[K,Z]=(0,a.useState)(new Date),[J,Q]=(0,a.useState)(""),[ee,et]=(0,a.useState)(!1),[ea,es]=(0,a.useState)(0),[er,el]=(0,a.useState)(null),[en,ei]=(0,a.useState)(!1),[eo,ec]=(0,a.useState)(!1),[ed,em]=(0,a.useState)(""),[eu,eh]=(0,a.useState)(null),[ex,ep]=(0,a.useState)(""),[ef,eg]=(0,a.useState)(null),[ev,ey]=(0,a.useState)(!1),[eb,ew]=(0,a.useState)(!1),[ej,eN]=(0,a.useState)(!1),[ek,eS]=(0,a.useState)(""),[eC,e_]=(0,a.useState)(!1),[eE,eT]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=setInterval(()=>{Z(new Date)},1e3);return()=>clearInterval(e)},[]),(0,a.useEffect)(()=>{let e=localStorage.getItem("dark_mode");null!==e&&eN(JSON.parse(e))},[]),(0,a.useEffect)(()=>{ej?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("dark_mode",JSON.stringify(ej))},[ej]),(0,a.useEffect)(()=>{W&&!eb&&(D.toast.success(`Welcome back, ${W?.user_metadata?.name||W?.email?.split("@")[0]||"User"}!`),ew(!0))},[W,eb]),(0,a.useEffect)(()=>{(async()=>{z(!0);try{let{data:{session:t},error:a}=await eK.auth.getSession();if(a)throw console.error("Session error:",a),a;if(!t){console.log("No session found, redirecting to login"),e.push("/login");return}console.log("Session found for user:",t.user.email),Y(t.user),await ez()}catch(t){console.error("Auth error:",t),e.push("/login")}finally{z(!1)}})();let{data:{subscription:t}}=eK.auth.onAuthStateChange((t,a)=>{console.log("Auth state changed:",t),"SIGNED_OUT"===t?(console.log("User signed out, redirecting to login"),Y(null),I([]),$([]),F([]),e.push("/login")):"SIGNED_IN"===t&&a&&(console.log("User signed in:",a.user.email),Y(a.user),ez())});return()=>{t.unsubscribe()}},[e]);let eD=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],ez=(0,a.useCallback)(async()=>{M(!0);try{let{data:e}=await eK.from("interactions").select(`
          *,
          contacts (name, phone),
          clients (name)
        `).order("created_at",{ascending:!1}).limit(20);e&&I(e);let{data:t}=await eK.from("leads").select("*").order("created_at",{ascending:!1}).limit(8);t&&$(t);let{data:a}=await eK.from("contacts").select("*").order("created_at",{ascending:!1}).limit(12);a&&F(a),eL(e||[],t||[]),G([{id:1,type:"warning",message:"3 missed calls need follow-up",time:"5 min ago"},{id:2,type:"info",message:"New lead from website form",time:"15 min ago"},{id:3,type:"success",message:"Monthly report generated",time:"1 hour ago"},{id:4,type:"info",message:`Your number ${(0,_.formatPhoneNumber)(eZ)} is active`,time:"2 hours ago"}])}catch(e){console.error("Error fetching dashboard data:",e),D.toast.error("Failed to load dashboard data")}finally{M(!1)}},[]),eL=(e,a)=>{let r=e.filter(e=>"call"===e.type).length,d=e.filter(e=>e.is_missed_call).length,m=e.filter(e=>"sms"===e.type).length,u=a.filter(e=>"new"===e.status).length,h=r-d,x=r>0?Math.round(h/r*100):0;O([{label:"Total Calls",value:r,change:12,icon:(0,t.jsx)(s.Phone,{className:"h-4 w-4"}),color:"bg-blue-500"},{label:"Answer Rate",value:`${x}%`,change:x>80?5:-3,icon:(0,t.jsx)(i,{className:"h-4 w-4"}),color:"bg-green-500"},{label:"SMS Sent",value:m,change:23,icon:(0,t.jsx)(n,{className:"h-4 w-4"}),color:"bg-amber-500"},{label:"Missed Calls",value:d,change:-5,icon:(0,t.jsx)(o,{className:"h-4 w-4"}),color:"bg-red-500"},{label:"New Leads",value:u,change:8,icon:(0,t.jsx)(l,{className:"h-4 w-4"}),color:"bg-purple-500"},{label:"Voicemails",value:e.filter(e=>"voicemail"===e.type).length,change:2,icon:(0,t.jsx)(c,{className:"h-4 w-4"}),color:"bg-indigo-500"}])},eR=async()=>{if(J||ee)if(ee)et(!1),ei(!1),ec(!1),er&&(clearInterval(er),el(null)),es(0),Q(""),em(""),D.toast.success("Call ended");else{et(!0),D.toast.success(`Calling ${(0,_.formatPhoneNumber)(J)}...`),el(setInterval(()=>{es(e=>e+1)},1e3));try{await eK.from("interactions").insert({type:"call",direction:"outbound",from_number:eZ,to_number:J,status:"ringing",is_missed_call:!1,created_at:new Date().toISOString(),client_id:W?.id||null,contact_id:eu?.id||null}),eu&&await eK.from("contacts").update({last_interaction:new Date().toISOString()}).eq("id",eu.id)}catch(e){console.error("Error logging call:",e)}}},eA=async()=>{if(!J||!ex.trim())return void D.toast.error("Please enter a phone number and message");try{await eK.from("interactions").insert({type:"sms",direction:"outbound",from_number:eZ,to_number:J,status:"sent",content:ex,is_auto_response:!1,created_at:new Date().toISOString(),client_id:W?.id||null,contact_id:eu?.id||null}),eu&&await eK.from("contacts").update({last_interaction:new Date().toISOString()}).eq("id",eu.id),ep(""),D.toast.success("SMS sent successfully"),ez()}catch(e){console.error("Error sending SMS:",e),D.toast.error("Failed to send SMS")}};(0,_.debounce)(e=>{R(e)},300);let eI=async()=>{if(ek.trim()){e_(!0);try{let e=ek.trim(),t=e;!e.startsWith("http://")&&!e.startsWith("https://")&&e.includes(".")&&(t=`https://${e}`);let a=t.startsWith("http://")||t.startsWith("https://"),s=new URLSearchParams;a?s.append("url",t):s.append("name",e);let r=await fetch(`https://browser-worker.callaback.workers.dev/?${s.toString()}`);if(!r.ok)throw Error(`Failed to generate PDF: ${r.statusText}`);let l=await r.blob(),n=URL.createObjectURL(l);eT(n);let i=document.createElement("a");i.href=n,i.download=`${e.replace(/[^a-z0-9]/gi,"_")}.pdf`,i.click(),D.toast.success("PDF generated and downloaded"),eS("")}catch(e){console.error("Error generating PDF:",e),D.toast.error(`Failed to generate PDF: ${e instanceof Error?e.message:"Unknown error"}`)}finally{e_(!1)}}},e$=async()=>{try{console.log("Logging out...");let{error:t}=await eK.auth.signOut();if(t){console.error("Logout error:",t),D.toast.error("Failed to logout. Please try again.");return}console.log("Logout successful"),D.toast.success("Logged out successfully"),Y(null),I([]),$([]),F([]),O([]),setTimeout(()=>{e.push("/login")},100)}catch(e){console.error("Logout exception:",e),D.toast.error("An error occurred during logout")}};return(A.filter(e=>!L||e.from_number?.includes(L)||e.contacts?.name?.toLowerCase().includes(L.toLowerCase())||e.type?.includes(L.toLowerCase())),C||E)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-cyan-600 border-t-transparent mx-auto"}),(0,t.jsx)("p",{className:"text-muted-foreground font-medium",children:E?"Checking authentication...":"Loading callaback API..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[(0,t.jsx)(D.Toaster,{position:"top-center",richColors:!0}),(0,t.jsx)("header",{className:"border-b border-slate-200 bg-white/80 backdrop-blur-xl sticky top-0 z-50 shadow-sm",children:(0,t.jsx)("div",{className:"max-w-[2000px] mx-auto px-4 sm:px-6 py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,t.jsx)("div",{className:"h-11 w-11 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-md flex-shrink-0",children:(0,t.jsx)(s.Phone,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("h1",{className:"font-bold text-xl bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent",children:"callaback"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-cyan-700",children:(0,_.formatPhoneNumber)(eZ)}),(0,t.jsx)(j.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText((0,_.formatPhoneNumber)(eZ)),eg(eZ),D.toast.success("Phone number copied"),setTimeout(()=>eg(null),2e3)},title:"Copy phone number",children:ef===eZ?(0,t.jsx)(m,{className:"h-3 w-3 text-green-500"}):(0,t.jsx)(d,{className:"h-3 w-3"})})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-3 px-4 py-2.5 bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl border-2 border-cyan-200 shadow-md",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-xl font-mono font-bold tracking-tight text-slate-800 tabular-nums",children:K.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),(0,t.jsx)("p",{className:"text-xs text-slate-600 font-medium",children:K.toLocaleDateString("en-GB",{weekday:"short",day:"2-digit",month:"short",year:"numeric"})})]}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})]}),(0,t.jsxs)("div",{className:"hidden lg:flex items-center gap-3 px-4 py-2 bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl border border-slate-200 shadow-sm",children:[(0,t.jsx)("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold shadow-md",children:(W?.user_metadata?.name||W?.email)?.[0]?.toUpperCase()||"U"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-800 truncate max-w-[150px]",children:W?.user_metadata?.name||W?.email?.split("@")[0]}),(0,t.jsx)("p",{className:"text-xs text-slate-600 truncate max-w-[150px]",children:W?.email})]})]}),(0,t.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>eN(!ej),className:"h-10 px-3 border-slate-200 hover:bg-slate-100",title:ej?"Switch to light mode":"Switch to dark mode",children:ej?(0,t.jsx)(b,{className:"h-4 w-4 text-amber-500"}):(0,t.jsx)(y,{className:"h-4 w-4 text-slate-600"})}),(0,t.jsxs)(j.Button,{variant:"outline",size:"sm",onClick:e$,className:"h-10 px-4 border-red-200 hover:border-red-500 hover:bg-red-50 text-slate-700 hover:text-red-700",children:[(0,t.jsx)(u,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}),(0,t.jsxs)("main",{className:"max-w-[2000px] mx-auto p-4 pb-8 w-full",children:[(0,t.jsxs)("div",{className:"mb-4 flex gap-2 items-center",children:[(0,t.jsx)(k.Input,{placeholder:"Name or URL (e.g., example.com)",value:ek,onChange:e=>eS(e.target.value),onKeyDown:e=>"Enter"===e.key&&eI(),disabled:eC,className:"text-sm flex-1"}),(0,t.jsx)(j.Button,{size:"sm",onClick:eI,disabled:!ek.trim()||eC,className:"whitespace-nowrap",children:eC?"Generating...":"Generate PDF"})]}),eC&&(0,t.jsx)("div",{className:"mb-4 w-full bg-slate-200 dark:bg-slate-700 rounded-full h-1 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-primary animate-pulse",style:{width:"100%"}})}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-4",children:U.map((e,a)=>(0,t.jsx)(N.Card,{className:"hover:shadow transition-shadow",children:(0,t.jsx)(N.CardContent,{className:"p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:e.label}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,t.jsx)("p",{className:"text-lg font-bold",children:e.value}),e.change&&(0,t.jsxs)("span",{className:(0,_.cn)("text-[10px] font-medium",e.change>0?"text-green-600":"text-red-600"),children:[e.change>0?"+":"",e.change,"%"]})]})]}),(0,t.jsx)("div",{className:(0,_.cn)("h-8 w-8 rounded-full flex items-center justify-center",e.color,"text-white"),children:e.icon})]})})},a))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 min-h-[600px]",children:[(0,t.jsxs)("div",{className:"lg:col-span-3 flex flex-col gap-3",children:[(0,t.jsxs)(N.Card,{className:"flex-shrink-0",children:[(0,t.jsx)(N.CardHeader,{className:"pb-2 px-4 pt-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(N.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(s.Phone,{className:"h-4 w-4 text-primary"}),"Quick Dial"]}),(0,t.jsx)(j.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>ey(!ev),title:ev?"Compact view":"Expand dialer",children:(0,t.jsx)(v,{className:"h-3 w-3"})})]})}),(0,t.jsxs)(N.CardContent,{className:"p-4 pt-0",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs font-medium",children:"Number"}),J&&(0,t.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>{em(e=>e.slice(0,-1)),Q(e=>e.slice(0,-1))},className:"h-5 w-5",children:(0,t.jsx)(g,{className:"h-3 w-3"})})]}),(0,t.jsx)("div",{className:"text-lg font-mono text-center p-2 bg-secondary/30 rounded border",children:(0,_.formatPhoneNumber)(J)||"Enter number"})]}),(0,t.jsx)("div",{className:(0,_.cn)("grid grid-cols-3 gap-1.5 mb-3",""),children:(ev?eD:eD.slice(0,6)).map(({digit:e,letters:a})=>(0,t.jsxs)(j.Button,{variant:"secondary",className:"h-8 flex flex-col items-center justify-center p-0 text-xs hover:bg-primary/10",onClick:()=>{ed.length<20&&(em(t=>t+e),Q(t=>t+e))},disabled:ee,children:[(0,t.jsx)("span",{className:"font-bold",children:e}),a&&(0,t.jsx)("span",{className:"text-[6px] text-muted-foreground",children:a})]},e))}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1.5",children:[(0,t.jsx)(j.Button,{size:"icon",className:(0,_.cn)("h-10 w-10 rounded-full",ee?"bg-destructive hover:bg-destructive/90 animate-pulse":J?"bg-primary hover:bg-primary/90":"bg-primary/30 cursor-not-allowed"),onClick:eR,disabled:!J&&!ee,children:(0,t.jsx)(s.Phone,{className:"h-4 w-4"})}),ee&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Button,{variant:"outline",size:"icon",className:(0,_.cn)("h-8 w-8 rounded-full",en?"bg-destructive/20 border-destructive text-destructive":"hover:bg-primary/10"),onClick:()=>ei(!en),children:en?(0,t.jsx)(x,{className:"h-3 w-3"}):(0,t.jsx)(h,{className:"h-3 w-3"})}),(0,t.jsx)(j.Button,{variant:"outline",size:"icon",className:(0,_.cn)("h-8 w-8 rounded-full",eo?"bg-primary/20 border-primary text-primary":"hover:bg-primary/10"),onClick:()=>ec(!eo),children:eo?(0,t.jsx)(p,{className:"h-3 w-3"}):(0,t.jsx)(f,{className:"h-3 w-3"})})]})]}),ee&&(0,t.jsx)("div",{className:"text-center mt-1.5",children:(0,t.jsx)("p",{className:"text-xs font-mono",children:(0,_.formatDuration)(ea)})})]})]}),(0,t.jsxs)(N.Card,{className:"flex-shrink-0",children:[(0,t.jsx)(N.CardHeader,{className:"pb-2 px-4 pt-4",children:(0,t.jsxs)(N.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(n,{className:"h-4 w-4 text-primary"}),"Quick SMS"]})}),(0,t.jsxs)(N.CardContent,{className:"p-4 pt-0",children:[(0,t.jsx)(T,{placeholder:"Type SMS message...",value:ex,onChange:e=>ep(e.target.value),rows:2,className:"text-sm mb-2 resize-none"}),(0,t.jsxs)(j.Button,{size:"sm",className:"w-full",onClick:eA,disabled:!J||!ex.trim(),children:[(0,t.jsx)(n,{className:"h-3 w-3 mr-2"}),"Send SMS"]})]})]}),(0,t.jsxs)("div",{className:"h-[450px] flex flex-col gap-2",children:[eE&&(0,t.jsxs)(N.Card,{className:"flex-shrink-0",children:[(0,t.jsx)(N.CardHeader,{className:"pb-2 px-4 pt-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(N.CardTitle,{className:"text-sm",children:"Generated PDF"}),(0,t.jsx)(j.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>eT(null),children:(0,t.jsx)(w,{className:"h-3 w-3"})})]})}),(0,t.jsxs)(N.CardContent,{className:"p-4 pt-0",children:[(0,t.jsx)("iframe",{src:eE,className:"w-full h-[200px] border rounded"}),(0,t.jsx)(j.Button,{size:"sm",className:"w-full mt-2",onClick:()=>{let e=document.createElement("a");e.href=eE,e.download="generated.pdf",e.click()},children:"Download PDF"})]})]}),(0,t.jsx)("div",{className:eE?"h-[250px]":"h-full",children:(0,t.jsx)(eG,{})})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-5 flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"h-[380px]",children:(0,t.jsx)(eM,{contacts:H.map(e=>({id:e.id,name:e.name,phone:e.phone,email:e.email,company:e.company,createdAt:new Date(e.created_at)})),onAddContact:async e=>{try{let{data:t,error:a}=await eK.from("contacts").insert({name:e.name,phone:e.phone,email:e.email,company:e.company,created_at:new Date().toISOString()}).select().single();if(a)throw a;D.toast.success("Contact added successfully"),ez()}catch(e){console.error("Error adding contact:",e),D.toast.error("Failed to add contact")}},onUpdateContact:async(e,t)=>{try{let{error:a}=await eK.from("contacts").update(t).eq("id",e);if(a)throw a;D.toast.success("Contact updated successfully"),ez()}catch(e){console.error("Error updating contact:",e),D.toast.error("Failed to update contact")}},onDeleteContact:async e=>{try{let{error:t}=await eK.from("contacts").delete().eq("id",e);if(t)throw t;D.toast.success("Contact deleted successfully"),ez()}catch(e){console.error("Error deleting contact:",e),D.toast.error("Failed to delete contact")}},onSelectContact:e=>{Q(e.phone),em(e.phone.replace(/\D/g,"")),eh(e)},selectedContactId:eu?.id})}),(0,t.jsx)("div",{className:"h-[650px]",children:(0,t.jsx)(eP,{sessionId:W?.id||"user-session",identity:W?.email||"User",phoneNumber:eZ,onSessionChange:()=>{}})})]}),(0,t.jsxs)("div",{className:"lg:col-span-4 flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"h-[380px]",children:(0,t.jsx)(eU,{})}),(0,t.jsx)("div",{className:"h-[650px]",children:(0,t.jsx)(eB,{})})]})]})]})]})}e.s(["default",()=>eJ],31713)}]);