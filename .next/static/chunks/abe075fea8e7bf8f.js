(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";let t;var r,n,a,s,l,i,o,c,d=e.i(29511),u=e.i(58138),m=e.i(79971),f=e.i(10965);let h=(0,f.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),p=(0,f.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),x=(0,f.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),g=(0,f.default)("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),v=(0,f.default)("PhoneMissed",[["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["line",{x1:"16",x2:"22",y1:"2",y2:"8",key:"13zxdn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),y=(0,f.default)("Voicemail",[["circle",{cx:"6",cy:"12",r:"4",key:"1ehtga"}],["circle",{cx:"18",cy:"12",r:"4",key:"4vafl8"}],["line",{x1:"6",x2:"18",y1:"16",y2:"16",key:"pmt8us"}]]),w=(0,f.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),b=(0,f.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),j=(0,f.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),N=(0,f.default)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),C=(0,f.default)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),S=(0,f.default)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),k=(0,f.default)("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),E=(0,f.default)("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]),_=(0,f.default)("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),T=(0,f.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),R=(0,f.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var L=e.i(67881),P=e.i(70065),M=e.i(23750),A=e.i(3025),D=e.i(94237),z=e.i(47163);let H=(0,D.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function I({className:e,variant:t,asChild:r=!1,...n}){let a=r?A.Slot:"span";return(0,d.jsx)(a,{"data-slot":"badge",className:(0,z.cn)(H({variant:t}),e),...n})}var O=e.i(27341);function B({className:e,...t}){return(0,d.jsx)("textarea",{"data-slot":"textarea",className:(0,z.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var F=e.i(22036),$=e.i(20755),W=e.i(16755);let q=(0,f.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var V=e.i(84244);let U=(0,f.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),K=(0,f.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),Y=(0,f.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var X=e.i(40034),Z=e.i(80083),G=e.i(56055),Q=e.i(22373),J=e.i(6462),ee=e.i(61008),et=e.i(57722);function er(e,[t,r]){return Math.min(r,Math.max(t,e))}var en=e.i(78896),ea="ScrollArea",[es,el]=(0,G.createContextScope)(ea),[ei,eo]=es(ea),ec=u.forwardRef((e,t)=>{let{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:s=600,...l}=e,[i,o]=u.useState(null),[c,m]=u.useState(null),[f,h]=u.useState(null),[p,x]=u.useState(null),[g,v]=u.useState(null),[y,w]=u.useState(0),[b,j]=u.useState(0),[N,C]=u.useState(!1),[S,k]=u.useState(!1),E=(0,Q.useComposedRefs)(t,e=>o(e)),_=(0,ee.useDirection)(a);return(0,d.jsx)(ei,{scope:r,type:n,dir:_,scrollHideDelay:s,scrollArea:i,viewport:c,onViewportChange:m,content:f,onContentChange:h,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:N,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:S,onScrollbarYEnabledChange:k,onCornerWidthChange:w,onCornerHeightChange:j,children:(0,d.jsx)(X.Primitive.div,{dir:_,...l,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});ec.displayName=ea;var ed="ScrollAreaViewport",eu=u.forwardRef((e,t)=>{let{__scopeScrollArea:r,children:n,nonce:a,...s}=e,l=eo(ed,r),i=u.useRef(null),o=(0,Q.useComposedRefs)(t,i,l.onViewportChange);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,d.jsx)(X.Primitive.div,{"data-radix-scroll-area-viewport":"",...s,ref:o,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,d.jsx)("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});eu.displayName=ed;var em="ScrollAreaScrollbar",ef=u.forwardRef((e,t)=>{let{forceMount:r,...n}=e,a=eo(em,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:l}=a,i="horizontal"===e.orientation;return u.useEffect(()=>(i?s(!0):l(!0),()=>{i?s(!1):l(!1)}),[i,s,l]),"hover"===a.type?(0,d.jsx)(eh,{...n,ref:t,forceMount:r}):"scroll"===a.type?(0,d.jsx)(ep,{...n,ref:t,forceMount:r}):"auto"===a.type?(0,d.jsx)(ex,{...n,ref:t,forceMount:r}):"always"===a.type?(0,d.jsx)(eg,{...n,ref:t}):null});ef.displayName=em;var eh=u.forwardRef((e,t)=>{let{forceMount:r,...n}=e,a=eo(em,e.__scopeScrollArea),[s,l]=u.useState(!1);return u.useEffect(()=>{let e=a.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),l(!0)},n=()=>{t=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[a.scrollArea,a.scrollHideDelay]),(0,d.jsx)(Z.Presence,{present:r||s,children:(0,d.jsx)(ex,{"data-state":s?"visible":"hidden",...n,ref:t})})}),ep=u.forwardRef((e,t)=>{var r;let{forceMount:n,...a}=e,s=eo(em,e.__scopeScrollArea),l="horizontal"===e.orientation,i=eD(()=>c("SCROLL_END"),100),[o,c]=(r={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},u.useReducer((e,t)=>r[e][t]??e,"hidden"));return u.useEffect(()=>{if("idle"===o){let e=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(e)}},[o,s.scrollHideDelay,c]),u.useEffect(()=>{let e=s.viewport,t=l?"scrollLeft":"scrollTop";if(e){let r=e[t],n=()=>{let n=e[t];r!==n&&(c("SCROLL"),i()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[s.viewport,l,c,i]),(0,d.jsx)(Z.Presence,{present:n||"hidden"!==o,children:(0,d.jsx)(eg,{"data-state":"hidden"===o?"hidden":"visible",...a,ref:t,onPointerEnter:(0,en.composeEventHandlers)(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:(0,en.composeEventHandlers)(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),ex=u.forwardRef((e,t)=>{let r=eo(em,e.__scopeScrollArea),{forceMount:n,...a}=e,[s,l]=u.useState(!1),i="horizontal"===e.orientation,o=eD(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;l(i?e:t)}},10);return ez(r.viewport,o),ez(r.content,o),(0,d.jsx)(Z.Presence,{present:n||s,children:(0,d.jsx)(eg,{"data-state":s?"visible":"hidden",...a,ref:t})})}),eg=u.forwardRef((e,t)=>{let{orientation:r="vertical",...n}=e,a=eo(em,e.__scopeScrollArea),s=u.useRef(null),l=u.useRef(0),[i,o]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=eR(i.viewport,i.content),m={...n,sizes:i,onSizesChange:o,hasThumb:!!(c>0&&c<1),onThumbChange:e=>s.current=e,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:e=>l.current=e};function f(e,t){return function(e,t,r,n="ltr"){let a=eL(r),s=t||a/2,l=r.scrollbar.paddingStart+s,i=r.scrollbar.size-r.scrollbar.paddingEnd-(a-s),o=r.content-r.viewport;return eM([l,i],"ltr"===n?[0,o]:[-1*o,0])(e)}(e,l.current,i,t)}return"horizontal"===r?(0,d.jsx)(ev,{...m,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){let e=eP(a.viewport.scrollLeft,i,a.dir);s.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=f(e,a.dir))}}):"vertical"===r?(0,d.jsx)(ey,{...m,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){let e=eP(a.viewport.scrollTop,i);s.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=f(e))}}):null}),ev=u.forwardRef((e,t)=>{let{sizes:r,onSizesChange:n,...a}=e,s=eo(em,e.__scopeScrollArea),[l,i]=u.useState(),o=u.useRef(null),c=(0,Q.useComposedRefs)(t,o,s.onScrollbarXChange);return u.useEffect(()=>{o.current&&i(getComputedStyle(o.current))},[o]),(0,d.jsx)(ej,{"data-orientation":"horizontal",...a,ref:c,sizes:r,style:{bottom:0,left:"rtl"===s.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===s.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":eL(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(s.viewport){var n,a;let l=s.viewport.scrollLeft+t.deltaX;e.onWheelScroll(l),n=l,a=r,n>0&&n<a&&t.preventDefault()}},onResize:()=>{o.current&&s.viewport&&l&&n({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:o.current.clientWidth,paddingStart:eT(l.paddingLeft),paddingEnd:eT(l.paddingRight)}})}})}),ey=u.forwardRef((e,t)=>{let{sizes:r,onSizesChange:n,...a}=e,s=eo(em,e.__scopeScrollArea),[l,i]=u.useState(),o=u.useRef(null),c=(0,Q.useComposedRefs)(t,o,s.onScrollbarYChange);return u.useEffect(()=>{o.current&&i(getComputedStyle(o.current))},[o]),(0,d.jsx)(ej,{"data-orientation":"vertical",...a,ref:c,sizes:r,style:{top:0,right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":eL(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(s.viewport){var n,a;let l=s.viewport.scrollTop+t.deltaY;e.onWheelScroll(l),n=l,a=r,n>0&&n<a&&t.preventDefault()}},onResize:()=>{o.current&&s.viewport&&l&&n({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:o.current.clientHeight,paddingStart:eT(l.paddingTop),paddingEnd:eT(l.paddingBottom)}})}})}),[ew,eb]=es(em),ej=u.forwardRef((e,t)=>{let{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:s,onThumbPointerUp:l,onThumbPointerDown:i,onThumbPositionChange:o,onDragScroll:c,onWheelScroll:m,onResize:f,...h}=e,p=eo(em,r),[x,g]=u.useState(null),v=(0,Q.useComposedRefs)(t,e=>g(e)),y=u.useRef(null),w=u.useRef(""),b=p.viewport,j=n.content-n.viewport,N=(0,J.useCallbackRef)(m),C=(0,J.useCallbackRef)(o),S=eD(f,10);function k(e){y.current&&c({x:e.clientX-y.current.left,y:e.clientY-y.current.top})}return u.useEffect(()=>{let e=e=>{let t=e.target;x?.contains(t)&&N(e,j)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[b,x,j,N]),u.useEffect(C,[n,C]),ez(x,S),ez(p.content,S),(0,d.jsx)(ew,{scope:r,scrollbar:x,hasThumb:a,onThumbChange:(0,J.useCallbackRef)(s),onThumbPointerUp:(0,J.useCallbackRef)(l),onThumbPositionChange:C,onThumbPointerDown:(0,J.useCallbackRef)(i),children:(0,d.jsx)(X.Primitive.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:(0,en.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),y.current=x.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),k(e))}),onPointerMove:(0,en.composeEventHandlers)(e.onPointerMove,k),onPointerUp:(0,en.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=w.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),eN="ScrollAreaThumb",eC=u.forwardRef((e,t)=>{let{forceMount:r,...n}=e,a=eb(eN,e.__scopeScrollArea);return(0,d.jsx)(Z.Presence,{present:r||a.hasThumb,children:(0,d.jsx)(eS,{ref:t,...n})})}),eS=u.forwardRef((e,t)=>{let{__scopeScrollArea:r,style:n,...a}=e,s=eo(eN,r),l=eb(eN,r),{onThumbPositionChange:i}=l,o=(0,Q.useComposedRefs)(t,e=>l.onThumbChange(e)),c=u.useRef(void 0),m=eD(()=>{c.current&&(c.current(),c.current=void 0)},100);return u.useEffect(()=>{let e=s.viewport;if(e){let t=()=>{m(),c.current||(c.current=eA(e,i),i())};return i(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[s.viewport,m,i]),(0,d.jsx)(X.Primitive.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:o,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:(0,en.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;l.onThumbPointerDown({x:r,y:n})}),onPointerUp:(0,en.composeEventHandlers)(e.onPointerUp,l.onThumbPointerUp)})});eC.displayName=eN;var ek="ScrollAreaCorner",eE=u.forwardRef((e,t)=>{let r=eo(ek,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&n?(0,d.jsx)(e_,{...e,ref:t}):null});eE.displayName=ek;var e_=u.forwardRef((e,t)=>{let{__scopeScrollArea:r,...n}=e,a=eo(ek,r),[s,l]=u.useState(0),[i,o]=u.useState(0),c=!!(s&&i);return ez(a.scrollbarX,()=>{let e=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(e),o(e)}),ez(a.scrollbarY,()=>{let e=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(e),l(e)}),c?(0,d.jsx)(X.Primitive.div,{...n,ref:t,style:{width:s,height:i,position:"absolute",right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:0,...e.style}}):null});function eT(e){return e?parseInt(e,10):0}function eR(e,t){let r=e/t;return isNaN(r)?0:r}function eL(e){let t=eR(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function eP(e,t,r="ltr"){let n=eL(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,l=t.content-t.viewport,i=er(e,"ltr"===r?[0,l]:[-1*l,0]);return eM([0,l],[0,s-n])(i)}function eM(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}var eA=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return!function a(){let s={left:e.scrollLeft,top:e.scrollTop},l=r.left!==s.left,i=r.top!==s.top;(l||i)&&t(),r=s,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function eD(e,t){let r=(0,J.useCallbackRef)(e),n=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(n.current),[]),u.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function ez(e,t){let r=(0,J.useCallbackRef)(t);(0,et.useLayoutEffect)(()=>{let t=0;if(e){let n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}function eH({className:e,children:t,...r}){return(0,d.jsxs)(ec,{"data-slot":"scroll-area",className:(0,z.cn)("relative",e),...r,children:[(0,d.jsx)(eu,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,d.jsx)(eI,{}),(0,d.jsx)(eE,{})]})}function eI({className:e,orientation:t="vertical",...r}){return(0,d.jsx)(ef,{"data-slot":"scroll-area-scrollbar",orientation:t,className:(0,z.cn)("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",e),...r,children:(0,d.jsx)(eC,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function eO({contacts:e,onAddContact:t,onUpdateContact:r,onDeleteContact:n,onSelectContact:a,selectedContactId:s}){let[l,i]=(0,u.useState)(""),[o,c]=(0,u.useState)(!1),[f,h]=(0,u.useState)(null),[p,g]=(0,u.useState)({name:"",phone:"",email:"",company:""}),[v,y]=(0,u.useState)({name:"",phone:"",email:"",company:""}),w=e.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.phone.includes(l)||e.email?.toLowerCase().includes(l.toLowerCase())||e.company?.toLowerCase().includes(l.toLowerCase()));return(0,d.jsxs)(P.Card,{className:"h-full flex flex-col",children:[(0,d.jsxs)(P.CardHeader,{className:"pb-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(P.CardTitle,{className:"text-lg",children:"Contacts"}),(0,d.jsx)(L.Button,{size:"sm",variant:o?"secondary":"default",onClick:()=>c(!o),children:o?(0,d.jsx)(Y,{className:"h-4 w-4"}):(0,d.jsx)(q,{className:"h-4 w-4"})})]}),(0,d.jsxs)("div",{className:"relative mt-2",children:[(0,d.jsx)(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,d.jsx)(M.Input,{placeholder:"Search contacts...",value:l,onChange:e=>i(e.target.value),className:"pl-9"})]})]}),(0,d.jsxs)(P.CardContent,{className:"flex-1 overflow-hidden",children:[o&&(0,d.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-3 mb-3 space-y-2",children:[(0,d.jsx)(M.Input,{placeholder:"Name *",value:p.name,onChange:e=>g({...p,name:e.target.value})}),(0,d.jsx)(M.Input,{placeholder:"Phone *",value:p.phone,onChange:e=>g({...p,phone:e.target.value})}),(0,d.jsx)(M.Input,{placeholder:"Email",value:p.email,onChange:e=>g({...p,email:e.target.value})}),(0,d.jsx)(M.Input,{placeholder:"Company",value:p.company,onChange:e=>g({...p,company:e.target.value})}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(L.Button,{size:"sm",onClick:()=>{p.name&&p.phone&&(t(p),g({name:"",phone:"",email:"",company:""}),c(!1))},disabled:!p.name||!p.phone,children:"Save Contact"}),(0,d.jsx)(L.Button,{size:"sm",variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]}),(0,d.jsx)(eH,{className:"h-[calc(100%-1rem)]",children:(0,d.jsx)("div",{className:"space-y-2 pr-3",children:0===w.length?(0,d.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:l?"No contacts found":"No contacts yet"}):w.map(e=>{var t;let l;return(0,d.jsx)("div",{className:`group p-3 rounded-lg border transition-colors cursor-pointer ${s===e.id?"bg-primary/10 border-primary/30":"bg-card hover:bg-secondary/50 border-border"}`,onClick:()=>f!==e.id&&a(e),children:f===e.id?(0,d.jsxs)("div",{className:"space-y-2",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)(M.Input,{value:v.name,onChange:e=>y({...v,name:e.target.value}),placeholder:"Name"}),(0,d.jsx)(M.Input,{value:v.phone,onChange:e=>y({...v,phone:e.target.value}),placeholder:"Phone"}),(0,d.jsx)(M.Input,{value:v.email,onChange:e=>y({...v,email:e.target.value}),placeholder:"Email"}),(0,d.jsx)(M.Input,{value:v.company,onChange:e=>y({...v,company:e.target.value}),placeholder:"Company"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(L.Button,{size:"sm",onClick:()=>{var t;return t=e.id,void(v.name&&v.phone&&(r(t,v),h(null)))},children:(0,d.jsx)(b,{className:"h-4 w-4"})}),(0,d.jsx)(L.Button,{size:"sm",variant:"outline",onClick:()=>h(null),children:(0,d.jsx)(Y,{className:"h-4 w-4"})})]})]}):(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center shrink-0",children:(0,d.jsx)(V.User,{className:"h-5 w-5 text-primary"})}),(0,d.jsxs)("div",{className:"min-w-0",children:[(0,d.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,d.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,d.jsx)(m.Phone,{className:"h-3 w-3"}),(0,d.jsx)("span",{children:10===(l=(t=e.phone).replace(/\D/g,"")).length?`(${l.slice(0,3)}) ${l.slice(3,6)}-${l.slice(6)}`:t})]}),e.company&&(0,d.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.company})]})]}),(0,d.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,d.jsx)(L.Button,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:t=>{t.stopPropagation(),h(e.id),y({name:e.name,phone:e.phone,email:e.email||"",company:e.company||""})},children:(0,d.jsx)(K,{className:"h-4 w-4"})}),(0,d.jsx)(L.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:t=>{t.stopPropagation(),n(e.id)},children:(0,d.jsx)(U,{className:"h-4 w-4"})})]})]})},e.id)})})})]})]})}let eB=(0,f.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),eF=(0,f.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),e$=(0,f.default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);function eW({sessionId:e,identity:t,phoneNumber:r,onSessionChange:n}){let[a,s]=(0,u.useState)([]),[l,i]=(0,u.useState)(""),[o,c]=(0,u.useState)([t]),[f,x]=(0,u.useState)(!1),[g,v]=(0,u.useState)(!1),[y,j]=(0,u.useState)(e),[N,C]=(0,u.useState)(!0),[S,k]=(0,u.useState)("chat"),E=(0,u.useRef)(null),_=(0,u.useRef)(null),T=(0,$.createClient)();async function R(){if(C(!0),r){let e=r.startsWith("+")?r:`+${r}`,{data:n,error:a}=await T.from("interactions").select("*").or(`and(from_number.eq.${e},type.eq.sms),and(to_number.eq.${e},type.eq.sms)`).order("created_at",{ascending:!0}).limit(100);!a&&n&&(s(n.map(e=>({id:e.id,sender_identity:e.from_number,message:e.body||"",created_at:e.created_at,session_id:`sms-${e.from_number.replace("+","")}`,metadata:{type:"sms",direction:e.direction,twilio_sid:e.twilio_sid,to_number:e.to_number},source:"sms"}))),c([...new Set([...new Set(n.map(e=>e.from_number)),...new Set(n.map(e=>e.to_number)),t])]))}C(!1)}(0,u.useEffect)(()=>{_.current?.scrollIntoView({behavior:"smooth"})},[a]),(0,u.useEffect)(()=>{if("sms"===S)return void R();(async()=>{try{let{data:r,error:n}=await T.from("chat_messages").select("*").eq("session_id",e).order("created_at",{ascending:!0});if(n)throw n;let a=r?.map(e=>({id:e.id,sender_identity:e.sender_identity,message:e.message,created_at:e.created_at,session_id:e.session_id,source:"chat"}))||[];s(a);let l=[...new Set(a.map(e=>e.sender_identity))];c([...l,t]),C(!1)}catch(e){console.error("Failed to load messages:",e),C(!1)}})();let r=T.channel(`chat:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`session_id=eq.${e}`},e=>{let t={id:e.new.id,sender_identity:e.new.sender_identity,message:e.new.message,created_at:e.new.created_at,session_id:e.new.session_id,source:"chat"};s(e=>[...e,t]),c(t=>{let r=new Set(t);return r.add(e.new.sender_identity),Array.from(r)})}).subscribe();return()=>{r.unsubscribe()}},[e,S]);let A=async r=>{if(r.trim())try{let{error:n}=await T.from("chat_messages").insert({sender_identity:t,message:r.trim(),session_id:e,created_at:new Date().toISOString()});if(n)throw n;i("")}catch(e){console.error("Failed to send message:",e)}};async function D(e,t){try{(await fetch("/api/sms/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e,message:t,from:r})})).ok&&(i(""),await R())}catch(e){console.error("Error sending SMS:",e)}}let z=async()=>{if(l.trim())if("sms"===S&&r){let e=o.find(e=>e!==t&&e.includes("+"));e?await D(e,l.trim()):alert("Please select a recipient for SMS")}else await A(l.trim())};return(0,d.jsxs)(P.Card,{className:"h-full flex flex-col",children:[(0,d.jsxs)(P.CardHeader,{className:"pb-3 shrink-0",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(P.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,d.jsx)(p,{className:"h-5 w-5"}),"Sync Chat"]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(I,{variant:"outline",className:"gap-1",children:[(0,d.jsx)(h,{className:"h-3 w-3"}),o.length]}),(0,d.jsx)(L.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>"sms"===S&&R(),disabled:N,children:(0,d.jsx)(eF,{className:`h-4 w-4 ${N?"animate-spin":""}`})})]})]}),(0,d.jsx)(O.Tabs,{value:S,onValueChange:e=>k(e),className:"mt-2",children:(0,d.jsxs)(O.TabsList,{className:"grid w-full grid-cols-2",children:[(0,d.jsx)(O.TabsTrigger,{value:"chat",children:"Sync Chat"}),(0,d.jsxs)(O.TabsTrigger,{value:"sms",disabled:!r,children:[(0,d.jsx)(e$,{className:"h-3 w-3 mr-2"}),"SMS"]})]})}),(0,d.jsx)("div",{className:"flex items-center gap-2 mt-2",children:g?(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,d.jsx)(M.Input,{value:y,onChange:e=>j(e.target.value),placeholder:"Session ID",className:"h-8 text-sm"}),(0,d.jsx)(L.Button,{size:"sm",variant:"default",onClick:()=>{y&&y!==e&&n?.(y),v(!1)},children:(0,d.jsx)(b,{className:"h-4 w-4"})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex-1 text-sm",children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:"sms"===S?"Phone:":"Session:"})," ",(0,d.jsx)("button",{onClick:()=>v(!0),className:"font-mono text-primary hover:underline",children:"sms"===S?r||"No phone":e})]}),(0,d.jsx)(L.Button,{size:"sm",variant:"outline",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}?session=${e}&identity=guest`),x(!0),setTimeout(()=>x(!1),2e3)},className:"h-8 bg-transparent",children:f?(0,d.jsx)(b,{className:"h-4 w-4"}):(0,d.jsx)(w,{className:"h-4 w-4"})})]})}),(0,d.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:o.map(e=>(0,d.jsxs)(I,{variant:e===t?"default":"secondary",className:"text-xs",children:[e.includes("+")?(0,d.jsx)(m.Phone,{className:"h-3 w-3 mr-1"}):null,e,e===t&&" (you)"]},e))})]}),(0,d.jsxs)(P.CardContent,{className:"flex-1 flex flex-col min-h-0 p-4",children:[(0,d.jsx)("div",{className:"flex-1 overflow-y-auto mb-3",ref:E,children:(0,d.jsxs)("div",{className:"space-y-3",children:[N?(0,d.jsxs)("div",{className:"flex items-center justify-center py-8 text-muted-foreground text-sm",children:[(0,d.jsx)(eF,{className:"h-4 w-4 animate-spin mr-2"}),"Loading messages..."]}):0===a.length?(0,d.jsxs)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[(0,d.jsx)(p,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,d.jsx)("p",{children:"No messages yet"}),(0,d.jsx)("p",{className:"text-xs mt-1",children:"sms"===S?"Send an SMS to get started!":"Start the conversation!"})]}):a.map(e=>{let r=e.sender_identity===t,n=e.metadata?.type==="sms";return(0,d.jsxs)("div",{className:`flex flex-col ${r?"items-end":"items-start"}`,children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[n&&(0,d.jsx)(e$,{className:"h-3 w-3"}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:e.sender_identity}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),n&&(0,d.jsx)(I,{variant:"outline",className:"text-xs h-4 px-1",children:"SMS"})]}),(0,d.jsx)("div",{className:`max-w-[80%] rounded-lg px-3 py-2 text-sm ${r?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:e.message})]},`${e.id}-${e.created_at}`)}),(0,d.jsx)("div",{ref:_})]})}),(0,d.jsxs)("div",{className:"flex items-center gap-2 pt-3 border-t border-border shrink-0",children:[(0,d.jsx)(M.Input,{placeholder:"sms"===S?`Type SMS to ${o.find(e=>e!==t&&e.includes("+"))||"recipient"}...`:"Type a message...",value:l,onChange:e=>i(e.target.value),onKeyDown:e=>"Enter"===e.key&&z(),className:"flex-1"}),(0,d.jsx)(L.Button,{size:"icon",onClick:z,disabled:!l.trim(),children:(0,d.jsx)(eB,{className:"h-4 w-4"})})]})]})]})}let eq=(0,f.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),eV=(0,f.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),eU=(0,f.default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),eK=(0,f.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),eY=(0,f.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var eX=e.i(49463),eZ=e.i(5654),eG="dismissableLayer.update",eQ=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),eJ=u.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:l,onDismiss:i,...c}=e,m=u.useContext(eQ),[f,h]=u.useState(null),p=f?.ownerDocument??globalThis?.document,[,x]=u.useState({}),g=(0,Q.useComposedRefs)(t,e=>h(e)),v=Array.from(m.layers),[y]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(y),b=f?v.indexOf(f):-1,j=m.layersWithOutsidePointerEventsDisabled.size>0,N=b>=w,C=function(e,t=globalThis?.document){let r=(0,J.useCallbackRef)(e),n=u.useRef(!1),a=u.useRef(()=>{});return u.useEffect(()=>{let e=e=>{if(e.target&&!n.current){let n=function(){e1("dismissableLayer.pointerDownOutside",r,s,{discrete:!0})},s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",a.current),a.current=n,t.addEventListener("click",a.current,{once:!0})):n()}else t.removeEventListener("click",a.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{let t=e.target,r=[...m.branches].some(e=>e.contains(t));N&&!r&&(a?.(e),l?.(e),e.defaultPrevented||i?.())},p),S=function(e,t=globalThis?.document){let r=(0,J.useCallbackRef)(e),n=u.useRef(!1);return u.useEffect(()=>{let e=e=>{e.target&&!n.current&&e1("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{let t=e.target;![...m.branches].some(e=>e.contains(t))&&(s?.(e),l?.(e),e.defaultPrevented||i?.())},p);return!function(e,t=globalThis?.document){let r=(0,J.useCallbackRef)(e);u.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{b===m.layers.size-1&&(n?.(e),!e.defaultPrevented&&i&&(e.preventDefault(),i()))},p),u.useEffect(()=>{if(f)return r&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(o=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(f)),m.layers.add(f),e0(),()=>{r&&1===m.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=o)}},[f,p,r,m]),u.useEffect(()=>()=>{f&&(m.layers.delete(f),m.layersWithOutsidePointerEventsDisabled.delete(f),e0())},[f,m]),u.useEffect(()=>{let e=()=>x({});return document.addEventListener(eG,e),()=>document.removeEventListener(eG,e)},[]),(0,d.jsx)(X.Primitive.div,{...c,ref:g,style:{pointerEvents:j?N?"auto":"none":void 0,...e.style},onFocusCapture:(0,en.composeEventHandlers)(e.onFocusCapture,S.onFocusCapture),onBlurCapture:(0,en.composeEventHandlers)(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:(0,en.composeEventHandlers)(e.onPointerDownCapture,C.onPointerDownCapture)})});function e0(){let e=new CustomEvent(eG);document.dispatchEvent(e)}function e1(e,t,r,{discrete:n}){let a=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?(0,X.dispatchDiscreteCustomEvent)(a,s):a.dispatchEvent(s)}eJ.displayName="DismissableLayer",u.forwardRef((e,t)=>{let r=u.useContext(eQ),n=u.useRef(null),a=(0,Q.useComposedRefs)(t,n);return u.useEffect(()=>{let e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,d.jsx)(X.Primitive.div,{...e,ref:a})}).displayName="DismissableLayerBranch";var e2=0;function e3(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var e4="focusScope.autoFocusOnMount",e5="focusScope.autoFocusOnUnmount",e8={bubbles:!1,cancelable:!0},e6=u.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...l}=e,[i,o]=u.useState(null),c=(0,J.useCallbackRef)(a),m=(0,J.useCallbackRef)(s),f=u.useRef(null),h=(0,Q.useComposedRefs)(t,e=>o(e)),p=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(n){let e=function(e){if(p.paused||!i)return;let t=e.target;i.contains(t)?f.current=t:te(f.current,{select:!0})},t=function(e){if(p.paused||!i)return;let t=e.relatedTarget;null!==t&&(i.contains(t)||te(f.current,{select:!0}))};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&te(i)});return i&&r.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[n,i,p.paused]),u.useEffect(()=>{if(i){tt.add(p);let e=document.activeElement;if(!i.contains(e)){let t=new CustomEvent(e4,e8);i.addEventListener(e4,c),i.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(te(n,{select:t}),document.activeElement!==r)return}(e9(i).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&te(i))}return()=>{i.removeEventListener(e4,c),setTimeout(()=>{let t=new CustomEvent(e5,e8);i.addEventListener(e5,m),i.dispatchEvent(t),t.defaultPrevented||te(e??document.body,{select:!0}),i.removeEventListener(e5,m),tt.remove(p)},0)}}},[i,c,m,p]);let x=u.useCallback(e=>{if(!r&&!n||p.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){var s;let t,n=e.currentTarget,[l,i]=[e7(t=e9(s=n),s),e7(t.reverse(),s)];l&&i?e.shiftKey||a!==i?e.shiftKey&&a===l&&(e.preventDefault(),r&&te(i,{select:!0})):(e.preventDefault(),r&&te(l,{select:!0})):a===n&&e.preventDefault()}},[r,n,p.paused]);return(0,d.jsx)(X.Primitive.div,{tabIndex:-1,...l,ref:h,onKeyDown:x})});function e9(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function e7(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function te(e,{select:t=!1}={}){if(e&&e.focus){var r;let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}e6.displayName="FocusScope";var tt=(t=[],{add(e){let r=t[0];e!==r&&r?.pause(),(t=tr(t,e)).unshift(e)},remove(e){t=tr(t,e),t[0]?.resume()}});function tr(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}var tn=e.i(83909);let ta=["top","right","bottom","left"],ts=Math.min,tl=Math.max,ti=Math.round,to=Math.floor,tc=e=>({x:e,y:e}),td={left:"right",right:"left",bottom:"top",top:"bottom"},tu={start:"end",end:"start"};function tm(e,t){return"function"==typeof e?e(t):e}function tf(e){return e.split("-")[0]}function th(e){return e.split("-")[1]}function tp(e){return"x"===e?"y":"x"}function tx(e){return"y"===e?"height":"width"}let tg=new Set(["top","bottom"]);function tv(e){return tg.has(tf(e))?"y":"x"}function ty(e){return e.replace(/start|end/g,e=>tu[e])}let tw=["left","right"],tb=["right","left"],tj=["top","bottom"],tN=["bottom","top"];function tC(e){return e.replace(/left|right|bottom|top/g,e=>td[e])}function tS(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function tk(e){let{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function tE(e,t,r){let n,{reference:a,floating:s}=e,l=tv(t),i=tp(tv(t)),o=tx(i),c=tf(t),d="y"===l,u=a.x+a.width/2-s.width/2,m=a.y+a.height/2-s.height/2,f=a[o]/2-s[o]/2;switch(c){case"top":n={x:u,y:a.y-s.height};break;case"bottom":n={x:u,y:a.y+a.height};break;case"right":n={x:a.x+a.width,y:m};break;case"left":n={x:a.x-s.width,y:m};break;default:n={x:a.x,y:a.y}}switch(th(t)){case"start":n[i]-=f*(r&&d?-1:1);break;case"end":n[i]+=f*(r&&d?-1:1)}return n}async function t_(e,t){var r;void 0===t&&(t={});let{x:n,y:a,platform:s,rects:l,elements:i,strategy:o}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:f=0}=tm(t,e),h=tS(f),p=i[m?"floating"===u?"reference":"floating":u],x=tk(await s.getClippingRect({element:null==(r=await (null==s.isElement?void 0:s.isElement(p)))||r?p:p.contextElement||await (null==s.getDocumentElement?void 0:s.getDocumentElement(i.floating)),boundary:c,rootBoundary:d,strategy:o})),g="floating"===u?{x:n,y:a,width:l.floating.width,height:l.floating.height}:l.reference,v=await (null==s.getOffsetParent?void 0:s.getOffsetParent(i.floating)),y=await (null==s.isElement?void 0:s.isElement(v))&&await (null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},w=tk(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:g,offsetParent:v,strategy:o}):g);return{top:(x.top-w.top+h.top)/y.y,bottom:(w.bottom-x.bottom+h.bottom)/y.y,left:(x.left-w.left+h.left)/y.x,right:(w.right-x.right+h.right)/y.x}}let tT=async(e,t,r)=>{let{placement:n="bottom",strategy:a="absolute",middleware:s=[],platform:l}=r,i=s.filter(Boolean),o=await (null==l.isRTL?void 0:l.isRTL(t)),c=await l.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:u}=tE(c,n,o),m=n,f={},h=0;for(let r=0;r<i.length;r++){var p;let{name:s,fn:x}=i[r],{x:g,y:v,data:y,reset:w}=await x({x:d,y:u,initialPlacement:n,placement:m,strategy:a,middlewareData:f,rects:c,platform:{...l,detectOverflow:null!=(p=l.detectOverflow)?p:t_},elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=v?v:u,f={...f,[s]:{...f[s],...y}},w&&h<=50&&(h++,"object"==typeof w&&(w.placement&&(m=w.placement),w.rects&&(c=!0===w.rects?await l.getElementRects({reference:e,floating:t,strategy:a}):w.rects),{x:d,y:u}=tE(c,m,o)),r=-1)}return{x:d,y:u,placement:m,strategy:a,middlewareData:f}};function tR(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function tL(e){return ta.some(t=>e[t]>=0)}let tP=new Set(["left","top"]);async function tM(e,t){let{placement:r,platform:n,elements:a}=e,s=await (null==n.isRTL?void 0:n.isRTL(a.floating)),l=tf(r),i=th(r),o="y"===tv(r),c=tP.has(l)?-1:1,d=s&&o?-1:1,u=tm(t,e),{mainAxis:m,crossAxis:f,alignmentAxis:h}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return i&&"number"==typeof h&&(f="end"===i?-1*h:h),o?{x:f*d,y:m*c}:{x:m*c,y:f*d}}function tA(){return"undefined"!=typeof window}function tD(e){return tI(e)?(e.nodeName||"").toLowerCase():"#document"}function tz(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function tH(e){var t;return null==(t=(tI(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function tI(e){return!!tA()&&(e instanceof Node||e instanceof tz(e).Node)}function tO(e){return!!tA()&&(e instanceof Element||e instanceof tz(e).Element)}function tB(e){return!!tA()&&(e instanceof HTMLElement||e instanceof tz(e).HTMLElement)}function tF(e){return!!tA()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof tz(e).ShadowRoot)}let t$=new Set(["inline","contents"]);function tW(e){let{overflow:t,overflowX:r,overflowY:n,display:a}=t0(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!t$.has(a)}let tq=new Set(["table","td","th"]),tV=[":popover-open",":modal"];function tU(e){return tV.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let tK=["transform","translate","scale","rotate","perspective"],tY=["transform","translate","scale","rotate","perspective","filter"],tX=["paint","layout","strict","content"];function tZ(e){let t=tG(),r=tO(e)?t0(e):e;return tK.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||tY.some(e=>(r.willChange||"").includes(e))||tX.some(e=>(r.contain||"").includes(e))}function tG(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let tQ=new Set(["html","body","#document"]);function tJ(e){return tQ.has(tD(e))}function t0(e){return tz(e).getComputedStyle(e)}function t1(e){return tO(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function t2(e){if("html"===tD(e))return e;let t=e.assignedSlot||e.parentNode||tF(e)&&e.host||tH(e);return tF(t)?t.host:t}function t3(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let a=function e(t){let r=t2(t);return tJ(r)?t.ownerDocument?t.ownerDocument.body:t.body:tB(r)&&tW(r)?r:e(r)}(e),s=a===(null==(n=e.ownerDocument)?void 0:n.body),l=tz(a);if(s){let e=t4(l);return t.concat(l,l.visualViewport||[],tW(a)?a:[],e&&r?t3(e):[])}return t.concat(a,t3(a,[],r))}function t4(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function t5(e){let t=t0(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,a=tB(e),s=a?e.offsetWidth:r,l=a?e.offsetHeight:n,i=ti(r)!==s||ti(n)!==l;return i&&(r=s,n=l),{width:r,height:n,$:i}}function t8(e){return tO(e)?e:e.contextElement}function t6(e){let t=t8(e);if(!tB(t))return tc(1);let r=t.getBoundingClientRect(),{width:n,height:a,$:s}=t5(t),l=(s?ti(r.width):r.width)/n,i=(s?ti(r.height):r.height)/a;return l&&Number.isFinite(l)||(l=1),i&&Number.isFinite(i)||(i=1),{x:l,y:i}}let t9=tc(0);function t7(e){let t=tz(e);return tG()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:t9}function re(e,t,r,n){var a;void 0===t&&(t=!1),void 0===r&&(r=!1);let s=e.getBoundingClientRect(),l=t8(e),i=tc(1);t&&(n?tO(n)&&(i=t6(n)):i=t6(e));let o=(void 0===(a=r)&&(a=!1),n&&(!a||n===tz(l))&&a)?t7(l):tc(0),c=(s.left+o.x)/i.x,d=(s.top+o.y)/i.y,u=s.width/i.x,m=s.height/i.y;if(l){let e=tz(l),t=n&&tO(n)?tz(n):n,r=e,a=t4(r);for(;a&&n&&t!==r;){let e=t6(a),t=a.getBoundingClientRect(),n=t0(a),s=t.left+(a.clientLeft+parseFloat(n.paddingLeft))*e.x,l=t.top+(a.clientTop+parseFloat(n.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,m*=e.y,c+=s,d+=l,a=t4(r=tz(a))}}return tk({width:u,height:m,x:c,y:d})}function rt(e,t){let r=t1(e).scrollLeft;return t?t.left+r:re(tH(e)).left+r}function rr(e,t){let r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-rt(e,r),y:r.top+t.scrollTop}}let rn=new Set(["absolute","fixed"]);function ra(e,t,r){var n;let a;if("viewport"===t)a=function(e,t){let r=tz(e),n=tH(e),a=r.visualViewport,s=n.clientWidth,l=n.clientHeight,i=0,o=0;if(a){s=a.width,l=a.height;let e=tG();(!e||e&&"fixed"===t)&&(i=a.offsetLeft,o=a.offsetTop)}let c=rt(n);if(c<=0){let e=n.ownerDocument,t=e.body,r=getComputedStyle(t),a="CSS1Compat"===e.compatMode&&parseFloat(r.marginLeft)+parseFloat(r.marginRight)||0,l=Math.abs(n.clientWidth-t.clientWidth-a);l<=25&&(s-=l)}else c<=25&&(s+=c);return{width:s,height:l,x:i,y:o}}(e,r);else if("document"===t){let t,r,s,l,i,o,c;n=tH(e),t=tH(n),r=t1(n),s=n.ownerDocument.body,l=tl(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=tl(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),o=-r.scrollLeft+rt(n),c=-r.scrollTop,"rtl"===t0(s).direction&&(o+=tl(t.clientWidth,s.clientWidth)-l),a={width:l,height:i,x:o,y:c}}else if(tO(t)){let e,n,s,l,i,o;n=(e=re(t,!0,"fixed"===r)).top+t.clientTop,s=e.left+t.clientLeft,l=tB(t)?t6(t):tc(1),i=t.clientWidth*l.x,o=t.clientHeight*l.y,a={width:i,height:o,x:s*l.x,y:n*l.y}}else{let r=t7(e);a={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return tk(a)}function rs(e){return"static"===t0(e).position}function rl(e,t){if(!tB(e)||"fixed"===t0(e).position)return null;if(t)return t(e);let r=e.offsetParent;return tH(e)===r&&(r=r.ownerDocument.body),r}function ri(e,t){var r;let n=tz(e);if(tU(e))return n;if(!tB(e)){let t=t2(e);for(;t&&!tJ(t);){if(tO(t)&&!rs(t))return t;t=t2(t)}return n}let a=rl(e,t);for(;a&&(r=a,tq.has(tD(r)))&&rs(a);)a=rl(a,t);return a&&tJ(a)&&rs(a)&&!tZ(a)?n:a||function(e){let t=t2(e);for(;tB(t)&&!tJ(t);){if(tZ(t))return t;if(tU(t))break;t=t2(t)}return null}(e)||n}let ro=async function(e){let t=this.getOffsetParent||ri,r=this.getDimensions,n=await r(e.floating);return{reference:function(e,t,r){let n=tB(t),a=tH(t),s="fixed"===r,l=re(e,!0,s,t),i={scrollLeft:0,scrollTop:0},o=tc(0);if(n||!n&&!s)if(("body"!==tD(t)||tW(a))&&(i=t1(t)),n){let e=re(t,!0,s,t);o.x=e.x+t.clientLeft,o.y=e.y+t.clientTop}else a&&(o.x=rt(a));s&&!n&&a&&(o.x=rt(a));let c=!a||n||s?tc(0):rr(a,i);return{x:l.left+i.scrollLeft-o.x-c.x,y:l.top+i.scrollTop-o.y-c.y,width:l.width,height:l.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},rc={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e,s="fixed"===a,l=tH(n),i=!!t&&tU(t.floating);if(n===l||i&&s)return r;let o={scrollLeft:0,scrollTop:0},c=tc(1),d=tc(0),u=tB(n);if((u||!u&&!s)&&(("body"!==tD(n)||tW(l))&&(o=t1(n)),tB(n))){let e=re(n);c=t6(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}let m=!l||u||s?tc(0):rr(l,o);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-o.scrollLeft*c.x+d.x+m.x,y:r.y*c.y-o.scrollTop*c.y+d.y+m.y}},getDocumentElement:tH,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e,s=[..."clippingAncestors"===r?tU(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let n=t3(e,[],!1).filter(e=>tO(e)&&"body"!==tD(e)),a=null,s="fixed"===t0(e).position,l=s?t2(e):e;for(;tO(l)&&!tJ(l);){let t=t0(l),r=tZ(l);r||"fixed"!==t.position||(a=null),(s?!r&&!a:!r&&"static"===t.position&&!!a&&rn.has(a.position)||tW(l)&&!r&&function e(t,r){let n=t2(t);return!(n===r||!tO(n)||tJ(n))&&("fixed"===t0(n).position||e(n,r))}(e,l))?n=n.filter(e=>e!==l):a=t,l=t2(l)}return t.set(e,n),n}(t,this._c):[].concat(r),n],l=s[0],i=s.reduce((e,r)=>{let n=ra(t,r,a);return e.top=tl(n.top,e.top),e.right=ts(n.right,e.right),e.bottom=ts(n.bottom,e.bottom),e.left=tl(n.left,e.left),e},ra(t,l,a));return{width:i.right-i.left,height:i.bottom-i.top,x:i.left,y:i.top}},getOffsetParent:ri,getElementRects:ro,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=t5(e);return{width:t,height:r}},getScale:t6,isElement:tO,isRTL:function(e){return"rtl"===t0(e).direction}};function rd(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let ru=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:a,rects:s,platform:l,elements:i,middlewareData:o}=t,{element:c,padding:d=0}=tm(e,t)||{};if(null==c)return{};let u=tS(d),m={x:r,y:n},f=tp(tv(a)),h=tx(f),p=await l.getDimensions(c),x="y"===f,g=x?"clientHeight":"clientWidth",v=s.reference[h]+s.reference[f]-m[f]-s.floating[h],y=m[f]-s.reference[f],w=await (null==l.getOffsetParent?void 0:l.getOffsetParent(c)),b=w?w[g]:0;b&&await (null==l.isElement?void 0:l.isElement(w))||(b=i.floating[g]||s.floating[h]);let j=b/2-p[h]/2-1,N=ts(u[x?"top":"left"],j),C=ts(u[x?"bottom":"right"],j),S=b-p[h]-C,k=b/2-p[h]/2+(v/2-y/2),E=tl(N,ts(k,S)),_=!o.arrow&&null!=th(a)&&k!==E&&s.reference[h]/2-(k<N?N:C)-p[h]/2<0,T=_?k<N?k-N:k-S:0;return{[f]:m[f]+T,data:{[f]:E,centerOffset:k-E-T,..._&&{alignmentOffset:T}},reset:_}}});var rm="undefined"!=typeof document?u.useLayoutEffect:function(){};function rf(e,t){let r,n,a;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!rf(e[n],t[n]))return!1;return!0}if((r=(a=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,a[n]))return!1;for(n=r;0!=n--;){let r=a[n];if(("_owner"!==r||!e.$$typeof)&&!rf(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function rh(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rp(e,t){let r=rh(e);return Math.round(t*r)/r}function rx(e){let t=u.useRef(e);return rm(()=>{t.current=e}),t}var rg=u.forwardRef((e,t)=>{let{children:r,width:n=10,height:a=5,...s}=e;return(0,d.jsx)(X.Primitive.svg,{...s,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,d.jsx)("polygon",{points:"0,0 30,0 15,10"})})});rg.displayName="Arrow";var rv="Popper",[ry,rw]=(0,G.createContextScope)(rv),[rb,rj]=ry(rv),rN=e=>{let{__scopePopper:t,children:r}=e,[n,a]=u.useState(null);return(0,d.jsx)(rb,{scope:t,anchor:n,onAnchorChange:a,children:r})};rN.displayName=rv;var rC="PopperAnchor",rS=u.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:n,...a}=e,s=rj(rC,r),l=u.useRef(null),i=(0,Q.useComposedRefs)(t,l);return u.useEffect(()=>{s.onAnchorChange(n?.current||l.current)}),n?null:(0,d.jsx)(X.Primitive.div,{...a,ref:i})});rS.displayName=rC;var rk="PopperContent",[rE,r_]=ry(rk),rT=u.forwardRef((e,t)=>{var r,n,a,s,l,i,o,c,m,f,h,p,x;let{__scopePopper:g,side:v="bottom",sideOffset:y=0,align:w="center",alignOffset:b=0,arrowPadding:j=0,avoidCollisions:N=!0,collisionBoundary:C=[],collisionPadding:S=0,sticky:k="partial",hideWhenDetached:E=!1,updatePositionStrategy:_="optimized",onPlaced:T,...R}=e,L=rj(rk,g),[P,M]=u.useState(null),A=(0,Q.useComposedRefs)(t,e=>M(e)),[D,z]=u.useState(null),H=function(e){let[t,r]=u.useState(void 0);return(0,et.useLayoutEffect)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,a;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,a=t.blockSize}else n=e.offsetWidth,a=e.offsetHeight;r({width:n,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(D),I=H?.width??0,O=H?.height??0,B="number"==typeof S?S:{top:0,right:0,bottom:0,left:0,...S},F=Array.isArray(C)?C:[C],$=F.length>0,W={padding:B,boundary:F.filter(rM),altBoundary:$},{refs:q,floatingStyles:V,placement:U,isPositioned:K,middlewareData:Y}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:s,floating:l}={},transform:i=!0,whileElementsMounted:o,open:c}=e,[d,m]=u.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=u.useState(n);rf(f,n)||h(n);let[p,x]=u.useState(null),[g,v]=u.useState(null),y=u.useCallback(e=>{e!==N.current&&(N.current=e,x(e))},[]),w=u.useCallback(e=>{e!==C.current&&(C.current=e,v(e))},[]),b=s||p,j=l||g,N=u.useRef(null),C=u.useRef(null),S=u.useRef(d),k=null!=o,E=rx(o),_=rx(a),T=rx(c),R=u.useCallback(()=>{var e,n;let a,s,l;if(!N.current||!C.current)return;let i={placement:t,strategy:r,middleware:f};_.current&&(i.platform=_.current),(e=N.current,n=C.current,a=new Map,l={...(s={platform:rc,...i}).platform,_c:a},tT(e,n,{...s,platform:l})).then(e=>{let t={...e,isPositioned:!1!==T.current};L.current&&!rf(S.current,t)&&(S.current=t,eX.flushSync(()=>{m(t)}))})},[f,t,r,_,T]);rm(()=>{!1===c&&S.current.isPositioned&&(S.current.isPositioned=!1,m(e=>({...e,isPositioned:!1})))},[c]);let L=u.useRef(!1);rm(()=>(L.current=!0,()=>{L.current=!1}),[]),rm(()=>{if(b&&(N.current=b),j&&(C.current=j),b&&j){if(E.current)return E.current(b,j,R);R()}},[b,j,R,E,k]);let P=u.useMemo(()=>({reference:N,floating:C,setReference:y,setFloating:w}),[y,w]),M=u.useMemo(()=>({reference:b,floating:j}),[b,j]),A=u.useMemo(()=>{let e={position:r,left:0,top:0};if(!M.floating)return e;let t=rp(M.floating,d.x),n=rp(M.floating,d.y);return i?{...e,transform:"translate("+t+"px, "+n+"px)",...rh(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,i,M.floating,d.x,d.y]);return u.useMemo(()=>({...d,update:R,refs:P,elements:M,floatingStyles:A}),[d,R,P,M,A])}({strategy:"fixed",placement:v+("center"!==w?"-"+w:""),whileElementsMounted:(...e)=>(function(e,t,r,n){let a;void 0===n&&(n={});let{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:c=!1}=n,d=t8(e),u=s||l?[...d?t3(d):[],...t3(t)]:[];u.forEach(e=>{s&&e.addEventListener("scroll",r,{passive:!0}),l&&e.addEventListener("resize",r)});let m=d&&o?function(e,t){let r,n=null,a=tH(e);function s(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return!function l(i,o){void 0===i&&(i=!1),void 0===o&&(o=1),s();let c=e.getBoundingClientRect(),{left:d,top:u,width:m,height:f}=c;if(i||t(),!m||!f)return;let h={rootMargin:-to(u)+"px "+-to(a.clientWidth-(d+m))+"px "+-to(a.clientHeight-(u+f))+"px "+-to(d)+"px",threshold:tl(0,ts(1,o))||1},p=!0;function x(t){let n=t[0].intersectionRatio;if(n!==o){if(!p)return l();n?l(!1,n):r=setTimeout(()=>{l(!1,1e-7)},1e3)}1!==n||rd(c,e.getBoundingClientRect())||l(),p=!1}try{n=new IntersectionObserver(x,{...h,root:a.ownerDocument})}catch(e){n=new IntersectionObserver(x,h)}n.observe(e)}(!0),s}(d,r):null,f=-1,h=null;i&&(h=new ResizeObserver(e=>{let[n]=e;n&&n.target===d&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=h)||e.observe(t)})),r()}),d&&!c&&h.observe(d),h.observe(t));let p=c?re(e):null;return c&&function t(){let n=re(e);p&&!rd(p,n)&&r(),p=n,a=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{s&&e.removeEventListener("scroll",r),l&&e.removeEventListener("resize",r)}),null==m||m(),null==(e=h)||e.disconnect(),h=null,c&&cancelAnimationFrame(a)}})(...e,{animationFrame:"always"===_}),elements:{reference:L.anchor},middleware:[{...{name:"offset",options:n=r={mainAxis:y+O,alignmentAxis:b},async fn(e){var t,r;let{x:a,y:s,placement:l,middlewareData:i}=e,o=await tM(e,n);return l===(null==(t=i.offset)?void 0:t.placement)&&null!=(r=i.arrow)&&r.alignmentOffset?{}:{x:a+o.x,y:s+o.y,data:{...o,placement:l}}}},options:[r,void 0]},N&&{...{name:"shift",options:l=s={mainAxis:!0,crossAxis:!1,limiter:"partial"===k?{...(a=void 0,{options:a={},fn(e){let{x:t,y:r,placement:n,rects:s,middlewareData:l}=e,{offset:i=0,mainAxis:o=!0,crossAxis:c=!0}=tm(a,e),d={x:t,y:r},u=tv(n),m=tp(u),f=d[m],h=d[u],p=tm(i,e),x="number"==typeof p?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(o){let e="y"===m?"height":"width",t=s.reference[m]-s.floating[e]+x.mainAxis,r=s.reference[m]+s.reference[e]-x.mainAxis;f<t?f=t:f>r&&(f=r)}if(c){var g,v;let e="y"===m?"width":"height",t=tP.has(tf(n)),r=s.reference[u]-s.floating[e]+(t&&(null==(g=l.offset)?void 0:g[u])||0)+(t?0:x.crossAxis),a=s.reference[u]+s.reference[e]+(t?0:(null==(v=l.offset)?void 0:v[u])||0)-(t?x.crossAxis:0);h<r?h=r:h>a&&(h=a)}return{[m]:f,[u]:h}}}),options:[void 0,void 0]}:void 0,...W},async fn(e){let{x:t,y:r,placement:n,platform:a}=e,{mainAxis:s=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...c}=tm(l,e),d={x:t,y:r},u=await a.detectOverflow(e,c),m=tv(tf(n)),f=tp(m),h=d[f],p=d[m];if(s){let e="y"===f?"top":"left",t="y"===f?"bottom":"right",r=h+u[e],n=h-u[t];h=tl(r,ts(h,n))}if(i){let e="y"===m?"top":"left",t="y"===m?"bottom":"right",r=p+u[e],n=p-u[t];p=tl(r,ts(p,n))}let x=o.fn({...e,[f]:h,[m]:p});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[f]:s,[m]:i}}}}},options:[s,void 0]},N&&{...{name:"flip",options:o=i={...W},async fn(e){var t,r,n,a,s,l,i,c;let d,u,m,{placement:f,middlewareData:h,rects:p,initialPlacement:x,platform:g,elements:v}=e,{mainAxis:y=!0,crossAxis:w=!0,fallbackPlacements:b,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:C=!0,...S}=tm(o,e);if(null!=(t=h.arrow)&&t.alignmentOffset)return{};let k=tf(f),E=tv(x),_=tf(x)===x,T=await (null==g.isRTL?void 0:g.isRTL(v.floating)),R=b||(_||!C?[tC(x)]:(d=tC(x),[ty(x),d,ty(d)])),L="none"!==N;!b&&L&&R.push(...(u=th(x),m=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?tb:tw;return t?tw:tb;case"left":case"right":return t?tj:tN;default:return[]}}(tf(x),"start"===N,T),u&&(m=m.map(e=>e+"-"+u),C&&(m=m.concat(m.map(ty)))),m));let P=[x,...R],M=await g.detectOverflow(e,S),A=[],D=(null==(r=h.flip)?void 0:r.overflows)||[];if(y&&A.push(M[k]),w){let e,t,r,n,a=(l=f,i=p,void 0===(c=T)&&(c=!1),e=th(l),r=tx(t=tp(tv(l))),n="x"===t?e===(c?"end":"start")?"right":"left":"start"===e?"bottom":"top",i.reference[r]>i.floating[r]&&(n=tC(n)),[n,tC(n)]);A.push(M[a[0]],M[a[1]])}if(D=[...D,{placement:f,overflows:A}],!A.every(e=>e<=0)){let e=((null==(n=h.flip)?void 0:n.index)||0)+1,t=P[e];if(t&&("alignment"!==w||E===tv(t)||D.every(e=>tv(e.placement)!==E||e.overflows[0]>0)))return{data:{index:e,overflows:D},reset:{placement:t}};let r=null==(a=D.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:a.placement;if(!r)switch(j){case"bestFit":{let e=null==(s=D.filter(e=>{if(L){let t=tv(e.placement);return t===E||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:s[0];e&&(r=e);break}case"initialPlacement":r=x}if(f!==r)return{reset:{placement:r}}}return{}}},options:[i,void 0]},{...{name:"size",options:m=c={...W,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{let{width:a,height:s}=t.reference,l=e.floating.style;l.setProperty("--radix-popper-available-width",`${r}px`),l.setProperty("--radix-popper-available-height",`${n}px`),l.setProperty("--radix-popper-anchor-width",`${a}px`),l.setProperty("--radix-popper-anchor-height",`${s}px`)}},async fn(e){var t,r;let n,a,{placement:s,rects:l,platform:i,elements:o}=e,{apply:c=()=>{},...d}=tm(m,e),u=await i.detectOverflow(e,d),f=tf(s),h=th(s),p="y"===tv(s),{width:x,height:g}=l.floating;"top"===f||"bottom"===f?(n=f,a=h===(await (null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(a=f,n="end"===h?"top":"bottom");let v=g-u.top-u.bottom,y=x-u.left-u.right,w=ts(g-u[n],v),b=ts(x-u[a],y),j=!e.middlewareData.shift,N=w,C=b;if(null!=(t=e.middlewareData.shift)&&t.enabled.x&&(C=y),null!=(r=e.middlewareData.shift)&&r.enabled.y&&(N=v),j&&!h){let e=tl(u.left,0),t=tl(u.right,0),r=tl(u.top,0),n=tl(u.bottom,0);p?C=x-2*(0!==e||0!==t?e+t:tl(u.left,u.right)):N=g-2*(0!==r||0!==n?r+n:tl(u.top,u.bottom))}await c({...e,availableWidth:C,availableHeight:N});let S=await i.getDimensions(o.floating);return x!==S.width||g!==S.height?{reset:{rects:!0}}:{}}},options:[c,void 0]},D&&{...{name:"arrow",options:h=f={element:D,padding:j},fn(e){let{element:t,padding:r}="function"==typeof h?h(e):h;return t&&({}).hasOwnProperty.call(t,"current")?null!=t.current?ru({element:t.current,padding:r}).fn(e):{}:t?ru({element:t,padding:r}).fn(e):{}}},options:[f,void 0]},rA({arrowWidth:I,arrowHeight:O}),E&&{...{name:"hide",options:x=p={strategy:"referenceHidden",...W},async fn(e){let{rects:t,platform:r}=e,{strategy:n="referenceHidden",...a}=tm(x,e);switch(n){case"referenceHidden":{let n=tR(await r.detectOverflow(e,{...a,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:n,referenceHidden:tL(n)}}}case"escaped":{let n=tR(await r.detectOverflow(e,{...a,altBoundary:!0}),t.floating);return{data:{escapedOffsets:n,escaped:tL(n)}}}default:return{}}}},options:[p,void 0]}]}),[Z,G]=rD(U),ee=(0,J.useCallbackRef)(T);(0,et.useLayoutEffect)(()=>{K&&ee?.()},[K,ee]);let er=Y.arrow?.x,en=Y.arrow?.y,ea=Y.arrow?.centerOffset!==0,[es,el]=u.useState();return(0,et.useLayoutEffect)(()=>{P&&el(window.getComputedStyle(P).zIndex)},[P]),(0,d.jsx)("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:K?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:es,"--radix-popper-transform-origin":[Y.transformOrigin?.x,Y.transformOrigin?.y].join(" "),...Y.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,d.jsx)(rE,{scope:g,placedSide:Z,onArrowChange:z,arrowX:er,arrowY:en,shouldHideArrow:ea,children:(0,d.jsx)(X.Primitive.div,{"data-side":Z,"data-align":G,...R,ref:A,style:{...R.style,animation:K?void 0:"none"}})})})});rT.displayName=rk;var rR="PopperArrow",rL={top:"bottom",right:"left",bottom:"top",left:"right"},rP=u.forwardRef(function(e,t){let{__scopePopper:r,...n}=e,a=r_(rR,r),s=rL[a.placedSide];return(0,d.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,d.jsx)(rg,{...n,ref:t,style:{...n.style,display:"block"}})})});function rM(e){return null!==e}rP.displayName=rR;var rA=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:n,middlewareData:a}=t,s=a.arrow?.centerOffset!==0,l=s?0:e.arrowWidth,i=s?0:e.arrowHeight,[o,c]=rD(r),d={start:"0%",center:"50%",end:"100%"}[c],u=(a.arrow?.x??0)+l/2,m=(a.arrow?.y??0)+i/2,f="",h="";return"bottom"===o?(f=s?d:`${u}px`,h=`${-i}px`):"top"===o?(f=s?d:`${u}px`,h=`${n.floating.height+i}px`):"right"===o?(f=`${-i}px`,h=s?d:`${m}px`):"left"===o&&(f=`${n.floating.width+i}px`,h=s?d:`${m}px`),{data:{x:f,y:h}}}});function rD(e){let[t,r="center"]=e.split("-");return[t,r]}var rz=u.forwardRef((e,t)=>{let{container:r,...n}=e,[a,s]=u.useState(!1);(0,et.useLayoutEffect)(()=>s(!0),[]);let l=r||a&&globalThis?.document?.body;return l?eX.default.createPortal((0,d.jsx)(X.Primitive.div,{...n,ref:t}),l):null});rz.displayName="Portal";var rH=e.i(73739),rI=u.forwardRef((e,t)=>(0,d.jsx)(X.Primitive.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));rI.displayName="VisuallyHidden";var rO=new WeakMap,rB=new WeakMap,rF={},r$=0,rW=function(e){return e&&(e.host||rW(e.parentNode))},rq=function(e,t,r,n){var a=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=rW(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});rF[r]||(rF[r]=new WeakMap);var s=rF[r],l=[],i=new Set,o=new Set(a),c=function(e){!e||i.has(e)||(i.add(e),c(e.parentNode))};a.forEach(c);var d=function(e){!e||o.has(e)||Array.prototype.forEach.call(e.children,function(e){if(i.has(e))d(e);else try{var t=e.getAttribute(n),a=null!==t&&"false"!==t,o=(rO.get(e)||0)+1,c=(s.get(e)||0)+1;rO.set(e,o),s.set(e,c),l.push(e),1===o&&a&&rB.set(e,!0),1===c&&e.setAttribute(r,"true"),a||e.setAttribute(n,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return d(t),i.clear(),r$++,function(){l.forEach(function(e){var t=rO.get(e)-1,a=s.get(e)-1;rO.set(e,t),s.set(e,a),t||(rB.has(e)||e.removeAttribute(n),rB.delete(e)),a||e.removeAttribute(r)}),--r$||(rO=new WeakMap,rO=new WeakMap,rB=new WeakMap,rF={})}},rV=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=t||("undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),rq(n,a,r,"aria-hidden")):function(){return null}},rU=e.i(24627),rK="right-scroll-bar-position",rY="width-before-scroll-bar";function rX(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var rZ="undefined"!=typeof window?u.useLayoutEffect:u.useEffect,rG=new WeakMap,rQ=(void 0===r&&(r={}),(void 0===n&&(n=function(e){return e}),a=[],s=!1,l={read:function(){if(s)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:null},useMedium:function(e){var t=n(e,s);return a.push(t),function(){a=a.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(s=!0;a.length;){var t=a;a=[],t.forEach(e)}a={push:function(t){return e(t)},filter:function(){return a}}},assignMedium:function(e){s=!0;var t=[];if(a.length){var r=a;a=[],r.forEach(e),t=a}var n=function(){var r=t;t=[],r.forEach(e)},l=function(){return Promise.resolve().then(n)};l(),a={push:function(e){t.push(e),l()},filter:function(e){return t=t.filter(e),a}}}}).options=(0,rU.__assign)({async:!0,ssr:!1},r),l),rJ=function(){},r0=u.forwardRef(function(e,t){var r,n,a,s,l=u.useRef(null),i=u.useState({onScrollCapture:rJ,onWheelCapture:rJ,onTouchMoveCapture:rJ}),o=i[0],c=i[1],d=e.forwardProps,m=e.children,f=e.className,h=e.removeScrollBar,p=e.enabled,x=e.shards,g=e.sideCar,v=e.noRelative,y=e.noIsolation,w=e.inert,b=e.allowPinchZoom,j=e.as,N=e.gapMode,C=(0,rU.__rest)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=(r=[l,t],n=function(e){return r.forEach(function(t){return rX(t,e)})},(a=(0,u.useState)(function(){return{value:null,callback:n,facade:{get current(){return a.value},set current(value){var e=a.value;e!==value&&(a.value=value,a.callback(value,e))}}}})[0]).callback=n,s=a.facade,rZ(function(){var e=rG.get(s);if(e){var t=new Set(e),n=new Set(r),a=s.current;t.forEach(function(e){n.has(e)||rX(e,null)}),n.forEach(function(e){t.has(e)||rX(e,a)})}rG.set(s,r)},[r]),s),k=(0,rU.__assign)((0,rU.__assign)({},C),o);return u.createElement(u.Fragment,null,p&&u.createElement(g,{sideCar:rQ,removeScrollBar:h,shards:x,noRelative:v,noIsolation:y,inert:w,setCallbacks:c,allowPinchZoom:!!b,lockRef:l,gapMode:N}),d?u.cloneElement(u.Children.only(m),(0,rU.__assign)((0,rU.__assign)({},k),{ref:S})):u.createElement(void 0===j?"div":j,(0,rU.__assign)({},k,{className:f,ref:S}),m))});r0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},r0.classNames={fullWidth:rY,zeroRight:rK};var r1=function(e){var t=e.sideCar,r=(0,rU.__rest)(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw Error("Sidecar medium not found");return u.createElement(n,(0,rU.__assign)({},r))};r1.isSideCarExport=!0;var r2=function(){var e=0,t=null;return{add:function(r){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=c||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);return t&&e.setAttribute("nonce",t),e}())){var n,a;(n=t).styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r)),a=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(a)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},r3=function(){var e=r2();return function(t,r){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},r4=function(){var e=r3();return function(t){return e(t.styles,t.dynamic),null}},r5={left:0,top:0,right:0,gap:0},r8=function(e){return parseInt(e||"",10)||0},r6=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[r8(r),r8(n),r8(a)]},r9=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return r5;var t=r6(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},r7=r4(),ne="data-scroll-locked",nt=function(e,t,r,n){var a=e.left,s=e.top,l=e.right,i=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(i,"px ").concat(n,";\n  }\n  body[").concat(ne,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(l,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(i,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(rK," {\n    right: ").concat(i,"px ").concat(n,";\n  }\n  \n  .").concat(rY," {\n    margin-right: ").concat(i,"px ").concat(n,";\n  }\n  \n  .").concat(rK," .").concat(rK," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(rY," .").concat(rY," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(ne,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(i,"px;\n  }\n")},nr=function(){var e=parseInt(document.body.getAttribute(ne)||"0",10);return isFinite(e)?e:0},nn=function(){u.useEffect(function(){return document.body.setAttribute(ne,(nr()+1).toString()),function(){var e=nr()-1;e<=0?document.body.removeAttribute(ne):document.body.setAttribute(ne,e.toString())}},[])},na=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=void 0===n?"margin":n;nn();var s=u.useMemo(function(){return r9(a)},[a]);return u.createElement(r7,{styles:nt(s,!t,a,r?"":"!important")})},ns=!1;if("undefined"!=typeof window)try{var nl=Object.defineProperty({},"passive",{get:function(){return ns=!0,!0}});window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch(e){ns=!1}var ni=!!ns&&{passive:!1},no=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&(r.overflowY!==r.overflowX||"TEXTAREA"===e.tagName||"visible"!==r[t])},nc=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),nd(e,n)){var a=nu(e,n);if(a[1]>a[2])return!0}n=n.parentNode}while(n&&n!==r.body)return!1},nd=function(e,t){return"v"===e?no(t,"overflowY"):no(t,"overflowX")},nu=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},nm=function(e,t,r,n,a){var s,l=(s=window.getComputedStyle(t).direction,"h"===e&&"rtl"===s?-1:1),i=l*n,o=r.target,c=t.contains(o),d=!1,u=i>0,m=0,f=0;do{if(!o)break;var h=nu(e,o),p=h[0],x=h[1]-h[2]-l*p;(p||x)&&nd(e,o)&&(m+=x,f+=p);var g=o.parentNode;o=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&o!==document.body||c&&(t.contains(o)||t===o))return u&&(a&&1>Math.abs(m)||!a&&i>m)?d=!0:!u&&(a&&1>Math.abs(f)||!a&&-i>f)&&(d=!0),d},nf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},nh=function(e){return[e.deltaX,e.deltaY]},np=function(e){return e&&"current"in e?e.current:e},nx=0,ng=[];let nv=(i=function(e){var t=u.useRef([]),r=u.useRef([0,0]),n=u.useRef(),a=u.useState(nx++)[0],s=u.useState(r4)[0],l=u.useRef(e);u.useEffect(function(){l.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=(0,rU.__spreadArray)([e.lockRef.current],(e.shards||[]).map(np),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var i=u.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!l.current.allowPinchZoom;var a,s=nf(e),i=r.current,o="deltaX"in e?e.deltaX:i[0]-s[0],c="deltaY"in e?e.deltaY:i[1]-s[1],d=e.target,u=Math.abs(o)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=window.getSelection(),f=m&&m.anchorNode;if(f&&(f===d||f.contains(d)))return!1;var h=nc(u,d);if(!h)return!0;if(h?a=u:(a="v"===u?"h":"v",h=nc(u,d)),!h)return!1;if(!n.current&&"changedTouches"in e&&(o||c)&&(n.current=a),!a)return!0;var p=n.current||a;return nm(p,t,e,"h"===p?o:c,!0)},[]),o=u.useCallback(function(e){if(ng.length&&ng[ng.length-1]===s){var r="deltaY"in e?nh(e):nf(e),n=t.current.filter(function(t){var n;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(n=t.delta,n[0]===r[0]&&n[1]===r[1])})[0];if(n&&n.should){e.cancelable&&e.preventDefault();return}if(!n){var a=(l.current.shards||[]).map(np).filter(Boolean).filter(function(t){return t.contains(e.target)});(a.length>0?i(e,a[0]):!l.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=u.useCallback(function(e,r,n,a){var s={name:e,delta:r,target:n,should:a,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(n)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),d=u.useCallback(function(e){r.current=nf(e),n.current=void 0},[]),m=u.useCallback(function(t){c(t.type,nh(t),t.target,i(t,e.lockRef.current))},[]),f=u.useCallback(function(t){c(t.type,nf(t),t.target,i(t,e.lockRef.current))},[]);u.useEffect(function(){return ng.push(s),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",o,ni),document.addEventListener("touchmove",o,ni),document.addEventListener("touchstart",d,ni),function(){ng=ng.filter(function(e){return e!==s}),document.removeEventListener("wheel",o,ni),document.removeEventListener("touchmove",o,ni),document.removeEventListener("touchstart",d,ni)}},[]);var h=e.removeScrollBar,p=e.inert;return u.createElement(u.Fragment,null,p?u.createElement(s,{styles:"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")}):null,h?u.createElement(na,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},rQ.useMedium(i),r1);var ny=u.forwardRef(function(e,t){return u.createElement(r0,(0,rU.__assign)({},e,{ref:t,sideCar:nv}))});ny.classNames=r0.classNames;var nw=[" ","Enter","ArrowUp","ArrowDown"],nb=[" ","Enter"],nj="Select",[nN,nC,nS]=(0,eZ.createCollection)(nj),[nk,nE]=(0,G.createContextScope)(nj,[nS,rw]),n_=rw(),[nT,nR]=nk(nj),[nL,nP]=nk(nj),nM=e=>{let{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:s,value:l,defaultValue:i,onValueChange:o,dir:c,name:m,autoComplete:f,disabled:h,required:p,form:x}=e,g=n_(t),[v,y]=u.useState(null),[w,b]=u.useState(null),[j,N]=u.useState(!1),C=(0,ee.useDirection)(c),[S=!1,k]=(0,rH.useControllableState)({prop:n,defaultProp:a,onChange:s}),[E,_]=(0,rH.useControllableState)({prop:l,defaultProp:i,onChange:o}),T=u.useRef(null),R=!v||x||!!v.closest("form"),[L,P]=u.useState(new Set),M=Array.from(L).map(e=>e.props.value).join(";");return(0,d.jsx)(rN,{...g,children:(0,d.jsxs)(nT,{required:p,scope:t,trigger:v,onTriggerChange:y,valueNode:w,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:(0,tn.useId)(),value:E,onValueChange:_,open:S,onOpenChange:k,dir:C,triggerPointerDownPosRef:T,disabled:h,children:[(0,d.jsx)(nN.Provider,{scope:t,children:(0,d.jsx)(nL,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(e=>{P(t=>new Set(t).add(e))},[]),onNativeOptionRemove:u.useCallback(e=>{P(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:r})}),R?(0,d.jsxs)(al,{"aria-hidden":!0,required:p,tabIndex:-1,name:m,autoComplete:f,value:E,onChange:e=>_(e.target.value),disabled:h,form:x,children:[void 0===E?(0,d.jsx)("option",{value:""}):null,Array.from(L)]},M):null]})})};nM.displayName=nj;var nA="SelectTrigger",nD=u.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:n=!1,...a}=e,s=n_(r),l=nR(nA,r),i=l.disabled||n,o=(0,Q.useComposedRefs)(t,l.onTriggerChange),c=nC(r),m=u.useRef("touch"),[f,h,p]=ai(e=>{let t=c().filter(e=>!e.disabled),r=t.find(e=>e.value===l.value),n=ao(t,e,r);void 0!==n&&l.onValueChange(n.value)}),x=e=>{i||(l.onOpenChange(!0),p()),e&&(l.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,d.jsx)(rS,{asChild:!0,...s,children:(0,d.jsx)(X.Primitive.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":as(l.value)?"":void 0,...a,ref:o,onClick:(0,en.composeEventHandlers)(a.onClick,e=>{e.currentTarget.focus(),"mouse"!==m.current&&x(e)}),onPointerDown:(0,en.composeEventHandlers)(a.onPointerDown,e=>{m.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(x(e),e.preventDefault())}),onKeyDown:(0,en.composeEventHandlers)(a.onKeyDown,e=>{let t=""!==f.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),(!t||" "!==e.key)&&nw.includes(e.key)&&(x(),e.preventDefault())})})})});nD.displayName=nA;var nz="SelectValue",nH=u.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:a,children:s,placeholder:l="",...i}=e,o=nR(nz,r),{onValueNodeHasChildrenChange:c}=o,u=void 0!==s,m=(0,Q.useComposedRefs)(t,o.onValueNodeChange);return(0,et.useLayoutEffect)(()=>{c(u)},[c,u]),(0,d.jsx)(X.Primitive.span,{...i,ref:m,style:{pointerEvents:"none"},children:as(o.value)?(0,d.jsx)(d.Fragment,{children:l}):s})});nH.displayName=nz;var nI=u.forwardRef((e,t)=>{let{__scopeSelect:r,children:n,...a}=e;return(0,d.jsx)(X.Primitive.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});nI.displayName="SelectIcon";var nO=e=>(0,d.jsx)(rz,{asChild:!0,...e});nO.displayName="SelectPortal";var nB="SelectContent",nF=u.forwardRef((e,t)=>{let r=nR(nB,e.__scopeSelect),[n,a]=u.useState();return((0,et.useLayoutEffect)(()=>{a(new DocumentFragment)},[]),r.open)?(0,d.jsx)(nq,{...e,ref:t}):n?eX.createPortal((0,d.jsx)(n$,{scope:e.__scopeSelect,children:(0,d.jsx)(nN.Slot,{scope:e.__scopeSelect,children:(0,d.jsx)("div",{children:e.children})})}),n):null});nF.displayName=nB;var[n$,nW]=nk(nB),nq=u.forwardRef((e,t)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:l,side:i,sideOffset:o,align:c,alignOffset:m,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:v,...y}=e,w=nR(nB,r),[b,j]=u.useState(null),[N,C]=u.useState(null),S=(0,Q.useComposedRefs)(t,e=>j(e)),[k,E]=u.useState(null),[_,T]=u.useState(null),R=nC(r),[L,P]=u.useState(!1),M=u.useRef(!1);u.useEffect(()=>{if(b)return rV(b)},[b]),u.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??e3()),document.body.insertAdjacentElement("beforeend",e[1]??e3()),e2++,()=>{1===e2&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),e2--}},[]);let D=u.useCallback(e=>{let[t,...r]=R().map(e=>e.ref.current),[n]=r.slice(-1),a=document.activeElement;for(let r of e)if(r===a||(r?.scrollIntoView({block:"nearest"}),r===t&&N&&(N.scrollTop=0),r===n&&N&&(N.scrollTop=N.scrollHeight),r?.focus(),document.activeElement!==a))return},[R,N]),z=u.useCallback(()=>D([k,b]),[D,k,b]);u.useEffect(()=>{L&&z()},[L,z]);let{onOpenChange:H,triggerPointerDownPosRef:I}=w;u.useEffect(()=>{if(b){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(I.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(I.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():b.contains(r.target)||H(!1),document.removeEventListener("pointermove",t),I.current=null};return null!==I.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[b,H,I]),u.useEffect(()=>{let e=()=>H(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[H]);let[O,B]=ai(e=>{let t=R().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=ao(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),F=u.useCallback((e,t,r)=>{let n=!M.current&&!r;(void 0!==w.value&&w.value===t||n)&&(E(e),n&&(M.current=!0))},[w.value]),$=u.useCallback(()=>b?.focus(),[b]),W=u.useCallback((e,t,r)=>{let n=!M.current&&!r;(void 0!==w.value&&w.value===t||n)&&T(e)},[w.value]),q="popper"===n?nU:nV,V=q===nU?{side:i,sideOffset:o,align:c,alignOffset:m,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:v}:{};return(0,d.jsx)(n$,{scope:r,content:b,viewport:N,onViewportChange:C,itemRefCallback:F,selectedItem:k,onItemLeave:$,itemTextRefCallback:W,focusSelectedItem:z,selectedItemText:_,position:n,isPositioned:L,searchRef:O,children:(0,d.jsx)(ny,{as:A.Slot,allowPinchZoom:!0,children:(0,d.jsx)(e6,{asChild:!0,trapped:w.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,en.composeEventHandlers)(a,e=>{w.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,d.jsx)(eJ,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:(0,d.jsx)(q,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:e=>e.preventDefault(),...y,...V,onPlaced:()=>P(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:(0,en.composeEventHandlers)(y.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||B(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=R().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>D(t)),e.preventDefault()}})})})})})})});nq.displayName="SelectContentImpl";var nV=u.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:n,...a}=e,s=nR(nB,r),l=nW(nB,r),[i,o]=u.useState(null),[c,m]=u.useState(null),f=(0,Q.useComposedRefs)(t,e=>m(e)),h=nC(r),p=u.useRef(!1),x=u.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:y,focusSelectedItem:w}=l,b=u.useCallback(()=>{if(s.trigger&&s.valueNode&&i&&c&&g&&v&&y){let e=s.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),r=s.valueNode.getBoundingClientRect(),a=y.getBoundingClientRect();if("rtl"!==s.dir){let n=a.left-t.left,s=r.left-n,l=e.left-s,o=e.width+l,c=Math.max(o,t.width),d=er(s,[10,Math.max(10,window.innerWidth-10-c)]);i.style.minWidth=o+"px",i.style.left=d+"px"}else{let n=t.right-a.right,s=window.innerWidth-r.right-n,l=window.innerWidth-e.right-s,o=e.width+l,c=Math.max(o,t.width),d=er(s,[10,Math.max(10,window.innerWidth-10-c)]);i.style.minWidth=o+"px",i.style.right=d+"px"}let l=h(),o=window.innerHeight-20,d=g.scrollHeight,u=window.getComputedStyle(c),m=parseInt(u.borderTopWidth,10),f=parseInt(u.paddingTop,10),x=parseInt(u.borderBottomWidth,10),w=m+f+d+parseInt(u.paddingBottom,10)+x,b=Math.min(5*v.offsetHeight,w),j=window.getComputedStyle(g),N=parseInt(j.paddingTop,10),C=parseInt(j.paddingBottom,10),S=e.top+e.height/2-10,k=v.offsetHeight/2,E=m+f+(v.offsetTop+k);if(E<=S){let e=l.length>0&&v===l[l.length-1].ref.current;i.style.bottom="0px";let t=Math.max(o-S,k+(e?C:0)+(c.clientHeight-g.offsetTop-g.offsetHeight)+x);i.style.height=E+t+"px"}else{let e=l.length>0&&v===l[0].ref.current;i.style.top="0px";let t=Math.max(S,m+g.offsetTop+(e?N:0)+k);i.style.height=t+(w-E)+"px",g.scrollTop=E-S+g.offsetTop}i.style.margin="10px 0",i.style.minHeight=b+"px",i.style.maxHeight=o+"px",n?.(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,i,c,g,v,y,s.dir,n]);(0,et.useLayoutEffect)(()=>b(),[b]);let[j,N]=u.useState();(0,et.useLayoutEffect)(()=>{c&&N(window.getComputedStyle(c).zIndex)},[c]);let C=u.useCallback(e=>{e&&!0===x.current&&(b(),w?.(),x.current=!1)},[b,w]);return(0,d.jsx)(nK,{scope:r,contentWrapper:i,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:(0,d.jsx)("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:(0,d.jsx)(X.Primitive.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});nV.displayName="SelectItemAlignedPosition";var nU=u.forwardRef((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:a=10,...s}=e,l=n_(r);return(0,d.jsx)(rT,{...l,...s,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});nU.displayName="SelectPopperPosition";var[nK,nY]=nk(nB,{}),nX="SelectViewport",nZ=u.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:n,...a}=e,s=nW(nX,r),l=nY(nX,r),i=(0,Q.useComposedRefs)(t,s.onViewportChange),o=u.useRef(0);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,d.jsx)(nN.Slot,{scope:r,children:(0,d.jsx)(X.Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:(0,en.composeEventHandlers)(a.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=l;if(n?.current&&r){let e=Math.abs(o.current-t.scrollTop);if(e>0){let n=window.innerHeight-20,a=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(a<n){let s=a+e,l=Math.min(n,s),i=s-l;r.style.height=l+"px","0px"===r.style.bottom&&(t.scrollTop=i>0?i:0,r.style.justifyContent="flex-end")}}}o.current=t.scrollTop})})})]})});nZ.displayName=nX;var nG="SelectGroup",[nQ,nJ]=nk(nG);u.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,a=(0,tn.useId)();return(0,d.jsx)(nQ,{scope:r,id:a,children:(0,d.jsx)(X.Primitive.div,{role:"group","aria-labelledby":a,...n,ref:t})})}).displayName=nG;var n0="SelectLabel";u.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,a=nJ(n0,r);return(0,d.jsx)(X.Primitive.div,{id:a.id,...n,ref:t})}).displayName=n0;var n1="SelectItem",[n2,n3]=nk(n1),n4=u.forwardRef((e,t)=>{let{__scopeSelect:r,value:n,disabled:a=!1,textValue:s,...l}=e,i=nR(n1,r),o=nW(n1,r),c=i.value===n,[m,f]=u.useState(s??""),[h,p]=u.useState(!1),x=(0,Q.useComposedRefs)(t,e=>o.itemRefCallback?.(e,n,a)),g=(0,tn.useId)(),v=u.useRef("touch"),y=()=>{a||(i.onValueChange(n),i.onOpenChange(!1))};if(""===n)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,d.jsx)(n2,{scope:r,value:n,disabled:a,textId:g,isSelected:c,onItemTextChange:u.useCallback(e=>{f(t=>t||(e?.textContent??"").trim())},[]),children:(0,d.jsx)(nN.ItemSlot,{scope:r,value:n,disabled:a,textValue:m,children:(0,d.jsx)(X.Primitive.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:x,onFocus:(0,en.composeEventHandlers)(l.onFocus,()=>p(!0)),onBlur:(0,en.composeEventHandlers)(l.onBlur,()=>p(!1)),onClick:(0,en.composeEventHandlers)(l.onClick,()=>{"mouse"!==v.current&&y()}),onPointerUp:(0,en.composeEventHandlers)(l.onPointerUp,()=>{"mouse"===v.current&&y()}),onPointerDown:(0,en.composeEventHandlers)(l.onPointerDown,e=>{v.current=e.pointerType}),onPointerMove:(0,en.composeEventHandlers)(l.onPointerMove,e=>{v.current=e.pointerType,a?o.onItemLeave?.():"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,en.composeEventHandlers)(l.onPointerLeave,e=>{e.currentTarget===document.activeElement&&o.onItemLeave?.()}),onKeyDown:(0,en.composeEventHandlers)(l.onKeyDown,e=>{(o.searchRef?.current===""||" "!==e.key)&&(nb.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});n4.displayName=n1;var n5="SelectItemText",n8=u.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:a,...s}=e,l=nR(n5,r),i=nW(n5,r),o=n3(n5,r),c=nP(n5,r),[m,f]=u.useState(null),h=(0,Q.useComposedRefs)(t,e=>f(e),o.onItemTextChange,e=>i.itemTextRefCallback?.(e,o.value,o.disabled)),p=m?.textContent,x=u.useMemo(()=>(0,d.jsx)("option",{value:o.value,disabled:o.disabled,children:p},o.value),[o.disabled,o.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=c;return(0,et.useLayoutEffect)(()=>(g(x),()=>v(x)),[g,v,x]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(X.Primitive.span,{id:o.textId,...s,ref:h}),o.isSelected&&l.valueNode&&!l.valueNodeHasChildren?eX.createPortal(s.children,l.valueNode):null]})});n8.displayName=n5;var n6="SelectItemIndicator",n9=u.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return n3(n6,r).isSelected?(0,d.jsx)(X.Primitive.span,{"aria-hidden":!0,...n,ref:t}):null});n9.displayName=n6;var n7="SelectScrollUpButton",ae=u.forwardRef((e,t)=>{let r=nW(n7,e.__scopeSelect),n=nY(n7,e.__scopeSelect),[a,s]=u.useState(!1),l=(0,Q.useComposedRefs)(t,n.onScrollButtonChange);return(0,et.useLayoutEffect)(()=>{if(r.viewport&&r.isPositioned){let e=function(){s(t.scrollTop>0)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?(0,d.jsx)(an,{...e,ref:l,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});ae.displayName=n7;var at="SelectScrollDownButton",ar=u.forwardRef((e,t)=>{let r=nW(at,e.__scopeSelect),n=nY(at,e.__scopeSelect),[a,s]=u.useState(!1),l=(0,Q.useComposedRefs)(t,n.onScrollButtonChange);return(0,et.useLayoutEffect)(()=>{if(r.viewport&&r.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;s(Math.ceil(t.scrollTop)<e)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?(0,d.jsx)(an,{...e,ref:l,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});ar.displayName=at;var an=u.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:n,...a}=e,s=nW("SelectScrollButton",r),l=u.useRef(null),i=nC(r),o=u.useCallback(()=>{null!==l.current&&(window.clearInterval(l.current),l.current=null)},[]);return u.useEffect(()=>()=>o(),[o]),(0,et.useLayoutEffect)(()=>{let e=i().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[i]),(0,d.jsx)(X.Primitive.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:(0,en.composeEventHandlers)(a.onPointerDown,()=>{null===l.current&&(l.current=window.setInterval(n,50))}),onPointerMove:(0,en.composeEventHandlers)(a.onPointerMove,()=>{s.onItemLeave?.(),null===l.current&&(l.current=window.setInterval(n,50))}),onPointerLeave:(0,en.composeEventHandlers)(a.onPointerLeave,()=>{o()})})});u.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return(0,d.jsx)(X.Primitive.div,{"aria-hidden":!0,...n,ref:t})}).displayName="SelectSeparator";var aa="SelectArrow";function as(e){return""===e||void 0===e}u.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,a=n_(r),s=nR(aa,r),l=nW(aa,r);return s.open&&"popper"===l.position?(0,d.jsx)(rP,{...a,...n,ref:t}):null}).displayName=aa;var al=u.forwardRef((e,t)=>{let r,{value:n,...a}=e,s=u.useRef(null),l=(0,Q.useComposedRefs)(t,s),i=(r=u.useRef({value:n,previous:n}),u.useMemo(()=>(r.current.value!==n&&(r.current.previous=r.current.value,r.current.value=n),r.current.previous),[n]));return u.useEffect(()=>{let e=s.current,t=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(i!==n&&t){let r=new Event("change",{bubbles:!0});t.call(e,n),e.dispatchEvent(r)}},[i,n]),(0,d.jsx)(rI,{asChild:!0,children:(0,d.jsx)("select",{...a,ref:l,defaultValue:n})})});function ai(e){let t=(0,J.useCallbackRef)(e),r=u.useRef(""),n=u.useRef(0),a=u.useCallback(e=>{let a=r.current+e;t(a),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),s=u.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,s]}function ao(e,t,r){var n,a;let s=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,l=r?e.indexOf(r):-1,i=(n=e,a=Math.max(l,0),n.map((e,t)=>n[(a+t)%n.length]));1===s.length&&(i=i.filter(e=>e!==r));let o=i.find(e=>e.textValue.toLowerCase().startsWith(s.toLowerCase()));return o!==r?o:void 0}al.displayName="BubbleSelect";let ac=(0,f.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ad=(0,f.default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function au({...e}){return(0,d.jsx)(nM,{"data-slot":"select",...e})}function am({...e}){return(0,d.jsx)(nH,{"data-slot":"select-value",...e})}function af({className:e,size:t="default",children:r,...n}){return(0,d.jsxs)(nD,{"data-slot":"select-trigger","data-size":t,className:(0,z.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[r,(0,d.jsx)(nI,{asChild:!0,children:(0,d.jsx)(ac,{className:"size-4 opacity-50"})})]})}function ah({className:e,children:t,position:r="popper",...n}){return(0,d.jsx)(nO,{children:(0,d.jsxs)(nF,{"data-slot":"select-content",className:(0,z.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[(0,d.jsx)(ax,{}),(0,d.jsx)(nZ,{className:(0,z.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,d.jsx)(ag,{})]})})}function ap({className:e,children:t,...r}){return(0,d.jsxs)(n4,{"data-slot":"select-item",className:(0,z.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[(0,d.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,d.jsx)(n9,{children:(0,d.jsx)(b,{className:"size-4"})})}),(0,d.jsx)(n8,{children:t})]})}function ax({className:e,...t}){return(0,d.jsx)(ae,{"data-slot":"select-scroll-up-button",className:(0,z.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,d.jsx)(ad,{className:"size-4"})})}function ag({className:e,...t}){return(0,d.jsx)(ar,{"data-slot":"select-scroll-down-button",className:(0,z.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,d.jsx)(ac,{className:"size-4"})})}function av(){let[e,t]=(0,u.useState)([]),[r,n]=(0,u.useState)([]),[a,s]=(0,u.useState)([]),[l,i]=(0,u.useState)(!0),[o,c]=(0,u.useState)("all"),[f,h]=(0,u.useState)(!1),[x,g]=(0,u.useState)(null),[y,w]=(0,u.useState)({content:"",type:"note",lead_id:""}),[b,j]=(0,u.useState)("all"),N=(0,$.createClient)();async function C(){i(!0);try{let{data:e,error:r}=await N.from("leads").select(`
          *,
          contacts (name, phone),
          clients (name),
          interactions!first_interaction_id (type, direction, created_at)
        `).order("created_at",{ascending:!1}).limit(50);!r&&e&&t(e);let{data:a,error:l}=await N.from("notes").select(`
          *,
          contacts (name, phone)
        `).order("created_at",{ascending:!1}).limit(50);!l&&a&&n(a);let{data:i}=await N.from("interactions").select(`
          *,
          contacts (name, phone)
        `).order("created_at",{ascending:!1}).limit(20);i&&s(i)}catch(e){console.error("Error fetching data:",e)}finally{i(!1)}}(0,u.useEffect)(()=>{C();let e=N.channel("leads-changes").on("postgres_changes",{event:"*",schema:"public",table:"leads"},()=>{C()}).subscribe(),t=N.channel("notes-changes").on("postgres_changes",{event:"*",schema:"public",table:"notes"},()=>{C()}).subscribe();return()=>{N.removeChannel(e),N.removeChannel(t)}},[]);let S=e.filter(e=>"all"===o||e.status===o).filter(e=>"all"===b||("followup"===b?!0===e.follow_up_required:"high"!==b||"high"===e.priority));async function k(){if(y.content.trim())try{let{error:e}=await N.from("leads").insert({title:y.content.substring(0,50)+(y.content.length>50?"...":""),description:y.content,type:y.type,contact_id:x||void 0,status:"new",priority:"medium",created_at:new Date().toISOString()});if(e)throw e;w({content:"",type:"note",lead_id:""}),g(null),h(!1),C()}catch(e){console.error("Error adding note:",e)}}async function E(e,t){try{let r={status:t,updated_at:new Date().toISOString()};"converted"===t&&(r.converted_at=new Date().toISOString(),r.follow_up_required=!1);let{error:n}=await N.from("leads").update(r).eq("id",e);if(n)throw n;C()}catch(e){console.error("Error updating lead status:",e)}}async function _(e,t){try{let{error:r}=await N.from("leads").update({priority:t,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw r;C()}catch(e){console.error("Error updating lead priority:",e)}}async function T(e,t){try{let{error:r}=await N.from("leads").update({follow_up_required:!t,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw r;C()}catch(e){console.error("Error toggling follow-up:",e)}}function R(e){if(!e)return"--";let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/6e4);return r<1?"Just now":r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function M(e){return r.filter(t=>t.lead_id===e)}let A={total:e.length,new:e.filter(e=>"new"===e.status).length,contacted:e.filter(e=>"contacted"===e.status).length,qualified:e.filter(e=>"qualified"===e.status).length,converted:e.filter(e=>"converted"===e.status).length,followup:e.filter(e=>e.follow_up_required).length,high:e.filter(e=>"high"===e.priority).length};return(0,d.jsxs)(P.Card,{className:"h-full flex flex-col",children:[(0,d.jsxs)(P.CardHeader,{className:"pb-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(P.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,d.jsx)(eK,{className:"h-5 w-5 text-primary"}),"Leads & Notes"]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("div",{className:"text-xs flex items-center gap-3",children:[(0,d.jsxs)(I,{variant:"outline",className:"text-[10px]",children:["Total: ",A.total]}),(0,d.jsxs)(I,{variant:"outline",className:"text-[10px] bg-blue-50 text-blue-700",children:["New: ",A.new]}),(0,d.jsxs)(I,{variant:"outline",className:"text-[10px] bg-red-50 text-red-700",children:["High: ",A.high]})]}),(0,d.jsxs)(L.Button,{size:"sm",variant:f?"secondary":"default",onClick:()=>h(!f),children:[(0,d.jsx)(q,{className:"h-4 w-4"}),f?"Hide Form":"Add Note"]})]})]}),(0,d.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,d.jsx)(O.Tabs,{value:o,onValueChange:e=>c(e),className:"flex-1",children:(0,d.jsxs)(O.TabsList,{className:"grid w-full grid-cols-5",children:[(0,d.jsx)(O.TabsTrigger,{value:"all",className:"text-xs",children:"All"}),(0,d.jsx)(O.TabsTrigger,{value:"new",className:"text-xs",children:"New"}),(0,d.jsx)(O.TabsTrigger,{value:"contacted",className:"text-xs",children:"Contacted"}),(0,d.jsx)(O.TabsTrigger,{value:"qualified",className:"text-xs",children:"Qualified"}),(0,d.jsx)(O.TabsTrigger,{value:"converted",className:"text-xs",children:"Converted"})]})}),(0,d.jsxs)(au,{value:b,onValueChange:j,children:[(0,d.jsx)(af,{className:"w-32 text-xs",children:(0,d.jsx)(am,{placeholder:"Filter"})}),(0,d.jsxs)(ah,{children:[(0,d.jsx)(ap,{value:"all",children:"All Leads"}),(0,d.jsx)(ap,{value:"followup",children:"Needs Follow-up"}),(0,d.jsx)(ap,{value:"high",children:"High Priority"})]})]})]})]}),(0,d.jsxs)(P.CardContent,{className:"flex-1 overflow-hidden",children:[(0,d.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-3 mb-3 space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Add New Note"}),f&&(0,d.jsx)(L.Button,{size:"sm",variant:"ghost",onClick:()=>{h(!1),w({content:"",type:"note",lead_id:""}),g(null)},children:""})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)(au,{value:y.type,onValueChange:e=>w({...y,type:e}),children:[(0,d.jsx)(af,{className:"text-xs",children:(0,d.jsx)(am,{placeholder:"Type"})}),(0,d.jsxs)(ah,{children:[(0,d.jsx)(ap,{value:"note",children:"Note"}),(0,d.jsx)(ap,{value:"task",children:"Task"}),(0,d.jsx)(ap,{value:"appointment",children:"Appointment"}),(0,d.jsx)(ap,{value:"lead",children:"Lead"})]})]}),(0,d.jsxs)(au,{value:x||"",onValueChange:e=>{g(e),w({...y,lead_id:e})},children:[(0,d.jsx)(af,{className:"text-xs flex-1",children:(0,d.jsx)(am,{placeholder:"Link to lead (optional)"})}),(0,d.jsx)(ah,{children:e.map(e=>(0,d.jsx)(ap,{value:e.id,children:e.contacts?.name||(0,z.formatPhoneNumber)(e.phone||"")},e.id))})]})]}),(0,d.jsx)(B,{placeholder:"Note content *",value:y.content,onChange:e=>w({...y,content:e.target.value}),rows:3,className:"text-sm"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(L.Button,{size:"sm",onClick:k,disabled:!y.content.trim(),className:"flex-1",children:"Save Note"}),(0,d.jsx)(L.Button,{size:"sm",variant:"outline",onClick:()=>{h(!1),w({content:"",type:"note",lead_id:""}),g(null)},children:"Cancel"})]})]}),(0,d.jsx)(eH,{className:"h-[calc(100%-1rem)]",children:l?(0,d.jsxs)("div",{className:"flex items-center justify-center h-32 text-muted-foreground",children:[(0,d.jsx)(eU,{className:"h-5 w-5 animate-spin mr-2"}),"Loading leads..."]}):0===S.length?(0,d.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,d.jsx)(eK,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,d.jsxs)("p",{children:["No ","all"===o?"leads":o," found"]}),(0,d.jsx)("p",{className:"text-xs mt-1",children:"Leads from missed calls will appear here"})]}):(0,d.jsx)("div",{className:"space-y-3 pr-3",children:S.map(t=>{var r;let n;return(0,d.jsxs)("div",{className:`p-3 rounded-lg border bg-card transition-colors hover:bg-secondary/50 ${t.follow_up_required?"border-l-4 border-l-orange-500":""}`,children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[(0,d.jsx)("span",{className:"font-medium text-sm truncate",children:t.contacts?.name||(0,z.formatPhoneNumber)(t.phone||"Unknown")}),(0,d.jsxs)("div",{className:"flex items-center gap-1 flex-wrap",children:[(0,d.jsx)(I,{variant:"outline",className:`text-[10px] px-2 py-0.5 ${function(e){switch(e){case"new":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"contacted":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"qualified":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";case"converted":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"lost":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}}(t.status)}`,children:t.status}),(0,d.jsx)(I,{variant:"outline",className:`text-[10px] px-2 py-0.5 ${function(e){switch(e){case"high":return"bg-red-100 text-red-800 border-red-300 dark:bg-red-900/30 dark:text-red-400 dark:border-red-800";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-800";case"low":return"bg-green-100 text-green-800 border-green-300 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800";default:return"bg-gray-100 text-gray-800 border-gray-300 dark:bg-gray-800 dark:text-gray-300"}}(t.priority)}`,children:t.priority}),(0,d.jsxs)(I,{variant:"outline",className:"text-[10px] px-2 py-0.5 flex items-center gap-1",children:[function(e){switch(e){case"missed_call":return(0,d.jsx)(v,{className:"h-3 w-3"});case"direct_call":return(0,d.jsx)(m.Phone,{className:"h-3 w-3"});case"sms":return(0,d.jsx)(p,{className:"h-3 w-3"});case"website":return(0,d.jsx)(eK,{className:"h-3 w-3"});case"referral":return(0,d.jsx)(V.User,{className:"h-3 w-3"});default:return(0,d.jsx)(eU,{className:"h-3 w-3"})}}(t.source),t.source.replace("_"," ")]}),t.follow_up_required&&(0,d.jsxs)(I,{variant:"outline",className:"text-[10px] px-2 py-0.5 bg-orange-50 text-orange-700 border-orange-300",children:[(0,d.jsx)(eY,{className:"h-3 w-3 mr-1"}),"Follow-up"]})]})]}),t.notes&&(0,d.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:t.notes}),(0,d.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground flex-wrap",children:[t.clients?.name&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(V.User,{className:"h-3 w-3"}),t.clients.name]}),t.phone&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(m.Phone,{className:"h-3 w-3"}),(0,z.formatPhoneNumber)(t.phone)]}),t.last_interaction_at&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(eV,{className:"h-3 w-3"}),"Last: ",R(t.last_interaction_at)]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(eq,{className:"h-3 w-3"}),"Created: ",R(t.created_at)]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,d.jsxs)(au,{value:t.status,onValueChange:e=>E(t.id,e),children:[(0,d.jsx)(af,{className:"h-7 text-xs w-32",children:(0,d.jsx)(am,{})}),(0,d.jsxs)(ah,{children:[(0,d.jsx)(ap,{value:"new",children:"New"}),(0,d.jsx)(ap,{value:"contacted",children:"Contacted"}),(0,d.jsx)(ap,{value:"qualified",children:"Qualified"}),(0,d.jsx)(ap,{value:"converted",children:"Converted"}),(0,d.jsx)(ap,{value:"lost",children:"Lost"})]})]}),(0,d.jsxs)(au,{value:t.priority,onValueChange:e=>_(t.id,e),children:[(0,d.jsx)(af,{className:"h-7 text-xs w-28",children:(0,d.jsx)(am,{})}),(0,d.jsxs)(ah,{children:[(0,d.jsx)(ap,{value:"high",children:"High"}),(0,d.jsx)(ap,{value:"medium",children:"Medium"}),(0,d.jsx)(ap,{value:"low",children:"Low"})]})]}),(0,d.jsx)(L.Button,{size:"sm",variant:t.follow_up_required?"default":"outline",className:"h-7 text-xs",onClick:()=>T(t.id,t.follow_up_required),children:t.follow_up_required?" Follow-up":"Add Follow-up"}),(0,d.jsx)(L.Button,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>{g(t.id),h(!0)},children:(0,d.jsx)(q,{className:"h-3 w-3"})})]})]}),(0,d.jsx)("div",{className:"text-right text-xs text-muted-foreground",children:(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1 justify-end",children:[(0,d.jsx)("span",{className:"font-medium",children:M(t.id).length}),(0,d.jsx)(eK,{className:"h-3 w-3"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1 justify-end",children:[(0,d.jsx)("span",{className:"font-medium",children:(r=t.id,n=e.find(e=>e.id===r),!n?.contact_id?[]:a.filter(e=>e.contact_id===n.contact_id)).length}),(0,d.jsx)(m.Phone,{className:"h-3 w-3"})]})]})})]}),M(t.id).length>0&&(0,d.jsx)("div",{className:"mt-3 pt-3 border-t border-border",children:(0,d.jsxs)("div",{className:"space-y-2",children:[M(t.id).slice(0,2).map(e=>(0,d.jsxs)("div",{className:"text-xs bg-secondary/30 rounded p-2",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,d.jsx)(I,{variant:"outline",className:"text-[9px]",children:e.type.replace("_"," ")}),(0,d.jsx)("span",{className:"text-muted-foreground",children:R(e.created_at)})]}),(0,d.jsx)("p",{className:"text-sm",children:e.content})]},e.id)),M(t.id).length>2&&(0,d.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["+",M(t.id).length-2," more notes"]})]})})]},t.id)})})})]})]})}let ay=(0,f.default)("PhoneIncoming",[["polyline",{points:"16 2 16 8 22 8",key:"1ygljm"}],["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),aw=(0,f.default)("PhoneOutgoing",[["polyline",{points:"22 8 22 2 16 2",key:"1g204g"}],["line",{x1:"16",x2:"22",y1:"8",y2:"2",key:"1ggias"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ab=(0,f.default)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),aj=(0,f.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var aN=e.i(15278);function aC(){let[e,t]=(0,u.useState)([]),[r,n]=(0,u.useState)([]),[a,s]=(0,u.useState)([]),[l,i]=(0,u.useState)(!0),[o,c]=(0,u.useState)("all"),f=(0,$.createClient)();async function h(){i(!0);try{let{data:e,error:r}=await f.from("interactions").select(`
          *,
          contacts (name, phone),
          clients (name)
        `).order("created_at",{ascending:!1}).limit(100);!r&&e?t(e):console.error("Error fetching interactions:",r);let{data:a,error:l}=await f.from("scheduled_followups").select(`
          *,
          contacts (name, phone)
        `).order("scheduled_for",{ascending:!0}).limit(50);!l&&a?n(a):console.error("Error fetching follow-ups:",l);let{data:i,error:o}=await f.from("leads").select(`
          *,
          contacts (name, phone)
        `).eq("follow_up_required",!0).eq("status","new").order("created_at",{ascending:!1}).limit(50);!o&&i?s(i):console.error("Error fetching leads:",o)}catch(e){console.error("Error in fetchData:",e)}finally{i(!1)}}(0,u.useEffect)(()=>{h();let e=f.channel("interactions-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"interactions"},()=>{h()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"interactions"},()=>{h()}).subscribe(),t=f.channel("followups-changes").on("postgres_changes",{event:"*",schema:"public",table:"scheduled_followups"},()=>{h()}).subscribe(),r=f.channel("leads-changes").on("postgres_changes",{event:"*",schema:"public",table:"leads"},()=>{h()}).subscribe();return()=>{f.removeChannel(e),f.removeChannel(t),f.removeChannel(r)}},[]);let x=e.filter(e=>"all"===o||("calls"===o?"call"===e.type:"sms"===o?"sms"===e.type:"voicemail"===o?"voicemail"===e.type:"missed"===o?!0===e.is_missed_call:"auto"!==o||!0===e.is_auto_response));function g(e){let t=e.replace(/\D/g,"");if(11===t.length&&t.startsWith("1")){let e=t.match(/^1(\d{3})(\d{3})(\d{4})$/);if(e)return`+1 (${e[1]}) ${e[2]}-${e[3]}`}if(10===t.length){let e=t.match(/^(\d{3})(\d{3})(\d{4})$/);if(e)return`(${e[1]}) ${e[2]}-${e[3]}`}return e}function w(e){if(!e||0===e)return"--";if(e<60)return`${e}s`;let t=Math.floor(e/60);if(t<60)return`${t}m ${e%60}s`;let r=Math.floor(t/60);return`${r}h ${t%60}m`}function b(e){let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/6e4);return r<1?"Just now":r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}let j={total:e.length,missed:e.filter(e=>e.is_missed_call).length,auto:e.filter(e=>e.is_auto_response).length,pendingFollowups:r.filter(e=>"scheduled"===e.status).length,newLeads:a.filter(e=>"new"===e.status).length};return(0,d.jsxs)(P.Card,{className:"h-full flex flex-col",children:[(0,d.jsx)(P.CardHeader,{className:"pb-3",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(P.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,d.jsx)(m.Phone,{className:"h-5 w-5 text-primary"}),"Activity Dashboard"]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("div",{className:"text-xs flex items-center gap-3",children:[(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),j.total," total"]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),j.missed," missed"]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),j.auto," auto"]})]}),(0,d.jsx)(L.Button,{variant:"ghost",size:"icon",onClick:h,disabled:l,children:(0,d.jsx)(eF,{className:`h-4 w-4 ${l?"animate-spin":""}`})})]})]})}),(0,d.jsxs)(P.CardContent,{className:"flex-1 flex flex-col pt-0",children:[(0,d.jsxs)(O.Tabs,{value:o,onValueChange:c,className:"flex-1 flex flex-col",children:[(0,d.jsxs)(O.TabsList,{className:"grid w-full grid-cols-6 mb-3",children:[(0,d.jsx)(O.TabsTrigger,{value:"all",className:"text-xs",children:"All"}),(0,d.jsx)(O.TabsTrigger,{value:"calls",className:"text-xs",children:"Calls"}),(0,d.jsx)(O.TabsTrigger,{value:"sms",className:"text-xs",children:"SMS"}),(0,d.jsx)(O.TabsTrigger,{value:"voicemail",className:"text-xs",children:"Voicemail"}),(0,d.jsx)(O.TabsTrigger,{value:"missed",className:"text-xs",children:"Missed"}),(0,d.jsx)(O.TabsTrigger,{value:"auto",className:"text-xs",children:"Auto"})]}),(0,d.jsx)(O.TabsContent,{value:o,className:"flex-1 mt-0",children:(0,d.jsx)(eH,{className:"h-[280px]",children:l?(0,d.jsxs)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:[(0,d.jsx)(eF,{className:"h-5 w-5 animate-spin mr-2"}),"Loading activity..."]}):0===x.length?(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground text-sm",children:[(0,d.jsx)(m.Phone,{className:"h-8 w-8 mb-2 opacity-50"}),(0,d.jsxs)("p",{children:["No ","all"===o?"activity":o," yet"]}),(0,d.jsx)("p",{className:"text-xs mt-1",children:"missed"===o?"Missed calls will trigger automatic SMS follow-ups":"All calls and messages will appear here"})]}):(0,d.jsx)("div",{className:"space-y-2",children:x.map(e=>{var t,r;return(0,d.jsx)("div",{className:"p-3 rounded-lg bg-secondary/30 hover:bg-secondary/50 transition-colors cursor-pointer group",onClick:()=>{console.log("Interaction details:",e)},children:(0,d.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,d.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"p-2 rounded-full bg-secondary/50 group-hover:bg-secondary",children:"sms"===(t=e).type?t.is_auto_response?(0,d.jsx)(aN.Mail,{className:"h-4 w-4 text-orange-500"}):(0,d.jsx)(p,{className:"h-4 w-4"}):"voicemail"===t.type?(0,d.jsx)(y,{className:"h-4 w-4 text-purple-500"}):t.is_missed_call?(0,d.jsx)(v,{className:"h-4 w-4 text-red-500"}):"inbound"===t.direction?(0,d.jsx)(ay,{className:"h-4 w-4 text-green-500"}):(0,d.jsx)(aw,{className:"h-4 w-4 text-blue-500"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,d.jsx)("span",{className:"font-medium text-sm truncate",children:e.contacts?.name||g(e.from_number)}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:["inbound"===e.direction?(0,d.jsx)(ab,{className:"h-3 w-3 text-muted-foreground"}):(0,d.jsx)(aj,{className:"h-3 w-3 text-muted-foreground"}),e.is_auto_response&&(0,d.jsx)(I,{variant:"outline",className:"text-[8px] px-1 py-0 h-4 bg-orange-500/10 text-orange-600 border-orange-300",children:"Auto"})]})]}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:"sms"===(r=e).type&&r.content?r.content.length>50?r.content.substring(0,50)+"...":r.content:"call"===r.type?r.is_missed_call?"Missed call":r.answered?`Answered (${w(r.duration_seconds)})`:"Call":"voicemail"===r.type?`Voicemail (${w(r.duration_seconds)})`:`${r.type} ${r.direction}`}),(0,d.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.clients?.name&&(0,d.jsx)("span",{className:"inline-block mr-2 px-1.5 py-0.5 bg-primary/10 rounded text-primary",children:e.clients.name}),b(e.created_at)]})]})]}),(0,d.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,d.jsx)(I,{variant:"outline",className:`text-[10px] px-2 py-0.5 ${function(e){switch(e){case"completed":case"delivered":case"received":case"answered":case"sent":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"ringing":case"in-progress":case"queued":case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"no-answer":case"busy":case"failed":case"undelivered":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}}(e.status)}`,children:e.status.replace("-"," ")}),(0,d.jsxs)("div",{className:"flex items-center gap-1 mt-1.5 text-xs text-muted-foreground justify-end",children:[(0,d.jsx)(eV,{className:"h-3 w-3"}),"call"===e.type||"voicemail"===e.type?w(e.duration_seconds):b(e.created_at)]})]})]})},e.id)})})})})]}),(r.length>0||a.length>0)&&(0,d.jsx)("div",{className:"mt-4 pt-4 border-t border-border",children:(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[(0,d.jsx)(eV,{className:"h-4 w-4 text-blue-500"}),"Scheduled Follow-ups",j.pendingFollowups>0&&(0,d.jsx)(I,{variant:"outline",className:"ml-1 text-[10px] px-1.5 py-0 h-4",children:j.pendingFollowups})]}),(0,d.jsx)(eH,{className:"h-[80px]",children:0===r.filter(e=>"scheduled"===e.status).length?(0,d.jsx)("p",{className:"text-xs text-muted-foreground italic",children:"No scheduled follow-ups"}):(0,d.jsx)("div",{className:"space-y-1.5",children:r.filter(e=>"scheduled"===e.status).slice(0,3).map(e=>(0,d.jsxs)("div",{className:"p-2 rounded-md bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 text-xs",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"truncate flex-1 mr-2",children:e.contacts?.name||g(e.contacts?.phone||"Unknown")}),(0,d.jsx)(I,{variant:"outline",className:"text-[9px] px-1.5 py-0 h-4 bg-blue-500/10 text-blue-600",children:e.type})]}),(0,d.jsx)("p",{className:"text-muted-foreground text-[10px] mt-0.5",children:new Date(e.scheduled_for).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},e.id))})})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[(0,d.jsx)(V.User,{className:"h-4 w-4 text-green-500"}),"New Leads",j.newLeads>0&&(0,d.jsx)(I,{variant:"outline",className:"ml-1 text-[10px] px-1.5 py-0 h-4",children:j.newLeads})]}),(0,d.jsx)(eH,{className:"h-[80px]",children:0===a.length?(0,d.jsx)("p",{className:"text-xs text-muted-foreground italic",children:"No new leads"}):(0,d.jsx)("div",{className:"space-y-1.5",children:a.slice(0,3).map(e=>(0,d.jsxs)("div",{className:`p-2 rounded-md border text-xs ${"high"===e.priority?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"medium"===e.priority?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"}`,children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"truncate flex-1 mr-2",children:e.contacts?.name||g(e.phone||"Unknown")}),(0,d.jsx)(I,{variant:"outline",className:`text-[9px] px-1.5 py-0 h-4 ${"high"===e.priority?"bg-red-500/10 text-red-600":"medium"===e.priority?"bg-yellow-500/10 text-yellow-600":"bg-green-500/10 text-green-600"}`,children:e.priority})]}),(0,d.jsx)("p",{className:"text-muted-foreground text-[10px] mt-0.5 capitalize",children:e.source.replace("_"," ")})]},e.id))})})]})]})})]})]})}let aS=(0,f.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ak=(0,f.default)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),aE=(0,f.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var a_=e.i(68793);let aT=(0,f.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),aR=(0,f.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),aL=(0,f.default)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),aP=(0,f.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);function aM(){let[e,t]=(0,u.useState)([]),[r,n]=(0,u.useState)(!1),[a,s]=(0,u.useState)(!1),[l,i]=(0,u.useState)(null),o=(0,u.useCallback)(async e=>{n(!0);try{let r=URL.createObjectURL(e),n={id:Date.now().toString(),name:e.name,size:e.size,type:e.type,url:r,createdAt:new Date};t(e=>[n,...e]),F.toast.success(`File added: ${e.name}`)}catch(e){F.toast.error("Upload failed")}finally{n(!1)}},[]),c=(0,u.useCallback)(e=>{t(t=>{let r=t.find(t=>t.id===e);return r&&(URL.revokeObjectURL(r.url),F.toast.success("File removed")),t.filter(t=>t.id!==e)}),l?.id===e&&i(null)},[l]),m=(0,u.useCallback)(e=>{let t=document.createElement("a");t.href=e.url,t.download=e.name,t.click(),F.toast.success("Download started")},[]),f=(0,u.useCallback)(e=>{e.preventDefault(),s(!1),Array.from(e.dataTransfer.files).forEach(e=>o(e))},[o]),h=(0,u.useCallback)(e=>{Array.from(e.target.files||[]).forEach(e=>o(e)),e.target.value=""},[o]),p=e=>e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`;return(0,d.jsxs)(P.Card,{className:"h-full flex flex-col overflow-hidden",children:[(0,d.jsx)(P.CardHeader,{className:"flex-shrink-0 pb-3",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(P.CardTitle,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,d.jsx)(aS,{className:"h-5 w-5"}),"File Manager"]}),(0,d.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.length," file",1!==e.length?"s":""]})]})}),(0,d.jsxs)(P.CardContent,{className:"flex-1 flex flex-col gap-4 min-h-0 overflow-hidden p-4",children:[(0,d.jsxs)("div",{onDragOver:e=>{e.preventDefault(),s(!0)},onDragLeave:()=>s(!1),onDrop:f,className:`
            relative border-2 border-dashed rounded-xl p-6 transition-all flex-shrink-0
            ${a?"border-primary bg-primary/5 scale-[0.98]":"border-border hover:border-primary/50 hover:bg-accent/5"}
            ${r?"opacity-50 pointer-events-none":"cursor-pointer"}
          `,children:[(0,d.jsx)("input",{type:"file",multiple:!0,onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:r}),(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 text-center",children:[(0,d.jsx)("div",{className:`
              h-12 w-12 rounded-xl flex items-center justify-center transition-all
              ${a?"bg-primary text-white scale-110":"bg-primary/10 text-primary"}
            `,children:(0,d.jsx)(aS,{className:"h-6 w-6"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-semibold text-sm",children:r?"Adding...":a?"Drop files here":"Drop or click to add files"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Images, documents, videos & more"})]})]})]}),(0,d.jsx)("div",{className:"flex-1 min-h-0 -mr-4",children:(0,d.jsx)(eH,{className:"h-full pr-4",children:(0,d.jsx)("div",{className:"space-y-2",children:0===e.length?(0,d.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,d.jsx)(ak,{className:"h-10 w-10 mx-auto mb-2 opacity-20"}),(0,d.jsx)("p",{className:"text-sm",children:"No files yet"}),(0,d.jsx)("p",{className:"text-xs mt-1",children:"Add files to get started"})]}):e.map(e=>{var t;return(0,d.jsxs)("div",{className:`
                      group flex items-center gap-2 p-2.5 rounded-lg border transition-all
                      ${l?.id===e.id?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/5"}
                    `,children:[(0,d.jsx)("div",{className:"flex-shrink-0 h-9 w-9 rounded-lg bg-primary/10 text-primary flex items-center justify-center",children:(t=e.type).startsWith("image/")?(0,d.jsx)(aT,{className:"h-4 w-4"}):t.startsWith("video/")?(0,d.jsx)(aR,{className:"h-4 w-4"}):t.startsWith("audio/")?(0,d.jsx)(aL,{className:"h-4 w-4"}):t.includes("zip")||t.includes("rar")?(0,d.jsx)(aP,{className:"h-4 w-4"}):(0,d.jsx)(eK,{className:"h-4 w-4"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,d.jsx)("p",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),(0,d.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,d.jsx)("p",{className:"text-xs text-muted-foreground whitespace-nowrap",children:p(e.size)}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:""}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground whitespace-nowrap",children:e.createdAt.toLocaleDateString()})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-0.5 flex-shrink-0 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,d.jsx)(L.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:()=>i(e),title:"Preview",children:(0,d.jsx)(a_.Eye,{className:"h-3.5 w-3.5"})}),(0,d.jsx)(L.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:()=>m(e),title:"Download",children:(0,d.jsx)(aE,{className:"h-3.5 w-3.5"})}),(0,d.jsx)(L.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>c(e.id),title:"Delete",children:(0,d.jsx)(U,{className:"h-3.5 w-3.5"})})]})]},e.id)})})})}),e.length>0&&(0,d.jsxs)("div",{className:"flex-shrink-0 text-xs text-muted-foreground text-center pt-2 border-t",children:["Total: ",p(e.reduce((e,t)=>e+t.size,0))]})]}),l&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>i(null),children:(0,d.jsxs)("div",{className:"bg-background rounded-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h3",{className:"font-semibold truncate",children:l.name}),(0,d.jsxs)("p",{className:"text-xs text-muted-foreground",children:[p(l.size),"  ",l.type]})]}),(0,d.jsx)(L.Button,{size:"sm",variant:"ghost",onClick:()=>i(null),children:(0,d.jsx)(Y,{className:"h-4 w-4"})})]}),(0,d.jsx)("div",{className:"p-4",children:l.type.startsWith("image/")?(0,d.jsx)("img",{src:l.url,alt:l.name,className:"w-full h-auto rounded-lg"}):(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(ak,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Preview not available"}),(0,d.jsxs)(L.Button,{onClick:()=>m(l),children:[(0,d.jsx)(aE,{className:"h-4 w-4 mr-2"}),"Download File"]})]})})]})})]})}let aA=(0,$.createClient)(),aD="18444073511";function az(){let e=(0,W.useRouter)(),[t,r]=(0,u.useState)("overview"),[n,a]=(0,u.useState)(!0),[s,l]=(0,u.useState)(!0),[i,o]=(0,u.useState)(""),[c,f]=(0,u.useState)([]),[A,D]=(0,u.useState)([]),[H,I]=(0,u.useState)([]),[$,q]=(0,u.useState)([]),[V,U]=(0,u.useState)("today"),[K,Y]=(0,u.useState)(null),[X,Z]=(0,u.useState)([]),[G,Q]=(0,u.useState)(new Date),[J,ee]=(0,u.useState)(""),[et,er]=(0,u.useState)(!1),[en,ea]=(0,u.useState)(0),[es,el]=(0,u.useState)(null),[ei,eo]=(0,u.useState)(!1),[ec,ed]=(0,u.useState)(!1),[eu,em]=(0,u.useState)(""),[ef,eh]=(0,u.useState)(null),[ep,ex]=(0,u.useState)(""),[eg,ev]=(0,u.useState)(null),[ey,ew]=(0,u.useState)(!1),[eb,ej]=(0,u.useState)(!1),[eN,eC]=(0,u.useState)(!1);(0,u.useEffect)(()=>{let e=setInterval(()=>{Q(new Date)},1e3);return()=>clearInterval(e)},[]),(0,u.useEffect)(()=>{eN?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[eN]),(0,u.useEffect)(()=>{K&&!eb&&(F.toast.success(`Welcome back, ${K?.user_metadata?.name||K?.email?.split("@")[0]||"User"}!`),ej(!0))},[K,eb]),(0,u.useEffect)(()=>{(async()=>{l(!0);try{let{data:{session:t},error:r}=await aA.auth.getSession();if(r)throw console.error("Session error:",r),r;if(!t){console.log("No session found, redirecting to login"),e.push("/login");return}console.log("Session found for user:",t.user.email),Y(t.user),await ek()}catch(t){console.error("Auth error:",t),e.push("/login")}finally{l(!1)}})();let{data:{subscription:t}}=aA.auth.onAuthStateChange((t,r)=>{console.log("Auth state changed:",t),"SIGNED_OUT"===t?(console.log("User signed out, redirecting to login"),Y(null),f([]),D([]),I([]),e.push("/login")):"SIGNED_IN"===t&&r&&(console.log("User signed in:",r.user.email),Y(r.user),ek())});return()=>{t.unsubscribe()}},[e]);let eS=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],ek=(0,u.useCallback)(async()=>{a(!0);try{let{data:e}=await aA.from("interactions").select(`
          *,
          contacts (name, phone),
          clients (name)
        `).order("created_at",{ascending:!1}).limit(20);e&&f(e);let{data:t}=await aA.from("leads").select("*").order("created_at",{ascending:!1}).limit(8);t&&D(t);let{data:r}=await aA.from("contacts").select("*").order("created_at",{ascending:!1}).limit(12);r&&I(r),eE(e||[],t||[]),Z([{id:1,type:"warning",message:"3 missed calls need follow-up",time:"5 min ago"},{id:2,type:"info",message:"New lead from website form",time:"15 min ago"},{id:3,type:"success",message:"Monthly report generated",time:"1 hour ago"},{id:4,type:"info",message:`Your number ${(0,z.formatPhoneNumber)(aD)} is active`,time:"2 hours ago"}])}catch(e){console.error("Error fetching dashboard data:",e),F.toast.error("Failed to load dashboard data")}finally{a(!1)}},[]),eE=(e,t)=>{let r=e.filter(e=>"call"===e.type).length,n=e.filter(e=>e.is_missed_call).length,a=e.filter(e=>"sms"===e.type).length,s=t.filter(e=>"new"===e.status).length,l=r-n,i=r>0?Math.round(l/r*100):0;q([{label:"Total Calls",value:r,change:12,icon:(0,d.jsx)(m.Phone,{className:"h-4 w-4"}),color:"bg-blue-500"},{label:"Answer Rate",value:`${i}%`,change:i>80?5:-3,icon:(0,d.jsx)(g,{className:"h-4 w-4"}),color:"bg-green-500"},{label:"SMS Sent",value:a,change:23,icon:(0,d.jsx)(p,{className:"h-4 w-4"}),color:"bg-amber-500"},{label:"Missed Calls",value:n,change:-5,icon:(0,d.jsx)(v,{className:"h-4 w-4"}),color:"bg-red-500"},{label:"New Leads",value:s,change:8,icon:(0,d.jsx)(h,{className:"h-4 w-4"}),color:"bg-purple-500"},{label:"Voicemails",value:e.filter(e=>"voicemail"===e.type).length,change:2,icon:(0,d.jsx)(y,{className:"h-4 w-4"}),color:"bg-indigo-500"}])},e_=async()=>{if(J||et)if(et)er(!1),eo(!1),ed(!1),es&&(clearInterval(es),el(null)),ea(0),ee(""),em(""),F.toast.success("Call ended");else{er(!0),F.toast.success(`Calling ${(0,z.formatPhoneNumber)(J)}...`),el(setInterval(()=>{ea(e=>e+1)},1e3));try{await aA.from("interactions").insert({type:"call",direction:"outbound",from_number:aD,to_number:J,status:"ringing",is_missed_call:!1,created_at:new Date().toISOString(),client_id:K?.id||null,contact_id:ef?.id||null}),ef&&await aA.from("contacts").update({last_interaction:new Date().toISOString()}).eq("id",ef.id)}catch(e){console.error("Error logging call:",e)}}},eT=async()=>{if(!J||!ep.trim())return void F.toast.error("Please enter a phone number and message");try{await aA.from("interactions").insert({type:"sms",direction:"outbound",from_number:aD,to_number:J,status:"sent",content:ep,is_auto_response:!1,created_at:new Date().toISOString(),client_id:K?.id||null,contact_id:ef?.id||null}),ef&&await aA.from("contacts").update({last_interaction:new Date().toISOString()}).eq("id",ef.id),ex(""),F.toast.success("SMS sent successfully"),ek()}catch(e){console.error("Error sending SMS:",e),F.toast.error("Failed to send SMS")}},eR=(0,z.debounce)(e=>{o(e)},300),eL=async()=>{try{console.log("Logging out...");let{error:t}=await aA.auth.signOut();if(t){console.error("Logout error:",t),F.toast.error("Failed to logout. Please try again.");return}console.log("Logout successful"),F.toast.success("Logged out successfully"),Y(null),f([]),D([]),I([]),q([]),setTimeout(()=>{e.push("/login")},100)}catch(e){console.error("Logout exception:",e),F.toast.error("An error occurred during logout")}};return(c.filter(e=>!i||e.from_number?.includes(i)||e.contacts?.name?.toLowerCase().includes(i.toLowerCase())||e.type?.includes(i.toLowerCase())),n||s)?(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50",children:(0,d.jsxs)("div",{className:"text-center space-y-4",children:[(0,d.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-cyan-600 border-t-transparent mx-auto"}),(0,d.jsx)("p",{className:"text-muted-foreground font-medium",children:s?"Checking authentication...":"Loading callaback API..."})]})}):(0,d.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[(0,d.jsx)(F.Toaster,{position:"top-center",richColors:!0}),(0,d.jsx)("header",{className:"border-b border-slate-200 bg-white/80 backdrop-blur-xl sticky top-0 z-50 shadow-sm",children:(0,d.jsx)("div",{className:"max-w-[2000px] mx-auto px-4 sm:px-6 py-3",children:(0,d.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,d.jsx)("div",{className:"h-11 w-11 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-md flex-shrink-0",children:(0,d.jsx)(m.Phone,{className:"h-6 w-6 text-white"})}),(0,d.jsxs)("div",{className:"min-w-0",children:[(0,d.jsx)("h1",{className:"font-bold text-xl bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent",children:"callaback"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-cyan-700",children:(0,z.formatPhoneNumber)(aD)}),(0,d.jsx)(L.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText((0,z.formatPhoneNumber)(aD)),ev(aD),F.toast.success("Phone number copied"),setTimeout(()=>ev(null),2e3)},title:"Copy phone number",children:eg===aD?(0,d.jsx)(b,{className:"h-3 w-3 text-green-500"}):(0,d.jsx)(w,{className:"h-3 w-3"})})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsxs)("div",{className:"hidden md:flex items-center gap-3 px-4 py-2.5 bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl border-2 border-cyan-200 shadow-md",children:[(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("p",{className:"text-xl font-mono font-bold tracking-tight text-slate-800 tabular-nums",children:G.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),(0,d.jsx)("p",{className:"text-xs text-slate-600 font-medium",children:G.toLocaleDateString("en-GB",{weekday:"short",day:"2-digit",month:"short",year:"numeric"})})]}),(0,d.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})]}),(0,d.jsxs)("div",{className:"hidden lg:flex items-center gap-3 px-4 py-2 bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl border border-slate-200 shadow-sm",children:[(0,d.jsx)("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold shadow-md",children:(K?.user_metadata?.name||K?.email)?.[0]?.toUpperCase()||"U"}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-slate-800 truncate max-w-[150px]",children:K?.user_metadata?.name||K?.email?.split("@")[0]}),(0,d.jsx)("p",{className:"text-xs text-slate-600 truncate max-w-[150px]",children:K?.email})]})]}),(0,d.jsx)(L.Button,{variant:"outline",size:"sm",onClick:()=>eC(!eN),className:"h-10 px-3 border-slate-200 hover:bg-slate-100",title:eN?"Switch to light mode":"Switch to dark mode",children:eN?(0,d.jsx)(R,{className:"h-4 w-4 text-amber-500"}):(0,d.jsx)(T,{className:"h-4 w-4 text-slate-600"})}),(0,d.jsxs)(L.Button,{variant:"outline",size:"sm",onClick:eL,className:"h-10 px-4 border-red-200 hover:border-red-500 hover:bg-red-50 text-slate-700 hover:text-red-700",children:[(0,d.jsx)(j,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}),(0,d.jsxs)("main",{className:"max-w-[2000px] mx-auto p-4 pb-8 w-full",children:[(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,d.jsx)(M.Input,{placeholder:"Search calls, leads, contacts, messages...",className:"pl-9 w-full",onChange:e=>eR(e.target.value)})]})}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)(O.Tabs,{value:V,onValueChange:U,className:"w-full",children:(0,d.jsxs)(O.TabsList,{className:"grid w-full grid-cols-5",children:[(0,d.jsx)(O.TabsTrigger,{value:"today",className:"text-xs",children:"Today"}),(0,d.jsx)(O.TabsTrigger,{value:"yesterday",className:"text-xs",children:"Yesterday"}),(0,d.jsx)(O.TabsTrigger,{value:"week",className:"text-xs",children:"Week"}),(0,d.jsx)(O.TabsTrigger,{value:"month",className:"text-xs",children:"Month"}),(0,d.jsx)(O.TabsTrigger,{value:"all",className:"text-xs",children:"All"})]})})}),(0,d.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-4",children:$.map((e,t)=>(0,d.jsx)(P.Card,{className:"hover:shadow transition-shadow",children:(0,d.jsx)(P.CardContent,{className:"p-3",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:e.label}),(0,d.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,d.jsx)("p",{className:"text-lg font-bold",children:e.value}),e.change&&(0,d.jsxs)("span",{className:(0,z.cn)("text-[10px] font-medium",e.change>0?"text-green-600":"text-red-600"),children:[e.change>0?"+":"",e.change,"%"]})]})]}),(0,d.jsx)("div",{className:(0,z.cn)("h-8 w-8 rounded-full flex items-center justify-center",e.color,"text-white"),children:e.icon})]})})},t))}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 min-h-[600px]",children:[(0,d.jsxs)("div",{className:"lg:col-span-3 flex flex-col gap-3",children:[(0,d.jsxs)(P.Card,{className:"flex-shrink-0",children:[(0,d.jsx)(P.CardHeader,{className:"pb-2 px-4 pt-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(P.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,d.jsx)(m.Phone,{className:"h-4 w-4 text-primary"}),"Quick Dial"]}),(0,d.jsx)(L.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>ew(!ey),title:ey?"Compact view":"Expand dialer",children:(0,d.jsx)(_,{className:"h-3 w-3"})})]})}),(0,d.jsxs)(P.CardContent,{className:"p-4 pt-0",children:[(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,d.jsx)("label",{className:"text-xs font-medium",children:"Number"}),J&&(0,d.jsx)(L.Button,{variant:"ghost",size:"icon",onClick:()=>{em(e=>e.slice(0,-1)),ee(e=>e.slice(0,-1))},className:"h-5 w-5",children:(0,d.jsx)(E,{className:"h-3 w-3"})})]}),(0,d.jsx)("div",{className:"text-lg font-mono text-center p-2 bg-secondary/30 rounded border",children:(0,z.formatPhoneNumber)(J)||"Enter number"})]}),(0,d.jsx)("div",{className:(0,z.cn)("grid grid-cols-3 gap-1.5 mb-3",""),children:(ey?eS:eS.slice(0,6)).map(({digit:e,letters:t})=>(0,d.jsxs)(L.Button,{variant:"secondary",className:"h-8 flex flex-col items-center justify-center p-0 text-xs hover:bg-primary/10",onClick:()=>{eu.length<20&&(em(t=>t+e),ee(t=>t+e))},disabled:et,children:[(0,d.jsx)("span",{className:"font-bold",children:e}),t&&(0,d.jsx)("span",{className:"text-[6px] text-muted-foreground",children:t})]},e))}),(0,d.jsxs)("div",{className:"flex items-center justify-center gap-1.5",children:[(0,d.jsx)(L.Button,{size:"icon",className:(0,z.cn)("h-10 w-10 rounded-full",et?"bg-destructive hover:bg-destructive/90 animate-pulse":J?"bg-primary hover:bg-primary/90":"bg-primary/30 cursor-not-allowed"),onClick:e_,disabled:!J&&!et,children:(0,d.jsx)(m.Phone,{className:"h-4 w-4"})}),et&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.Button,{variant:"outline",size:"icon",className:(0,z.cn)("h-8 w-8 rounded-full",ei?"bg-destructive/20 border-destructive text-destructive":"hover:bg-primary/10"),onClick:()=>eo(!ei),children:ei?(0,d.jsx)(C,{className:"h-3 w-3"}):(0,d.jsx)(N,{className:"h-3 w-3"})}),(0,d.jsx)(L.Button,{variant:"outline",size:"icon",className:(0,z.cn)("h-8 w-8 rounded-full",ec?"bg-primary/20 border-primary text-primary":"hover:bg-primary/10"),onClick:()=>ed(!ec),children:ec?(0,d.jsx)(S,{className:"h-3 w-3"}):(0,d.jsx)(k,{className:"h-3 w-3"})})]})]}),et&&(0,d.jsx)("div",{className:"text-center mt-1.5",children:(0,d.jsx)("p",{className:"text-xs font-mono",children:(0,z.formatDuration)(en)})})]})]}),(0,d.jsxs)(P.Card,{className:"flex-shrink-0",children:[(0,d.jsx)(P.CardHeader,{className:"pb-2 px-4 pt-4",children:(0,d.jsxs)(P.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,d.jsx)(p,{className:"h-4 w-4 text-primary"}),"Quick SMS"]})}),(0,d.jsxs)(P.CardContent,{className:"p-4 pt-0",children:[(0,d.jsx)(B,{placeholder:"Type SMS message...",value:ep,onChange:e=>ex(e.target.value),rows:2,className:"text-sm mb-2 resize-none"}),(0,d.jsxs)(L.Button,{size:"sm",className:"w-full",onClick:eT,disabled:!J||!ep.trim(),children:[(0,d.jsx)(p,{className:"h-3 w-3 mr-2"}),"Send SMS"]})]})]}),(0,d.jsx)("div",{className:"h-[450px]",children:(0,d.jsx)(aM,{})})]}),(0,d.jsxs)("div",{className:"lg:col-span-5 flex flex-col gap-3",children:[(0,d.jsx)("div",{className:"h-[380px]",children:(0,d.jsx)(eO,{contacts:H.map(e=>({id:e.id,name:e.name,phone:e.phone,email:e.email,company:e.company,createdAt:new Date(e.created_at)})),onAddContact:async e=>{try{let{data:t,error:r}=await aA.from("contacts").insert({name:e.name,phone:e.phone,email:e.email,company:e.company,created_at:new Date().toISOString()}).select().single();if(r)throw r;F.toast.success("Contact added successfully"),ek()}catch(e){console.error("Error adding contact:",e),F.toast.error("Failed to add contact")}},onUpdateContact:async(e,t)=>{try{let{error:r}=await aA.from("contacts").update(t).eq("id",e);if(r)throw r;F.toast.success("Contact updated successfully"),ek()}catch(e){console.error("Error updating contact:",e),F.toast.error("Failed to update contact")}},onDeleteContact:async e=>{try{let{error:t}=await aA.from("contacts").delete().eq("id",e);if(t)throw t;F.toast.success("Contact deleted successfully"),ek()}catch(e){console.error("Error deleting contact:",e),F.toast.error("Failed to delete contact")}},onSelectContact:e=>{ee(e.phone),em(e.phone.replace(/\D/g,"")),eh(e)},selectedContactId:ef?.id})}),(0,d.jsx)("div",{className:"h-[650px]",children:(0,d.jsx)(eW,{sessionId:K?.id||"user-session",identity:K?.email||"User",phoneNumber:aD,onSessionChange:()=>{}})})]}),(0,d.jsxs)("div",{className:"lg:col-span-4 flex flex-col gap-3",children:[(0,d.jsx)("div",{className:"h-[380px]",children:(0,d.jsx)(aC,{})}),(0,d.jsx)("div",{className:"h-[650px]",children:(0,d.jsx)(av,{})})]})]})]})]})}e.s(["default",()=>az],31713)}]);