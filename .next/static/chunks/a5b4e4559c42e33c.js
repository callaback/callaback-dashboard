(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(29511),s=e.i(58138),a=e.i(79971),r=e.i(10965);let l=(0,r.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),n=(0,r.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),i=(0,r.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),o=(0,r.default)("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),c=(0,r.default)("PhoneMissed",[["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["line",{x1:"16",x2:"22",y1:"2",y2:"8",key:"13zxdn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),d=(0,r.default)("Voicemail",[["circle",{cx:"6",cy:"12",r:"4",key:"1ehtga"}],["circle",{cx:"18",cy:"12",r:"4",key:"4vafl8"}],["line",{x1:"6",x2:"18",y1:"16",y2:"16",key:"pmt8us"}]]),m=(0,r.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),u=(0,r.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),h=(0,r.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),x=(0,r.default)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),p=(0,r.default)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),g=(0,r.default)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),f=(0,r.default)("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),v=(0,r.default)("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]),y=(0,r.default)("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),b=(0,r.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),j=(0,r.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var w=e.i(67881),N=e.i(70065),k=e.i(23750),S=e.i(3025),C=e.i(94237),_=e.i(47163);let T=(0,C.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function M({className:e,variant:s,asChild:a=!1,...r}){let l=a?S.Slot:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,_.cn)(T({variant:s}),e),...r})}var E=e.i(27341);function L({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,_.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}var z=e.i(22036),P=e.i(20755),D=e.i(16755);let R=(0,r.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var A=e.i(84244);let I=(0,r.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),$=(0,r.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),H=(0,r.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var B=e.i(40034),q=e.i(80083),U=e.i(56055),V=e.i(22373),O=e.i(6462),F=e.i(61008),W=e.i(57722),X=e.i(78896),Y="ScrollArea",[K,G]=(0,U.createContextScope)(Y),[Z,J]=K(Y),Q=s.forwardRef((e,a)=>{let{__scopeScrollArea:r,type:l="hover",dir:n,scrollHideDelay:i=600,...o}=e,[c,d]=s.useState(null),[m,u]=s.useState(null),[h,x]=s.useState(null),[p,g]=s.useState(null),[f,v]=s.useState(null),[y,b]=s.useState(0),[j,w]=s.useState(0),[N,k]=s.useState(!1),[S,C]=s.useState(!1),_=(0,V.useComposedRefs)(a,e=>d(e)),T=(0,F.useDirection)(n);return(0,t.jsx)(Z,{scope:r,type:l,dir:T,scrollHideDelay:i,scrollArea:c,viewport:m,onViewportChange:u,content:h,onContentChange:x,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:N,onScrollbarXEnabledChange:k,scrollbarY:f,onScrollbarYChange:v,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:b,onCornerHeightChange:w,children:(0,t.jsx)(B.Primitive.div,{dir:T,...o,ref:_,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});Q.displayName=Y;var ee="ScrollAreaViewport",et=s.forwardRef((e,a)=>{let{__scopeScrollArea:r,children:l,nonce:n,...i}=e,o=J(ee,r),c=s.useRef(null),d=(0,V.useComposedRefs)(a,c,o.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,t.jsx)(B.Primitive.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});et.displayName=ee;var es="ScrollAreaScrollbar",ea=s.forwardRef((e,a)=>{let{forceMount:r,...l}=e,n=J(es,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,c="horizontal"===e.orientation;return s.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===n.type?(0,t.jsx)(er,{...l,ref:a,forceMount:r}):"scroll"===n.type?(0,t.jsx)(el,{...l,ref:a,forceMount:r}):"auto"===n.type?(0,t.jsx)(en,{...l,ref:a,forceMount:r}):"always"===n.type?(0,t.jsx)(ei,{...l,ref:a}):null});ea.displayName=es;var er=s.forwardRef((e,a)=>{let{forceMount:r,...l}=e,n=J(es,e.__scopeScrollArea),[i,o]=s.useState(!1);return s.useEffect(()=>{let e=n.scrollArea,t=0;if(e){let s=()=>{window.clearTimeout(t),o(!0)},a=()=>{t=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",a)}}},[n.scrollArea,n.scrollHideDelay]),(0,t.jsx)(q.Presence,{present:r||i,children:(0,t.jsx)(en,{"data-state":i?"visible":"hidden",...l,ref:a})})}),el=s.forwardRef((e,a)=>{var r;let{forceMount:l,...n}=e,i=J(es,e.__scopeScrollArea),o="horizontal"===e.orientation,c=eS(()=>m("SCROLL_END"),100),[d,m]=(r={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},s.useReducer((e,t)=>r[e][t]??e,"hidden"));return s.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>m("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,i.scrollHideDelay,m]),s.useEffect(()=>{let e=i.viewport,t=o?"scrollLeft":"scrollTop";if(e){let s=e[t],a=()=>{let a=e[t];s!==a&&(m("SCROLL"),c()),s=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}},[i.viewport,o,m,c]),(0,t.jsx)(q.Presence,{present:l||"hidden"!==d,children:(0,t.jsx)(ei,{"data-state":"hidden"===d?"hidden":"visible",...n,ref:a,onPointerEnter:(0,X.composeEventHandlers)(e.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:(0,X.composeEventHandlers)(e.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),en=s.forwardRef((e,a)=>{let r=J(es,e.__scopeScrollArea),{forceMount:l,...n}=e,[i,o]=s.useState(!1),c="horizontal"===e.orientation,d=eS(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;o(c?e:t)}},10);return eC(r.viewport,d),eC(r.content,d),(0,t.jsx)(q.Presence,{present:l||i,children:(0,t.jsx)(ei,{"data-state":i?"visible":"hidden",...n,ref:a})})}),ei=s.forwardRef((e,a)=>{let{orientation:r="vertical",...l}=e,n=J(es,e.__scopeScrollArea),i=s.useRef(null),o=s.useRef(0),[c,d]=s.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=eb(c.viewport,c.content),u={...l,sizes:c,onSizesChange:d,hasThumb:!!(m>0&&m<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,s,a="ltr"){let r=ej(s),l=t||r/2,n=s.scrollbar.paddingStart+l,i=s.scrollbar.size-s.scrollbar.paddingEnd-(r-l),o=s.content-s.viewport;return eN([n,i],"ltr"===a?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===r?(0,t.jsx)(eo,{...u,ref:a,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=ew(n.viewport.scrollLeft,c,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=h(e,n.dir))}}):"vertical"===r?(0,t.jsx)(ec,{...u,ref:a,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=ew(n.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=h(e))}}):null}),eo=s.forwardRef((e,a)=>{let{sizes:r,onSizesChange:l,...n}=e,i=J(es,e.__scopeScrollArea),[o,c]=s.useState(),d=s.useRef(null),m=(0,V.useComposedRefs)(a,d,i.onScrollbarXChange);return s.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(eu,{"data-orientation":"horizontal",...n,ref:m,sizes:r,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ej(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,s)=>{if(i.viewport){var a,r;let l=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(l),a=l,r=s,a>0&&a<r&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&l({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ey(o.paddingLeft),paddingEnd:ey(o.paddingRight)}})}})}),ec=s.forwardRef((e,a)=>{let{sizes:r,onSizesChange:l,...n}=e,i=J(es,e.__scopeScrollArea),[o,c]=s.useState(),d=s.useRef(null),m=(0,V.useComposedRefs)(a,d,i.onScrollbarYChange);return s.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(eu,{"data-orientation":"vertical",...n,ref:m,sizes:r,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ej(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,s)=>{if(i.viewport){var a,r;let l=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(l),a=l,r=s,a>0&&a<r&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&l({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ey(o.paddingTop),paddingEnd:ey(o.paddingBottom)}})}})}),[ed,em]=K(es),eu=s.forwardRef((e,a)=>{let{__scopeScrollArea:r,sizes:l,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:m,onWheelScroll:u,onResize:h,...x}=e,p=J(es,r),[g,f]=s.useState(null),v=(0,V.useComposedRefs)(a,e=>f(e)),y=s.useRef(null),b=s.useRef(""),j=p.viewport,w=l.content-l.viewport,N=(0,O.useCallbackRef)(u),k=(0,O.useCallbackRef)(d),S=eS(h,10);function C(e){y.current&&m({x:e.clientX-y.current.left,y:e.clientY-y.current.top})}return s.useEffect(()=>{let e=e=>{let t=e.target;g?.contains(t)&&N(e,w)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[j,g,w,N]),s.useEffect(k,[l,k]),eC(g,S),eC(p.content,S),(0,t.jsx)(ed,{scope:r,scrollbar:g,hasThumb:n,onThumbChange:(0,O.useCallbackRef)(i),onThumbPointerUp:(0,O.useCallbackRef)(o),onThumbPositionChange:k,onThumbPointerDown:(0,O.useCallbackRef)(c),children:(0,t.jsx)(B.Primitive.div,{...x,ref:v,style:{position:"absolute",...x.style},onPointerDown:(0,X.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),y.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),C(e))}),onPointerMove:(0,X.composeEventHandlers)(e.onPointerMove,C),onPointerUp:(0,X.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),eh="ScrollAreaThumb",ex=s.forwardRef((e,s)=>{let{forceMount:a,...r}=e,l=em(eh,e.__scopeScrollArea);return(0,t.jsx)(q.Presence,{present:a||l.hasThumb,children:(0,t.jsx)(ep,{ref:s,...r})})}),ep=s.forwardRef((e,a)=>{let{__scopeScrollArea:r,style:l,...n}=e,i=J(eh,r),o=em(eh,r),{onThumbPositionChange:c}=o,d=(0,V.useComposedRefs)(a,e=>o.onThumbChange(e)),m=s.useRef(void 0),u=eS(()=>{m.current&&(m.current(),m.current=void 0)},100);return s.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{u(),m.current||(m.current=ek(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,u,c]),(0,t.jsx)(B.Primitive.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:(0,X.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top;o.onThumbPointerDown({x:s,y:a})}),onPointerUp:(0,X.composeEventHandlers)(e.onPointerUp,o.onThumbPointerUp)})});ex.displayName=eh;var eg="ScrollAreaCorner",ef=s.forwardRef((e,s)=>{let a=J(eg,e.__scopeScrollArea),r=!!(a.scrollbarX&&a.scrollbarY);return"scroll"!==a.type&&r?(0,t.jsx)(ev,{...e,ref:s}):null});ef.displayName=eg;var ev=s.forwardRef((e,a)=>{let{__scopeScrollArea:r,...l}=e,n=J(eg,r),[i,o]=s.useState(0),[c,d]=s.useState(0),m=!!(i&&c);return eC(n.scrollbarX,()=>{let e=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(e),d(e)}),eC(n.scrollbarY,()=>{let e=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(e),o(e)}),m?(0,t.jsx)(B.Primitive.div,{...l,ref:a,style:{width:i,height:c,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null});function ey(e){return e?parseInt(e,10):0}function eb(e,t){let s=e/t;return isNaN(s)?0:s}function ej(e){let t=eb(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-s)*t,18)}function ew(e,t,s="ltr"){let a=ej(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-r,n=t.content-t.viewport,i=function(e,[t,s]){return Math.min(s,Math.max(t,e))}(e,"ltr"===s?[0,n]:[-1*n,0]);return eN([0,n],[0,l-a])(i)}function eN(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(s-e[0])}}var ek=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},a=0;return!function r(){let l={left:e.scrollLeft,top:e.scrollTop},n=s.left!==l.left,i=s.top!==l.top;(n||i)&&t(),s=l,a=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(a)};function eS(e,t){let a=(0,O.useCallbackRef)(e),r=s.useRef(0);return s.useEffect(()=>()=>window.clearTimeout(r.current),[]),s.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(a,t)},[a,t])}function eC(e,t){let s=(0,O.useCallbackRef)(t);(0,W.useLayoutEffect)(()=>{let t=0;if(e){let a=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}},[e,s])}function e_({className:e,children:s,...a}){return(0,t.jsxs)(Q,{"data-slot":"scroll-area",className:(0,_.cn)("relative",e),...a,children:[(0,t.jsx)(et,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),(0,t.jsx)(eT,{}),(0,t.jsx)(ef,{})]})}function eT({className:e,orientation:s="vertical",...a}){return(0,t.jsx)(ea,{"data-slot":"scroll-area-scrollbar",orientation:s,className:(0,_.cn)("flex touch-none p-px transition-colors select-none","vertical"===s&&"h-full w-2.5 border-l border-l-transparent","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent",e),...a,children:(0,t.jsx)(ex,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function eM({contacts:e,onAddContact:r,onUpdateContact:l,onDeleteContact:n,onSelectContact:o,selectedContactId:c}){let[d,m]=(0,s.useState)(""),[h,x]=(0,s.useState)(!1),[p,g]=(0,s.useState)(null),[f,v]=(0,s.useState)({name:"",phone:"",email:"",company:""}),[y,b]=(0,s.useState)({name:"",phone:"",email:"",company:""}),j=e.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())||e.phone.includes(d)||e.email?.toLowerCase().includes(d.toLowerCase())||e.company?.toLowerCase().includes(d.toLowerCase()));return(0,t.jsxs)(N.Card,{className:"h-full flex flex-col",children:[(0,t.jsxs)(N.CardHeader,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(N.CardTitle,{className:"text-lg",children:"Contacts"}),(0,t.jsx)(w.Button,{size:"sm",variant:h?"secondary":"default",onClick:()=>x(!h),children:h?(0,t.jsx)(H,{className:"h-4 w-4"}):(0,t.jsx)(R,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"relative mt-2",children:[(0,t.jsx)(i,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(k.Input,{placeholder:"Search contacts...",value:d,onChange:e=>m(e.target.value),className:"pl-9"})]})]}),(0,t.jsxs)(N.CardContent,{className:"flex-1 overflow-hidden",children:[h&&(0,t.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-3 mb-3 space-y-2",children:[(0,t.jsx)(k.Input,{placeholder:"Name *",value:f.name,onChange:e=>v({...f,name:e.target.value})}),(0,t.jsx)(k.Input,{placeholder:"Phone *",value:f.phone,onChange:e=>v({...f,phone:e.target.value})}),(0,t.jsx)(k.Input,{placeholder:"Email",value:f.email,onChange:e=>v({...f,email:e.target.value})}),(0,t.jsx)(k.Input,{placeholder:"Company",value:f.company,onChange:e=>v({...f,company:e.target.value})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(w.Button,{size:"sm",onClick:()=>{f.name&&f.phone&&(r(f),v({name:"",phone:"",email:"",company:""}),x(!1))},disabled:!f.name||!f.phone,children:"Save Contact"}),(0,t.jsx)(w.Button,{size:"sm",variant:"outline",onClick:()=>x(!1),children:"Cancel"})]})]}),(0,t.jsx)(e_,{className:"h-[calc(100%-1rem)]",children:(0,t.jsx)("div",{className:"space-y-2 pr-3",children:0===j.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:d?"No contacts found":"No contacts yet"}):j.map(e=>{var s;let r;return(0,t.jsx)("div",{className:`group p-3 rounded-lg border transition-colors cursor-pointer ${c===e.id?"bg-primary/10 border-primary/30":"bg-card hover:bg-secondary/50 border-border"}`,onClick:()=>p!==e.id&&o(e),children:p===e.id?(0,t.jsxs)("div",{className:"space-y-2",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)(k.Input,{value:y.name,onChange:e=>b({...y,name:e.target.value}),placeholder:"Name"}),(0,t.jsx)(k.Input,{value:y.phone,onChange:e=>b({...y,phone:e.target.value}),placeholder:"Phone"}),(0,t.jsx)(k.Input,{value:y.email,onChange:e=>b({...y,email:e.target.value}),placeholder:"Email"}),(0,t.jsx)(k.Input,{value:y.company,onChange:e=>b({...y,company:e.target.value}),placeholder:"Company"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(w.Button,{size:"sm",onClick:()=>{var t;return t=e.id,void(y.name&&y.phone&&(l(t,y),g(null)))},children:(0,t.jsx)(u,{className:"h-4 w-4"})}),(0,t.jsx)(w.Button,{size:"sm",variant:"outline",onClick:()=>g(null),children:(0,t.jsx)(H,{className:"h-4 w-4"})})]})]}):(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center shrink-0",children:(0,t.jsx)(A.User,{className:"h-5 w-5 text-primary"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,t.jsx)(a.Phone,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:10===(r=(s=e.phone).replace(/\D/g,"")).length?`(${r.slice(0,3)}) ${r.slice(3,6)}-${r.slice(6)}`:s})]}),e.company&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.company})]})]}),(0,t.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(w.Button,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:t=>{t.stopPropagation(),g(e.id),b({name:e.name,phone:e.phone,email:e.email||"",company:e.company||""})},children:(0,t.jsx)($,{className:"h-4 w-4"})}),(0,t.jsx)(w.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:t=>{t.stopPropagation(),n(e.id)},children:(0,t.jsx)(I,{className:"h-4 w-4"})})]})]})},e.id)})})})]})]})}let eE=(0,r.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),eL=(0,r.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ez=(0,r.default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);function eP({sessionId:e,identity:r,phoneNumber:i,onSessionChange:o}){let[c,d]=(0,s.useState)([]),[h,x]=(0,s.useState)(""),[p,g]=(0,s.useState)([r]),[f,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1),[j,S]=(0,s.useState)(e),[C,_]=(0,s.useState)(!0),[T,L]=(0,s.useState)("chat"),z=(0,s.useRef)(null),D=(0,s.useRef)(null),R=(0,P.createClient)();async function A(){if(_(!0),i){let e=i.startsWith("+")?i:`+${i}`,{data:t,error:s}=await R.from("interactions").select("*").or(`and(from_number.eq.${e},type.eq.sms),and(to_number.eq.${e},type.eq.sms)`).order("created_at",{ascending:!0}).limit(100);!s&&t&&(d(t.map(e=>({id:e.id,sender_identity:e.from_number,message:e.body||"",created_at:e.created_at,session_id:`sms-${e.from_number.replace("+","")}`,metadata:{type:"sms",direction:e.direction,twilio_sid:e.twilio_sid,to_number:e.to_number},source:"sms"}))),g([...new Set([...new Set(t.map(e=>e.from_number)),...new Set(t.map(e=>e.to_number)),r])]))}_(!1)}(0,s.useEffect)(()=>{D.current?.scrollIntoView({behavior:"smooth"})},[c]),(0,s.useEffect)(()=>{if("sms"===T)return void A();(async()=>{try{let{data:e,error:t}=await R.from("chat_messages").select("*").order("created_at",{ascending:!0});if(t)throw t;let s=e?.map(e=>({id:e.id,sender_identity:e.sender_identity,message:e.message,created_at:e.created_at,session_id:e.session_id,source:"chat"}))||[];d(s);let a=[...new Set(s.map(e=>e.sender_identity))];g([...a,r]),_(!1)}catch(e){console.error("Failed to load messages:",e),_(!1)}})();let e=R.channel("chat:broadcast").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},e=>{let t={id:e.new.id,sender_identity:e.new.sender_identity,message:e.new.message,created_at:e.new.created_at,session_id:e.new.session_id,source:"chat"};d(e=>[...e,t]),g(t=>{let s=new Set(t);return s.add(e.new.sender_identity),Array.from(s)})}).subscribe();return()=>{e.unsubscribe()}},[T]);let I=async t=>{if(t.trim())try{let{error:s}=await R.from("chat_messages").insert({sender_identity:r,message:t.trim(),session_id:e,created_at:new Date().toISOString()});if(s)throw s;x("")}catch(e){console.error("Failed to send message:",e)}};async function $(e,t){try{(await fetch("/api/sms/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e,message:t,from:i})})).ok&&(x(""),await A())}catch(e){console.error("Error sending SMS:",e)}}let H=async()=>{if(h.trim())if("sms"===T&&i){let e=p.find(e=>e!==r&&e.includes("+"));e?await $(e,h.trim()):alert("Please select a recipient for SMS")}else await I(h.trim())};return(0,t.jsxs)(N.Card,{className:"h-full flex flex-col",children:[(0,t.jsxs)(N.CardHeader,{className:"pb-3 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(N.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(n,{className:"h-5 w-5"}),"Sync Chat"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(M,{variant:"outline",className:"gap-1",children:[(0,t.jsx)(l,{className:"h-3 w-3"}),p.length]}),(0,t.jsx)(w.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>"sms"===T&&A(),disabled:C,children:(0,t.jsx)(eL,{className:`h-4 w-4 ${C?"animate-spin":""}`})})]})]}),(0,t.jsx)(E.Tabs,{value:T,onValueChange:e=>L(e),className:"mt-2",children:(0,t.jsxs)(E.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(E.TabsTrigger,{value:"chat",children:"Sync Chat"}),(0,t.jsxs)(E.TabsTrigger,{value:"sms",disabled:!i,children:[(0,t.jsx)(ez,{className:"h-3 w-3 mr-2"}),"SMS"]})]})}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-2",children:y?(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)(k.Input,{value:j,onChange:e=>S(e.target.value),placeholder:"Session ID",className:"h-8 text-sm"}),(0,t.jsx)(w.Button,{size:"sm",variant:"default",onClick:()=>{j&&j!==e&&o?.(j),b(!1)},children:(0,t.jsx)(u,{className:"h-4 w-4"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex-1 text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"sms"===T?"Phone:":"Session:"})," ",(0,t.jsx)("button",{onClick:()=>b(!0),className:"font-mono text-primary hover:underline",children:"sms"===T?i||"No phone":e})]}),(0,t.jsx)(w.Button,{size:"sm",variant:"outline",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}?session=${e}&identity=guest`),v(!0),setTimeout(()=>v(!1),2e3)},className:"h-8 bg-transparent",children:f?(0,t.jsx)(u,{className:"h-4 w-4"}):(0,t.jsx)(m,{className:"h-4 w-4"})})]})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:p.map(e=>(0,t.jsxs)(M,{variant:e===r?"default":"secondary",className:"text-xs",children:[e.includes("+")?(0,t.jsx)(a.Phone,{className:"h-3 w-3 mr-1"}):null,e,e===r&&" (you)"]},e))})]}),(0,t.jsxs)(N.CardContent,{className:"flex-1 flex flex-col min-h-0 p-4",children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-auto mb-3",ref:z,children:(0,t.jsxs)("div",{className:"space-y-3",children:[C?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8 text-muted-foreground text-sm",children:[(0,t.jsx)(eL,{className:"h-4 w-4 animate-spin mr-2"}),"Loading messages..."]}):0===c.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[(0,t.jsx)(n,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No messages yet"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"sms"===T?"Send an SMS to get started!":"Start the conversation!"})]}):c.map(e=>{let s=e.sender_identity===r,a=e.metadata?.type==="sms";return(0,t.jsxs)("div",{className:`flex flex-col ${s?"items-end":"items-start"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a&&(0,t.jsx)(ez,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.sender_identity}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),a&&(0,t.jsx)(M,{variant:"outline",className:"text-xs h-4 px-1",children:"SMS"})]}),(0,t.jsx)("div",{className:`max-w-[80%] rounded-lg px-3 py-2 text-sm ${s?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:e.message})]},`${e.id}-${e.created_at}`)}),(0,t.jsx)("div",{ref:D})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-3 border-t border-border shrink-0",children:[(0,t.jsx)(k.Input,{placeholder:"sms"===T?`Type SMS to ${p.find(e=>e!==r&&e.includes("+"))||"recipient"}...`:"Type a message...",value:h,onChange:e=>x(e.target.value),onKeyDown:e=>"Enter"===e.key&&H(),className:"flex-1"}),(0,t.jsx)(w.Button,{size:"icon",onClick:H,disabled:!h.trim(),children:(0,t.jsx)(eE,{className:"h-4 w-4"})})]})]})]})}let eD=(0,r.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),eR=(0,r.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),eA=(0,r.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),eI=(0,r.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function e$(){let[e,a]=(0,s.useState)(""),[r,l]=(0,s.useState)(!1),[n,i]=(0,s.useState)(""),o=(0,s.useRef)(null);(0,P.createClient)(),(0,s.useEffect)(()=>{let e=localStorage.getItem("persistent_notes");if(e){a(e);let t=localStorage.getItem("notes_last_saved");t&&i(t)}},[]);let c=async()=>{l(!0);try{localStorage.setItem("persistent_notes",e);let t=new Date().toLocaleTimeString();localStorage.setItem("notes_last_saved",t),i(t)}catch(e){console.error("Failed to save notes:",e)}finally{l(!1)}};return(0,t.jsxs)(N.Card,{className:"h-full flex flex-col",children:[(0,t.jsx)(N.CardHeader,{className:"pb-3 shrink-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(N.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(eI,{className:"h-5 w-5"}),"Notes"]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:n&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Saved: ",n]})})]})}),(0,t.jsxs)(N.CardContent,{className:"flex-1 flex flex-col min-h-0 gap-3",children:[(0,t.jsx)(L,{value:e,onChange:e=>a(e.target.value),placeholder:"Write your notes here... They auto-save to your browser.",className:"flex-1 resize-none"}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsxs)(w.Button,{size:"sm",onClick:c,disabled:r,className:"gap-2",children:[(0,t.jsx)(eD,{className:"h-4 w-4"}),"Save"]}),(0,t.jsxs)(w.Button,{size:"sm",variant:"outline",onClick:()=>o.current?.click(),className:"gap-2",children:[(0,t.jsx)(eR,{className:"h-4 w-4"}),"Load .txt/.md"]}),(0,t.jsxs)(w.Button,{size:"sm",variant:"outline",onClick:()=>{let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",`notes-${new Date().toISOString().split("T")[0]}.txt`),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},disabled:!e.trim(),className:"gap-2",children:[(0,t.jsx)(eA,{className:"h-4 w-4"}),"Download"]}),(0,t.jsxs)(w.Button,{size:"sm",variant:"outline",onClick:()=>{confirm("Are you sure you want to clear all notes?")&&(a(""),localStorage.removeItem("persistent_notes"),localStorage.removeItem("notes_last_saved"),i(""))},disabled:!e.trim(),className:"gap-2 text-destructive hover:text-destructive",children:[(0,t.jsx)(I,{className:"h-4 w-4"}),"Clear"]})]}),(0,t.jsx)("input",{ref:o,type:"file",accept:".txt,.md",onChange:e=>{let t=e.target.files?.[0];if(!t)return;let s=new FileReader;s.onload=e=>{a(e.target?.result),c()},s.readAsText(t)},className:"hidden"})]})]})}let eH=(0,r.default)("PhoneIncoming",[["polyline",{points:"16 2 16 8 22 8",key:"1ygljm"}],["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),eB=(0,r.default)("PhoneOutgoing",[["polyline",{points:"22 8 22 2 16 2",key:"1g204g"}],["line",{x1:"16",x2:"22",y1:"8",y2:"2",key:"1ggias"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),eq=(0,r.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),eU=(0,r.default)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),eV=(0,r.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var eO=e.i(15278);function eF(){let[e,r]=(0,s.useState)([]),[l,i]=(0,s.useState)([]),[o,m]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[x,p]=(0,s.useState)("all"),g=(0,P.createClient)();async function f(){h(!0);try{let{data:e,error:t}=await g.from("interactions").select(`
          *,
          contacts (name, phone),
          clients (name)
        `).order("created_at",{ascending:!1}).limit(100);!t&&e?r(e):console.error("Error fetching interactions:",t);let{data:s,error:a}=await g.from("scheduled_followups").select(`
          *,
          contacts (name, phone)
        `).order("scheduled_for",{ascending:!0}).limit(50);!a&&s?i(s):console.error("Error fetching follow-ups:",a);let{data:l,error:n}=await g.from("leads").select(`
          *,
          contacts (name, phone)
        `).eq("follow_up_required",!0).eq("status","new").order("created_at",{ascending:!1}).limit(50);!n&&l?m(l):console.error("Error fetching leads:",n)}catch(e){console.error("Error in fetchData:",e)}finally{h(!1)}}(0,s.useEffect)(()=>{f();let e=g.channel("interactions-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"interactions"},()=>{f()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"interactions"},()=>{f()}).subscribe(),t=g.channel("followups-changes").on("postgres_changes",{event:"*",schema:"public",table:"scheduled_followups"},()=>{f()}).subscribe(),s=g.channel("leads-changes").on("postgres_changes",{event:"*",schema:"public",table:"leads"},()=>{f()}).subscribe();return()=>{g.removeChannel(e),g.removeChannel(t),g.removeChannel(s)}},[]);let v=e.filter(e=>"all"===x||("calls"===x?"call"===e.type:"sms"===x?"sms"===e.type:"voicemail"===x?"voicemail"===e.type:"missed"===x?!0===e.is_missed_call:"auto"!==x||!0===e.is_auto_response));function y(e){let t=e.replace(/\D/g,"");if(11===t.length&&t.startsWith("1")){let e=t.match(/^1(\d{3})(\d{3})(\d{4})$/);if(e)return`+1 (${e[1]}) ${e[2]}-${e[3]}`}if(10===t.length){let e=t.match(/^(\d{3})(\d{3})(\d{4})$/);if(e)return`(${e[1]}) ${e[2]}-${e[3]}`}return e}function b(e){if(!e||0===e)return"--";if(e<60)return`${e}s`;let t=Math.floor(e/60);if(t<60)return`${t}m ${e%60}s`;let s=Math.floor(t/60);return`${s}h ${t%60}m`}function j(e){let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}let k={total:e.length,missed:e.filter(e=>e.is_missed_call).length,auto:e.filter(e=>e.is_auto_response).length,pendingFollowups:l.filter(e=>"scheduled"===e.status).length,newLeads:o.filter(e=>"new"===e.status).length};return(0,t.jsxs)(N.Card,{className:"h-full flex flex-col",children:[(0,t.jsx)(N.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(N.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(a.Phone,{className:"h-5 w-5 text-primary"}),"Activity Dashboard"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"text-xs flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),k.total," total"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),k.missed," missed"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),k.auto," auto"]})]}),(0,t.jsx)(w.Button,{variant:"ghost",size:"icon",onClick:f,disabled:u,children:(0,t.jsx)(eL,{className:`h-4 w-4 ${u?"animate-spin":""}`})})]})]})}),(0,t.jsxs)(N.CardContent,{className:"flex-1 flex flex-col pt-0",children:[(0,t.jsxs)(E.Tabs,{value:x,onValueChange:p,className:"flex-1 flex flex-col",children:[(0,t.jsxs)(E.TabsList,{className:"grid w-full grid-cols-6 mb-3",children:[(0,t.jsx)(E.TabsTrigger,{value:"all",className:"text-xs",children:"All"}),(0,t.jsx)(E.TabsTrigger,{value:"calls",className:"text-xs",children:"Calls"}),(0,t.jsx)(E.TabsTrigger,{value:"sms",className:"text-xs",children:"SMS"}),(0,t.jsx)(E.TabsTrigger,{value:"voicemail",className:"text-xs",children:"Voicemail"}),(0,t.jsx)(E.TabsTrigger,{value:"missed",className:"text-xs",children:"Missed"}),(0,t.jsx)(E.TabsTrigger,{value:"auto",className:"text-xs",children:"Auto"})]}),(0,t.jsx)(E.TabsContent,{value:x,className:"flex-1 mt-0",children:(0,t.jsx)(e_,{className:"h-[280px]",children:u?(0,t.jsxs)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:[(0,t.jsx)(eL,{className:"h-5 w-5 animate-spin mr-2"}),"Loading activity..."]}):0===v.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground text-sm",children:[(0,t.jsx)(a.Phone,{className:"h-8 w-8 mb-2 opacity-50"}),(0,t.jsxs)("p",{children:["No ","all"===x?"activity":x," yet"]}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"missed"===x?"Missed calls will trigger automatic SMS follow-ups":"All calls and messages will appear here"})]}):(0,t.jsx)("div",{className:"space-y-2",children:v.map(e=>{var s,a;return(0,t.jsx)("div",{className:"p-3 rounded-lg bg-secondary/30 hover:bg-secondary/50 transition-colors cursor-pointer group",onClick:()=>{console.log("Interaction details:",e)},children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"p-2 rounded-full bg-secondary/50 group-hover:bg-secondary",children:"sms"===(s=e).type?s.is_auto_response?(0,t.jsx)(eO.Mail,{className:"h-4 w-4 text-orange-500"}):(0,t.jsx)(n,{className:"h-4 w-4"}):"voicemail"===s.type?(0,t.jsx)(d,{className:"h-4 w-4 text-purple-500"}):s.is_missed_call?(0,t.jsx)(c,{className:"h-4 w-4 text-red-500"}):"inbound"===s.direction?(0,t.jsx)(eH,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(eB,{className:"h-4 w-4 text-blue-500"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"font-medium text-sm truncate",children:e.contacts?.name||y(e.from_number)}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["inbound"===e.direction?(0,t.jsx)(eU,{className:"h-3 w-3 text-muted-foreground"}):(0,t.jsx)(eV,{className:"h-3 w-3 text-muted-foreground"}),e.is_auto_response&&(0,t.jsx)(M,{variant:"outline",className:"text-[8px] px-1 py-0 h-4 bg-orange-500/10 text-orange-600 border-orange-300",children:"Auto"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:"sms"===(a=e).type&&a.content?a.content.length>50?a.content.substring(0,50)+"...":a.content:"call"===a.type?a.is_missed_call?"Missed call":a.answered?`Answered (${b(a.duration_seconds)})`:"Call":"voicemail"===a.type?`Voicemail (${b(a.duration_seconds)})`:`${a.type} ${a.direction}`}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.clients?.name&&(0,t.jsx)("span",{className:"inline-block mr-2 px-1.5 py-0.5 bg-primary/10 rounded text-primary",children:e.clients.name}),j(e.created_at)]})]})]}),(0,t.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,t.jsx)(M,{variant:"outline",className:`text-[10px] px-2 py-0.5 ${function(e){switch(e){case"completed":case"delivered":case"received":case"answered":case"sent":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"ringing":case"in-progress":case"queued":case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"no-answer":case"busy":case"failed":case"undelivered":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}}(e.status)}`,children:e.status.replace("-"," ")}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-1.5 text-xs text-muted-foreground justify-end",children:[(0,t.jsx)(eq,{className:"h-3 w-3"}),"call"===e.type||"voicemail"===e.type?b(e.duration_seconds):j(e.created_at)]})]})]})},e.id)})})})})]}),(l.length>0||o.length>0)&&(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-border",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[(0,t.jsx)(eq,{className:"h-4 w-4 text-blue-500"}),"Scheduled Follow-ups",k.pendingFollowups>0&&(0,t.jsx)(M,{variant:"outline",className:"ml-1 text-[10px] px-1.5 py-0 h-4",children:k.pendingFollowups})]}),(0,t.jsx)(e_,{className:"h-[80px]",children:0===l.filter(e=>"scheduled"===e.status).length?(0,t.jsx)("p",{className:"text-xs text-muted-foreground italic",children:"No scheduled follow-ups"}):(0,t.jsx)("div",{className:"space-y-1.5",children:l.filter(e=>"scheduled"===e.status).slice(0,3).map(e=>(0,t.jsxs)("div",{className:"p-2 rounded-md bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"truncate flex-1 mr-2",children:e.contacts?.name||y(e.contacts?.phone||"Unknown")}),(0,t.jsx)(M,{variant:"outline",className:"text-[9px] px-1.5 py-0 h-4 bg-blue-500/10 text-blue-600",children:e.type})]}),(0,t.jsx)("p",{className:"text-muted-foreground text-[10px] mt-0.5",children:new Date(e.scheduled_for).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},e.id))})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[(0,t.jsx)(A.User,{className:"h-4 w-4 text-green-500"}),"New Leads",k.newLeads>0&&(0,t.jsx)(M,{variant:"outline",className:"ml-1 text-[10px] px-1.5 py-0 h-4",children:k.newLeads})]}),(0,t.jsx)(e_,{className:"h-[80px]",children:0===o.length?(0,t.jsx)("p",{className:"text-xs text-muted-foreground italic",children:"No new leads"}):(0,t.jsx)("div",{className:"space-y-1.5",children:o.slice(0,3).map(e=>(0,t.jsxs)("div",{className:`p-2 rounded-md border text-xs ${"high"===e.priority?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"medium"===e.priority?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"truncate flex-1 mr-2",children:e.contacts?.name||y(e.phone||"Unknown")}),(0,t.jsx)(M,{variant:"outline",className:`text-[9px] px-1.5 py-0 h-4 ${"high"===e.priority?"bg-red-500/10 text-red-600":"medium"===e.priority?"bg-yellow-500/10 text-yellow-600":"bg-green-500/10 text-green-600"}`,children:e.priority})]}),(0,t.jsx)("p",{className:"text-muted-foreground text-[10px] mt-0.5 capitalize",children:e.source.replace("_"," ")})]},e.id))})})]})]})})]})]})}let eW=(0,r.default)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var eX=e.i(68793);let eY=(0,r.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),eK=(0,r.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),eG=(0,r.default)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),eZ=(0,r.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);function eJ(){let[e,a]=(0,s.useState)([]),[r,l]=(0,s.useState)(!1),[n,i]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),d=(0,s.useCallback)(async e=>{l(!0);try{let t=URL.createObjectURL(e),s={id:Date.now().toString(),name:e.name,size:e.size,type:e.type,url:t,createdAt:new Date};a(e=>[s,...e]),z.toast.success(`File added: ${e.name}`)}catch(e){z.toast.error("Upload failed")}finally{l(!1)}},[]),m=(0,s.useCallback)(e=>{a(t=>{let s=t.find(t=>t.id===e);return s&&(URL.revokeObjectURL(s.url),z.toast.success("File removed")),t.filter(t=>t.id!==e)}),o?.id===e&&c(null)},[o]),u=(0,s.useCallback)(e=>{let t=document.createElement("a");t.href=e.url,t.download=e.name,t.click(),z.toast.success("Download started")},[]),h=(0,s.useCallback)(e=>{e.preventDefault(),i(!1),Array.from(e.dataTransfer.files).forEach(e=>d(e))},[d]),x=(0,s.useCallback)(e=>{Array.from(e.target.files||[]).forEach(e=>d(e)),e.target.value=""},[d]),p=e=>e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`;return(0,t.jsxs)(N.Card,{className:"h-full flex flex-col overflow-hidden",children:[(0,t.jsx)(N.CardHeader,{className:"flex-shrink-0 pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(N.CardTitle,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(eR,{className:"h-5 w-5"}),"File Manager"]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.length," file",1!==e.length?"s":""]})]})}),(0,t.jsxs)(N.CardContent,{className:"flex-1 flex flex-col gap-4 min-h-0 overflow-hidden p-4",children:[(0,t.jsxs)("div",{onDragOver:e=>{e.preventDefault(),i(!0)},onDragLeave:()=>i(!1),onDrop:h,className:`
            relative border-2 border-dashed rounded-xl p-6 transition-all flex-shrink-0
            ${n?"border-primary bg-primary/5 scale-[0.98]":"border-border hover:border-primary/50 hover:bg-accent/5"}
            ${r?"opacity-50 pointer-events-none":"cursor-pointer"}
          `,children:[(0,t.jsx)("input",{type:"file",multiple:!0,onChange:x,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:r}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 text-center",children:[(0,t.jsx)("div",{className:`
              h-12 w-12 rounded-xl flex items-center justify-center transition-all
              ${n?"bg-primary text-white scale-110":"bg-primary/10 text-primary"}
            `,children:(0,t.jsx)(eR,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:r?"Adding...":n?"Drop files here":"Drop or click to add files"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Images, documents, videos & more"})]})]})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 -mr-4",children:(0,t.jsx)(e_,{className:"h-full pr-4",children:(0,t.jsx)("div",{className:"space-y-2",children:0===e.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(eW,{className:"h-10 w-10 mx-auto mb-2 opacity-20"}),(0,t.jsx)("p",{className:"text-sm",children:"No files yet"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"Add files to get started"})]}):e.map(e=>{var s;return(0,t.jsxs)("div",{className:`
                      group flex items-center gap-2 p-2.5 rounded-lg border transition-all
                      ${o?.id===e.id?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/5"}
                    `,children:[(0,t.jsx)("div",{className:"flex-shrink-0 h-9 w-9 rounded-lg bg-primary/10 text-primary flex items-center justify-center",children:(s=e.type).startsWith("image/")?(0,t.jsx)(eY,{className:"h-4 w-4"}):s.startsWith("video/")?(0,t.jsx)(eK,{className:"h-4 w-4"}):s.startsWith("audio/")?(0,t.jsx)(eG,{className:"h-4 w-4"}):s.includes("zip")||s.includes("rar")?(0,t.jsx)(eZ,{className:"h-4 w-4"}):(0,t.jsx)(eI,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground whitespace-nowrap",children:p(e.size)}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:""}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground whitespace-nowrap",children:e.createdAt.toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 flex-shrink-0 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(w.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:()=>c(e),title:"Preview",children:(0,t.jsx)(eX.Eye,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(w.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:()=>u(e),title:"Download",children:(0,t.jsx)(eA,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(w.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>m(e.id),title:"Delete",children:(0,t.jsx)(I,{className:"h-3.5 w-3.5"})})]})]},e.id)})})})}),e.length>0&&(0,t.jsxs)("div",{className:"flex-shrink-0 text-xs text-muted-foreground text-center pt-2 border-t",children:["Total: ",p(e.reduce((e,t)=>e+t.size,0))]})]}),o&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>c(null),children:(0,t.jsxs)("div",{className:"bg-background rounded-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold truncate",children:o.name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[p(o.size),"  ",o.type]})]}),(0,t.jsx)(w.Button,{size:"sm",variant:"ghost",onClick:()=>c(null),children:(0,t.jsx)(H,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"p-4",children:o.type.startsWith("image/")?(0,t.jsx)("img",{src:o.url,alt:o.name,className:"w-full h-auto rounded-lg"}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(eW,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Preview not available"}),(0,t.jsxs)(w.Button,{onClick:()=>u(o),children:[(0,t.jsx)(eA,{className:"h-4 w-4 mr-2"}),"Download File"]})]})})]})})]})}let eQ=(0,P.createClient)(),e0="18444073511";function e1(){let e=(0,D.useRouter)(),[r,S]=(0,s.useState)("overview"),[C,T]=(0,s.useState)(!0),[M,P]=(0,s.useState)(!0),[R,A]=(0,s.useState)(""),[I,$]=(0,s.useState)([]),[H,B]=(0,s.useState)([]),[q,U]=(0,s.useState)([]),[V,O]=(0,s.useState)([]),[F,W]=(0,s.useState)("today"),[X,Y]=(0,s.useState)(null),[K,G]=(0,s.useState)([]),[Z,J]=(0,s.useState)(new Date),[Q,ee]=(0,s.useState)(""),[et,es]=(0,s.useState)(!1),[ea,er]=(0,s.useState)(0),[el,en]=(0,s.useState)(null),[ei,eo]=(0,s.useState)(!1),[ec,ed]=(0,s.useState)(!1),[em,eu]=(0,s.useState)(""),[eh,ex]=(0,s.useState)(null),[ep,eg]=(0,s.useState)(""),[ef,ev]=(0,s.useState)(null),[ey,eb]=(0,s.useState)(!1),[ej,ew]=(0,s.useState)(!1),[eN,ek]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=setInterval(()=>{J(new Date)},1e3);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{eN?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[eN]),(0,s.useEffect)(()=>{X&&!ej&&(z.toast.success(`Welcome back, ${X?.user_metadata?.name||X?.email?.split("@")[0]||"User"}!`),ew(!0))},[X,ej]),(0,s.useEffect)(()=>{(async()=>{P(!0);try{let{data:{session:t},error:s}=await eQ.auth.getSession();if(s)throw console.error("Session error:",s),s;if(!t){console.log("No session found, redirecting to login"),e.push("/login");return}console.log("Session found for user:",t.user.email),Y(t.user),await eC()}catch(t){console.error("Auth error:",t),e.push("/login")}finally{P(!1)}})();let{data:{subscription:t}}=eQ.auth.onAuthStateChange((t,s)=>{console.log("Auth state changed:",t),"SIGNED_OUT"===t?(console.log("User signed out, redirecting to login"),Y(null),$([]),B([]),U([]),e.push("/login")):"SIGNED_IN"===t&&s&&(console.log("User signed in:",s.user.email),Y(s.user),eC())});return()=>{t.unsubscribe()}},[e]);let eS=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],eC=(0,s.useCallback)(async()=>{T(!0);try{let{data:e}=await eQ.from("interactions").select(`
          *,
          contacts (name, phone),
          clients (name)
        `).order("created_at",{ascending:!1}).limit(20);e&&$(e);let{data:t}=await eQ.from("leads").select("*").order("created_at",{ascending:!1}).limit(8);t&&B(t);let{data:s}=await eQ.from("contacts").select("*").order("created_at",{ascending:!1}).limit(12);s&&U(s),e_(e||[],t||[]),G([{id:1,type:"warning",message:"3 missed calls need follow-up",time:"5 min ago"},{id:2,type:"info",message:"New lead from website form",time:"15 min ago"},{id:3,type:"success",message:"Monthly report generated",time:"1 hour ago"},{id:4,type:"info",message:`Your number ${(0,_.formatPhoneNumber)(e0)} is active`,time:"2 hours ago"}])}catch(e){console.error("Error fetching dashboard data:",e),z.toast.error("Failed to load dashboard data")}finally{T(!1)}},[]),e_=(e,s)=>{let r=e.filter(e=>"call"===e.type).length,i=e.filter(e=>e.is_missed_call).length,m=e.filter(e=>"sms"===e.type).length,u=s.filter(e=>"new"===e.status).length,h=r-i,x=r>0?Math.round(h/r*100):0;O([{label:"Total Calls",value:r,change:12,icon:(0,t.jsx)(a.Phone,{className:"h-4 w-4"}),color:"bg-blue-500"},{label:"Answer Rate",value:`${x}%`,change:x>80?5:-3,icon:(0,t.jsx)(o,{className:"h-4 w-4"}),color:"bg-green-500"},{label:"SMS Sent",value:m,change:23,icon:(0,t.jsx)(n,{className:"h-4 w-4"}),color:"bg-amber-500"},{label:"Missed Calls",value:i,change:-5,icon:(0,t.jsx)(c,{className:"h-4 w-4"}),color:"bg-red-500"},{label:"New Leads",value:u,change:8,icon:(0,t.jsx)(l,{className:"h-4 w-4"}),color:"bg-purple-500"},{label:"Voicemails",value:e.filter(e=>"voicemail"===e.type).length,change:2,icon:(0,t.jsx)(d,{className:"h-4 w-4"}),color:"bg-indigo-500"}])},eT=async()=>{if(Q||et)if(et)es(!1),eo(!1),ed(!1),el&&(clearInterval(el),en(null)),er(0),ee(""),eu(""),z.toast.success("Call ended");else{es(!0),z.toast.success(`Calling ${(0,_.formatPhoneNumber)(Q)}...`),en(setInterval(()=>{er(e=>e+1)},1e3));try{await eQ.from("interactions").insert({type:"call",direction:"outbound",from_number:e0,to_number:Q,status:"ringing",is_missed_call:!1,created_at:new Date().toISOString(),client_id:X?.id||null,contact_id:eh?.id||null}),eh&&await eQ.from("contacts").update({last_interaction:new Date().toISOString()}).eq("id",eh.id)}catch(e){console.error("Error logging call:",e)}}},eE=async()=>{if(!Q||!ep.trim())return void z.toast.error("Please enter a phone number and message");try{await eQ.from("interactions").insert({type:"sms",direction:"outbound",from_number:e0,to_number:Q,status:"sent",content:ep,is_auto_response:!1,created_at:new Date().toISOString(),client_id:X?.id||null,contact_id:eh?.id||null}),eh&&await eQ.from("contacts").update({last_interaction:new Date().toISOString()}).eq("id",eh.id),eg(""),z.toast.success("SMS sent successfully"),eC()}catch(e){console.error("Error sending SMS:",e),z.toast.error("Failed to send SMS")}},eL=(0,_.debounce)(e=>{A(e)},300),ez=async()=>{try{console.log("Logging out...");let{error:t}=await eQ.auth.signOut();if(t){console.error("Logout error:",t),z.toast.error("Failed to logout. Please try again.");return}console.log("Logout successful"),z.toast.success("Logged out successfully"),Y(null),$([]),B([]),U([]),O([]),setTimeout(()=>{e.push("/login")},100)}catch(e){console.error("Logout exception:",e),z.toast.error("An error occurred during logout")}};return(I.filter(e=>!R||e.from_number?.includes(R)||e.contacts?.name?.toLowerCase().includes(R.toLowerCase())||e.type?.includes(R.toLowerCase())),C||M)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-cyan-600 border-t-transparent mx-auto"}),(0,t.jsx)("p",{className:"text-muted-foreground font-medium",children:M?"Checking authentication...":"Loading callaback API..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[(0,t.jsx)(z.Toaster,{position:"top-center",richColors:!0}),(0,t.jsx)("header",{className:"border-b border-slate-200 bg-white/80 backdrop-blur-xl sticky top-0 z-50 shadow-sm",children:(0,t.jsx)("div",{className:"max-w-[2000px] mx-auto px-4 sm:px-6 py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,t.jsx)("div",{className:"h-11 w-11 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-md flex-shrink-0",children:(0,t.jsx)(a.Phone,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("h1",{className:"font-bold text-xl bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent",children:"callaback"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-cyan-700",children:(0,_.formatPhoneNumber)(e0)}),(0,t.jsx)(w.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText((0,_.formatPhoneNumber)(e0)),ev(e0),z.toast.success("Phone number copied"),setTimeout(()=>ev(null),2e3)},title:"Copy phone number",children:ef===e0?(0,t.jsx)(u,{className:"h-3 w-3 text-green-500"}):(0,t.jsx)(m,{className:"h-3 w-3"})})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-3 px-4 py-2.5 bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl border-2 border-cyan-200 shadow-md",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-xl font-mono font-bold tracking-tight text-slate-800 tabular-nums",children:Z.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),(0,t.jsx)("p",{className:"text-xs text-slate-600 font-medium",children:Z.toLocaleDateString("en-GB",{weekday:"short",day:"2-digit",month:"short",year:"numeric"})})]}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})]}),(0,t.jsxs)("div",{className:"hidden lg:flex items-center gap-3 px-4 py-2 bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl border border-slate-200 shadow-sm",children:[(0,t.jsx)("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold shadow-md",children:(X?.user_metadata?.name||X?.email)?.[0]?.toUpperCase()||"U"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-800 truncate max-w-[150px]",children:X?.user_metadata?.name||X?.email?.split("@")[0]}),(0,t.jsx)("p",{className:"text-xs text-slate-600 truncate max-w-[150px]",children:X?.email})]})]}),(0,t.jsx)(w.Button,{variant:"outline",size:"sm",onClick:()=>ek(!eN),className:"h-10 px-3 border-slate-200 hover:bg-slate-100",title:eN?"Switch to light mode":"Switch to dark mode",children:eN?(0,t.jsx)(j,{className:"h-4 w-4 text-amber-500"}):(0,t.jsx)(b,{className:"h-4 w-4 text-slate-600"})}),(0,t.jsxs)(w.Button,{variant:"outline",size:"sm",onClick:ez,className:"h-10 px-4 border-red-200 hover:border-red-500 hover:bg-red-50 text-slate-700 hover:text-red-700",children:[(0,t.jsx)(h,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}),(0,t.jsxs)("main",{className:"max-w-[2000px] mx-auto p-4 pb-8 w-full",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(k.Input,{placeholder:"Search calls, leads, contacts, messages...",className:"pl-9 w-full",onChange:e=>eL(e.target.value)})]})}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(E.Tabs,{value:F,onValueChange:W,className:"w-full",children:(0,t.jsxs)(E.TabsList,{className:"grid w-full grid-cols-5",children:[(0,t.jsx)(E.TabsTrigger,{value:"today",className:"text-xs",children:"Today"}),(0,t.jsx)(E.TabsTrigger,{value:"yesterday",className:"text-xs",children:"Yesterday"}),(0,t.jsx)(E.TabsTrigger,{value:"week",className:"text-xs",children:"Week"}),(0,t.jsx)(E.TabsTrigger,{value:"month",className:"text-xs",children:"Month"}),(0,t.jsx)(E.TabsTrigger,{value:"all",className:"text-xs",children:"All"})]})})}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-4",children:V.map((e,s)=>(0,t.jsx)(N.Card,{className:"hover:shadow transition-shadow",children:(0,t.jsx)(N.CardContent,{className:"p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:e.label}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,t.jsx)("p",{className:"text-lg font-bold",children:e.value}),e.change&&(0,t.jsxs)("span",{className:(0,_.cn)("text-[10px] font-medium",e.change>0?"text-green-600":"text-red-600"),children:[e.change>0?"+":"",e.change,"%"]})]})]}),(0,t.jsx)("div",{className:(0,_.cn)("h-8 w-8 rounded-full flex items-center justify-center",e.color,"text-white"),children:e.icon})]})})},s))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 min-h-[600px]",children:[(0,t.jsxs)("div",{className:"lg:col-span-3 flex flex-col gap-3",children:[(0,t.jsxs)(N.Card,{className:"flex-shrink-0",children:[(0,t.jsx)(N.CardHeader,{className:"pb-2 px-4 pt-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(N.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(a.Phone,{className:"h-4 w-4 text-primary"}),"Quick Dial"]}),(0,t.jsx)(w.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>eb(!ey),title:ey?"Compact view":"Expand dialer",children:(0,t.jsx)(y,{className:"h-3 w-3"})})]})}),(0,t.jsxs)(N.CardContent,{className:"p-4 pt-0",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs font-medium",children:"Number"}),Q&&(0,t.jsx)(w.Button,{variant:"ghost",size:"icon",onClick:()=>{eu(e=>e.slice(0,-1)),ee(e=>e.slice(0,-1))},className:"h-5 w-5",children:(0,t.jsx)(v,{className:"h-3 w-3"})})]}),(0,t.jsx)("div",{className:"text-lg font-mono text-center p-2 bg-secondary/30 rounded border",children:(0,_.formatPhoneNumber)(Q)||"Enter number"})]}),(0,t.jsx)("div",{className:(0,_.cn)("grid grid-cols-3 gap-1.5 mb-3",""),children:(ey?eS:eS.slice(0,6)).map(({digit:e,letters:s})=>(0,t.jsxs)(w.Button,{variant:"secondary",className:"h-8 flex flex-col items-center justify-center p-0 text-xs hover:bg-primary/10",onClick:()=>{em.length<20&&(eu(t=>t+e),ee(t=>t+e))},disabled:et,children:[(0,t.jsx)("span",{className:"font-bold",children:e}),s&&(0,t.jsx)("span",{className:"text-[6px] text-muted-foreground",children:s})]},e))}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1.5",children:[(0,t.jsx)(w.Button,{size:"icon",className:(0,_.cn)("h-10 w-10 rounded-full",et?"bg-destructive hover:bg-destructive/90 animate-pulse":Q?"bg-primary hover:bg-primary/90":"bg-primary/30 cursor-not-allowed"),onClick:eT,disabled:!Q&&!et,children:(0,t.jsx)(a.Phone,{className:"h-4 w-4"})}),et&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Button,{variant:"outline",size:"icon",className:(0,_.cn)("h-8 w-8 rounded-full",ei?"bg-destructive/20 border-destructive text-destructive":"hover:bg-primary/10"),onClick:()=>eo(!ei),children:ei?(0,t.jsx)(p,{className:"h-3 w-3"}):(0,t.jsx)(x,{className:"h-3 w-3"})}),(0,t.jsx)(w.Button,{variant:"outline",size:"icon",className:(0,_.cn)("h-8 w-8 rounded-full",ec?"bg-primary/20 border-primary text-primary":"hover:bg-primary/10"),onClick:()=>ed(!ec),children:ec?(0,t.jsx)(g,{className:"h-3 w-3"}):(0,t.jsx)(f,{className:"h-3 w-3"})})]})]}),et&&(0,t.jsx)("div",{className:"text-center mt-1.5",children:(0,t.jsx)("p",{className:"text-xs font-mono",children:(0,_.formatDuration)(ea)})})]})]}),(0,t.jsxs)(N.Card,{className:"flex-shrink-0",children:[(0,t.jsx)(N.CardHeader,{className:"pb-2 px-4 pt-4",children:(0,t.jsxs)(N.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(n,{className:"h-4 w-4 text-primary"}),"Quick SMS"]})}),(0,t.jsxs)(N.CardContent,{className:"p-4 pt-0",children:[(0,t.jsx)(L,{placeholder:"Type SMS message...",value:ep,onChange:e=>eg(e.target.value),rows:2,className:"text-sm mb-2 resize-none"}),(0,t.jsxs)(w.Button,{size:"sm",className:"w-full",onClick:eE,disabled:!Q||!ep.trim(),children:[(0,t.jsx)(n,{className:"h-3 w-3 mr-2"}),"Send SMS"]})]})]}),(0,t.jsx)("div",{className:"h-[450px]",children:(0,t.jsx)(eJ,{})})]}),(0,t.jsxs)("div",{className:"lg:col-span-5 flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"h-[380px]",children:(0,t.jsx)(eM,{contacts:q.map(e=>({id:e.id,name:e.name,phone:e.phone,email:e.email,company:e.company,createdAt:new Date(e.created_at)})),onAddContact:async e=>{try{let{data:t,error:s}=await eQ.from("contacts").insert({name:e.name,phone:e.phone,email:e.email,company:e.company,created_at:new Date().toISOString()}).select().single();if(s)throw s;z.toast.success("Contact added successfully"),eC()}catch(e){console.error("Error adding contact:",e),z.toast.error("Failed to add contact")}},onUpdateContact:async(e,t)=>{try{let{error:s}=await eQ.from("contacts").update(t).eq("id",e);if(s)throw s;z.toast.success("Contact updated successfully"),eC()}catch(e){console.error("Error updating contact:",e),z.toast.error("Failed to update contact")}},onDeleteContact:async e=>{try{let{error:t}=await eQ.from("contacts").delete().eq("id",e);if(t)throw t;z.toast.success("Contact deleted successfully"),eC()}catch(e){console.error("Error deleting contact:",e),z.toast.error("Failed to delete contact")}},onSelectContact:e=>{ee(e.phone),eu(e.phone.replace(/\D/g,"")),ex(e)},selectedContactId:eh?.id})}),(0,t.jsx)("div",{className:"h-[650px]",children:(0,t.jsx)(eP,{sessionId:X?.id||"user-session",identity:X?.email||"User",phoneNumber:e0,onSessionChange:()=>{}})})]}),(0,t.jsxs)("div",{className:"lg:col-span-4 flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"h-[380px]",children:(0,t.jsx)(eF,{})}),(0,t.jsx)("div",{className:"h-[650px]",children:(0,t.jsx)(e$,{})})]})]})]})]})}e.s(["default",()=>e1],31713)}]);